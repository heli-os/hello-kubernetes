{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2a4\ucfe8 by cloudacode \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2a4\ucfe8 Project \ud83d\ude80 kubernetes\ub97c \uc774\ud574\ud558\uace0 production level\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \ud544\uc694\ud55c \uae30\uc220\ub4e4\uc744 \uc5f0\uad6c\ud569\ub2c8\ub2e4. Team \ud83e\uddd1\u200d\ud83d\ude80\ud83d\ude4d\ud83d\udc68\u200d\ud83c\udf93 A seasoned cloud and site reliability engineers.","title":"Home"},{"location":"#welcome-to-by-cloudacode","text":"","title":"Welcome to \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2a4\ucfe8 by cloudacode"},{"location":"#project","text":"kubernetes\ub97c \uc774\ud574\ud558\uace0 production level\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \ud544\uc694\ud55c \uae30\uc220\ub4e4\uc744 \uc5f0\uad6c\ud569\ub2c8\ub2e4.","title":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2a4\ucfe8 Project \ud83d\ude80"},{"location":"#team","text":"A seasoned cloud and site reliability engineers.","title":"Team \ud83e\uddd1\u200d\ud83d\ude80\ud83d\ude4d\ud83d\udc68\u200d\ud83c\udf93"},{"location":"hello-kubernetes/section01/what-is-container/","text":"1.1 Container \uc774\ud574 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ucee8\ud14c\uc774\ub108 \uae30\uc220\uc744 \uc774\ud574\ud558\ub294 \uac83\uc774 \ud544\uc694\ud558\ub2e4. Container \ub780? \ucee8\ud14c\uc774\ub108\ub294 OS\uc758 \ucee4\ub110 \uc704\uc5d0\uc11c cgroup, namespace, netfilter\ub4f1\uacfc \uac19\uc740 \ucee4\ub110 \uae30\ub2a5\ub4e4\uc744 \ud1b5\ud574 \ud504\ub85c\uc138\uc2a4\ub97c cpu, memory, networking, filesystem\uc758 \ud2b9\uc815 \uc601\uc5ed\uc5d0 \uaca9\ub9ac \uc2dc\ucf1c \ub2e4\ub978 \uacf5\uc720 \uc601\uc5ed\uc758 \uc811\uadfc\uc744 \uc81c\ud55c\ud558\uace0 \ub3c5\ub9bd\uc801\uc778 \uacf5\uac04\uc744 \uc81c\uacf5 \ud558\ub294 \uae30\uc220\uc774\ub2e4. \ub3c5\ub9bd\ub41c \uacf5\uac04\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\ub3d9\uc5d0 \ud544\uc694\ud55c \ubc14\uc774\ub108\ub9ac \ubc0f \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c Docker \ub098 Podman \uc744 \ud1b5\ud574\uc11c OCI(Open Container Initiative) \ud45c\uc900\uc5d0 \ub9de\uac8c \uc774\ubbf8\uc9c0\ud654 \ud560 \uc218 \uc788\uc73c\uba70 \ucee8\ud14c\uc774\ub108 \uc5d4\uc9c4 \uc704\uc5d0 \ubc30\ud3ec, \uad00\ub9ac \uac00\ub2a5\ud558\ub2e4. \uc694\uc57d\ud558\uc790\uba74 \ucee8\ud14c\uc774\ub108\ub294 \uaca9\ub9ac\ub418\uc5b4 \uc788\uc73c\uba70 \uc790\uccb4 \uc18c\ud504\ud2b8\uc6e8\uc5b4, \ubc14\uc774\ub108\ub9ac \ubc0f \uad6c\uc131\uc744 \uc2e4\ud589\ud558\ub294 \ud504\ub85c\uc138\uc2a4 \ub85c\uceec \ud658\uacbd, \uac00\uc0c1 \uba38\uc2e0, \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uad6d\ud55c\ub418\uc9c0 \uc54a\uace0 \uc790\uc720\ub86d\uac8c \uad6c\uc131 \uac00\ub2a5 OS\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\uc73c\uba70 \ucee8\ud14c\uc774\ub108 \uc5d4\uc9c4\ub9cc \uc788\ub2e4\uba74 \uc5b4\ub514\ub4e0 \ubc30\ud3ec, \uad00\ub9ac \uac00\ub2a5 \ucd94\ucc9c \uc790\ub8cc \ucee8\ud14c\uc774\ub108, Containerd, Containerd-shim, RUNC: \ub3c4\ucee4\ub294 \ubb34\uc5c7\uc73c\ub85c \uc5b4\ub5bb\uac8c \uad6c\uc131\ub418\uc5b4 \uc788\uc744\uae4c Introduction to Containers, VMs and Docker: A Beginner-Friendly Introduction to Containers, VMs and Docker Docker Overview Official Docker document: Get Started","title":"1.1 \ucee8\ud14c\uc774\ub108\ub780 \ubb34\uc5c7\uc778\uac00"},{"location":"hello-kubernetes/section01/what-is-container/#11-container","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ucee8\ud14c\uc774\ub108 \uae30\uc220\uc744 \uc774\ud574\ud558\ub294 \uac83\uc774 \ud544\uc694\ud558\ub2e4.","title":"1.1 Container \uc774\ud574"},{"location":"hello-kubernetes/section01/what-is-container/#container","text":"\ucee8\ud14c\uc774\ub108\ub294 OS\uc758 \ucee4\ub110 \uc704\uc5d0\uc11c cgroup, namespace, netfilter\ub4f1\uacfc \uac19\uc740 \ucee4\ub110 \uae30\ub2a5\ub4e4\uc744 \ud1b5\ud574 \ud504\ub85c\uc138\uc2a4\ub97c cpu, memory, networking, filesystem\uc758 \ud2b9\uc815 \uc601\uc5ed\uc5d0 \uaca9\ub9ac \uc2dc\ucf1c \ub2e4\ub978 \uacf5\uc720 \uc601\uc5ed\uc758 \uc811\uadfc\uc744 \uc81c\ud55c\ud558\uace0 \ub3c5\ub9bd\uc801\uc778 \uacf5\uac04\uc744 \uc81c\uacf5 \ud558\ub294 \uae30\uc220\uc774\ub2e4. \ub3c5\ub9bd\ub41c \uacf5\uac04\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\ub3d9\uc5d0 \ud544\uc694\ud55c \ubc14\uc774\ub108\ub9ac \ubc0f \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c Docker \ub098 Podman \uc744 \ud1b5\ud574\uc11c OCI(Open Container Initiative) \ud45c\uc900\uc5d0 \ub9de\uac8c \uc774\ubbf8\uc9c0\ud654 \ud560 \uc218 \uc788\uc73c\uba70 \ucee8\ud14c\uc774\ub108 \uc5d4\uc9c4 \uc704\uc5d0 \ubc30\ud3ec, \uad00\ub9ac \uac00\ub2a5\ud558\ub2e4. \uc694\uc57d\ud558\uc790\uba74 \ucee8\ud14c\uc774\ub108\ub294 \uaca9\ub9ac\ub418\uc5b4 \uc788\uc73c\uba70 \uc790\uccb4 \uc18c\ud504\ud2b8\uc6e8\uc5b4, \ubc14\uc774\ub108\ub9ac \ubc0f \uad6c\uc131\uc744 \uc2e4\ud589\ud558\ub294 \ud504\ub85c\uc138\uc2a4 \ub85c\uceec \ud658\uacbd, \uac00\uc0c1 \uba38\uc2e0, \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uad6d\ud55c\ub418\uc9c0 \uc54a\uace0 \uc790\uc720\ub86d\uac8c \uad6c\uc131 \uac00\ub2a5 OS\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\uc73c\uba70 \ucee8\ud14c\uc774\ub108 \uc5d4\uc9c4\ub9cc \uc788\ub2e4\uba74 \uc5b4\ub514\ub4e0 \ubc30\ud3ec, \uad00\ub9ac \uac00\ub2a5","title":"Container \ub780?"},{"location":"hello-kubernetes/section01/what-is-container/#_1","text":"\ucee8\ud14c\uc774\ub108, Containerd, Containerd-shim, RUNC: \ub3c4\ucee4\ub294 \ubb34\uc5c7\uc73c\ub85c \uc5b4\ub5bb\uac8c \uad6c\uc131\ub418\uc5b4 \uc788\uc744\uae4c Introduction to Containers, VMs and Docker: A Beginner-Friendly Introduction to Containers, VMs and Docker Docker Overview Official Docker document: Get Started","title":"\ucd94\ucc9c \uc790\ub8cc"},{"location":"hello-kubernetes/section01/what-is-helm/","text":"1.3 Helm\uc758 \uc774\ud574 \ud5ec\ub984\uc740 \ubcf5\uc7a1\ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \ubc30\ud3ec \ubc0f \uc6b4\uc601\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc8fc\ub294 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c\uc774\ub2e4. \uc65c Helm\uc774 \ud544\uc694\ud55c\uac00? \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec\ud558\uace0\uc790 \ud560 \ub54c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\uc131 \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\ub294 yaml \ud615\ud0dc\uc758 manifest \ud30c\uc77c\uc744 \uc791\uc131\ud558\uac8c \ub41c\ub2e4. \ub9cc\uc57d \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\uc131 \uc815\ubcf4 \ud639\uc740 \uc5f0\uad00 \uad00\uacc4\uac00 \ubcf5\uc7a1\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74 \ud558\ub098\uc758 manifest \ud30c\uc77c\ub85c \ucda9\ubd84\ud788 \uad00\ub9ac\uac00 \uac00\ub2a5\ud558\uc9c0\ub9cc \uadf8\ub807\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \ud639\uc740 \uc911\ubcf5\ub418\ub294 \uc124\uc815 \uac12\uc774 \ub9ce\uc544 \ubcc0\uc218 \ucc98\ub9ac\ub97c \ud574\uc57c\ud558\ub294 \uacbd\uc6b0\uc5d0\ub294 \ubcc4\ub3c4\uc758 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud558\uc5ec \uac04\uc18c\ud654 \ud558\ub294 \uac83\uc774 \ud6a8\uacfc\uc801\uc778 \ubc29\ubc95\uc774\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c Helm \uacfc Kustomize \uac00 \uc788\uc73c\uba70 Helm\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uad6c\uc131 \uc815\ubcf4\ub97c \ud15c\ud50c\ub9bf\ud654 \ud558\uace0 \ud328\ud0a4\uc9d5\ud654\ub97c \ud55c\ub2e4\ub294 \uce21\uba74\uc5d0\uc11c \ubcf4\ub2e4 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc774\ub77c\uace0 \ub9d0\ud560\uc218 \uc788\uc73c\uba70 Kustomize\ub294 \uad6c\uc131 \uc815\ubcf4 \ud30c\uc77c\uc744 \uacf5\ud1b5\ub41c \ubd80\ubd84\uacfc \ub2e4\ub978 \ubd80\ubd84\uc744 \ud3f4\ub354 \ub808\ubca8\ub85c \ud658\uacbd\uc5d0 \ub9de\ucdb0\uc11c \uc624\ubc84\ub808\uc774\ud558\uac8c \uad00\ub9ac\uac00 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4. Helm\uc774 3rd party \ub3c4\uad6c\uc774\uae34 \ud558\uc9c0\ub9cc yum, apt, brew\ucc98\ub7fc \ud328\ud0a4\uc9c0 \uc0dd\ud0dc\uacc4 \uac00 \uad6c\uc131\ub418\uc5b4 \uc788\uc73c\uba70 \ub300\ubd80\ubd84\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uac1c\ubc1c\uc0ac\ub4e4\uc774 Helm Chart\ub97c \uacf5\uc2dd\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 Kustomize \ubcf4\ub2e4\ub294 \uc811\uadfc\uc131\uacfc \ud3b8\ub9ac\ud568 \uce21\uba74\uc5d0\uc11c \ub6f0\uc5b4\ub098\ub2e4. \ub610\ud55c Kustomize\uc5d0\uc11c Helm\uc744 \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud15c\ud50c\ub9bf\ud654\ud558\uba74\uc11c \uc5ec\ub7ec \ud658\uacbd\uc5d0 \uac01\uae30 \ub2e4\ub978 \ubcc0\uc218\ub4e4\ub85c \uad6c\uc131\uc744 \ud558\ub294 \uac83\uc744 \ucf54\ub4dc\ud654 \ubc0f \uac04\uc18c\ud654\ud558\uace0 \uc2f6\ub2e4\uace0 \ud558\uba74 \ub450 \ub3c4\uad6c\ub97c \uc0c1\ud638\ubcf4\uc644\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \uac83\ub3c4 \uac00\ub2a5\ud558\ub2e4. Info \ud5ec\ub984 \ubc84\uc804 2.x \uae4c\uc9c0\ub294 tiller\ub77c\ub294 \ud558\ub098\uc758 \uc911\uc559\ud654\ub41c helm \uc791\uc5c5 \uad00\ub9ac\uc790\uac00 \uc874\uc7ac \ud558\uc600\uc73c\ub098 \uad8c\ud55c \uad00\ub9ac\uc5d0 \ub300\ud55c \uc5b4\ub824\uc6c0\uc640 \ubcf4\uc548 \ucde8\uc57d\uc810\uc73c\ub85c \uc778\ud574 \ud5ec\ub984 3.x\uc5d0\uc11c\ub294 tiller\uac00 \uc0ac\ub77c\uc9c0\uace0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 API \uc11c\ubc84\uc5d0\uc11c \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ubc29\uc2dd\uc73c\ub85c \uac1c\uc120\uc774 \ub418\uc5c8\ub2e4 \ucd9c\ucc98: Intro to Helm \uc694\uc57d\ud558\uc790\uba74 \ud5ec\ub984\uc740 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c \ud15c\ud50c\ub9bf\ud654\ub97c \ud1b5\ud574\uc11c \uad6c\uc131 \uc815\ubcf4\ub97c \uac04\uacb0\ud558\uac8c \uad00\ub9ac \ud328\ud0a4\uc9c0 repo\ub97c \ud1b5\ud574 \uc190\uc27d\uace0 \uac04\ub2e8\ud558\uac8c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc124\uce58 \ubc0f \uc5c5\uadf8\ub808\uc774\ub4dc Helm Chart \ud65c\uc6a9\ubc95 Helm\uc758 \ud328\ud0a4\uc9d5 \ud3ec\ub9f7\uc744 Chart\ub77c\uace0 \ubd88\ub9ac\uba70 Kubernetes \ub9ac\uc18c\uc2a4\uac00 \uc815\uc758\ub41c \ud30c\uc77c\uc758 \ubb36\uc74c \ud328\ud0a4\uc9c0\uc774\ub2e4. \ub2e8\uc77c \ucc28\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub2e8\uc21c\ud55c HTTP \uc11c\ubc84\ubd80\ud130 \ub370\uc774\ud130\ubca0\uc774\uc2a4, \uce90\uc2dc \ub4f1\uc774 \ud3ec\ud568\ub41c \uc804\uccb4 \uc6f9\uc571 \uc2a4\ud0dd\uacfc \uac19\uc740 \ubcf5\uc7a1\ud55c \uac83\uae4c\uc9c0 \uc190\uc27d\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\ub2e4. Chart\ub294 \ud06c\uac8c \uba54\ud0c0\ub370\uc774\ud130\ub97c \uac00\uc9c0\uace0 \uc788\ub294 Chart.yaml, \ubcc0\uc218\uac12 \ubb36\uc74c\uc758 values.yaml \uadf8\ub9ac\uace0 template \ub514\ub809\ud1a0\ub9ac\uc5d0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4\uc758 manifest \ud30c\uc77c\uc744 \ub2f4\uace0 \uc788\ub2e4. \uae30\uc874\uc5d0 \ub9cc\ub4e4\uc5b4\uc9c4 Chart\ub97c \ud1b5\ud574 \ubc30\ud3ec\ub97c \ud558\ub294 \uacbd\uc6b0\ub294 \ud0c0\uac9f \ud658\uacbd\uc5d0 \ub9de\uac8c values.yaml\uc758 \uac12\ub4e4\ub9cc \uc218\uc815\uc744 \ud558\uba74 \ub41c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 mysql\uc758 \uc124\uce58 \ubc0f \uad6c\uc131\uc744 helm\uc73c\ub85c \uc9c4\ud589\ud55c\ub2e4\uace0 \uac00\uc815\ud558\uba74 \uba3c\uc800 artifact hub \ud639\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uacf5\uc2dd github repo\uc5d0\uc11c helm chart\ub97c \uac80\uc0c9\ud558\uace0 \ud574\ub2f9 repo\ub97c \ucd94\uac00\ud55c \ud6c4 values.yaml \ud30c\uc77c\uc744 \uac80\ud1a0 \ubc0f \ud544\uc694\uc5d0 \ub530\ub77c \uc218\uc815\uc744 \ud55c \ud6c4 \uc124\uce58\ub97c \uc9c4\ud589\ud558\uba74 \ub41c\ub2e4. Info \uac1c\ubc1c\uc0ac\uc5d0\uc11c \uacf5\uc2dd\uc801\uc73c\ub85c Helm Chart\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uace0 bitnami\uc640 \uac19\uc740 \ubcc4\ub3c4\uc758 3rd party \ubc34\ub354\uac00 Chart\ub97c \uba54\uc778\ud130\ub10c\uc2a4 \ud558\ub294 \uacbd\uc6b0\ub3c4 \ub9ce\ub2e4. \uc774\ub54c GitHub Star \uac1c\uc218\ub098 \uc5bc\ub9c8\ub098 \uc801\uadf9\uc801\uc73c\ub85c \ucee8\ud2b8\ub9ac\ubdf0\uc158\uc774 \uc774\ub8e8\uc5b4\uc9c0\uace0 \uc788\ub294\uc9c0\ub97c \ubcf4\uace0 \ud310\ub2e8\ud558\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \ucd94\ucc9c \uc790\ub8cc Helm Overview Official Helm Docs Helm\uc73c\ub85c Wordpress \uad6c\uc131 Digitalocean: How to set up wordpress with mysql on kubernetes using helm Kustomize\ub85c Workpress \uad6c\uc131 Mirantis: Creating a kubernetes app out of multiple pieces Kustomize + Helm \ud65c\uc6a9 JFrog: Power up helm charts using kustomize to manage kubernetes deployments Terraform Helm Provider Helm Provider","title":"1.3 \ud5ec\ub984\uc774\ub780 \ubb34\uc5c7\uc778\uac00"},{"location":"hello-kubernetes/section01/what-is-helm/#13-helm","text":"\ud5ec\ub984\uc740 \ubcf5\uc7a1\ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \ubc30\ud3ec \ubc0f \uc6b4\uc601\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc8fc\ub294 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c\uc774\ub2e4.","title":"1.3 Helm\uc758 \uc774\ud574"},{"location":"hello-kubernetes/section01/what-is-helm/#helm","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec\ud558\uace0\uc790 \ud560 \ub54c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\uc131 \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\ub294 yaml \ud615\ud0dc\uc758 manifest \ud30c\uc77c\uc744 \uc791\uc131\ud558\uac8c \ub41c\ub2e4. \ub9cc\uc57d \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\uc131 \uc815\ubcf4 \ud639\uc740 \uc5f0\uad00 \uad00\uacc4\uac00 \ubcf5\uc7a1\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74 \ud558\ub098\uc758 manifest \ud30c\uc77c\ub85c \ucda9\ubd84\ud788 \uad00\ub9ac\uac00 \uac00\ub2a5\ud558\uc9c0\ub9cc \uadf8\ub807\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \ud639\uc740 \uc911\ubcf5\ub418\ub294 \uc124\uc815 \uac12\uc774 \ub9ce\uc544 \ubcc0\uc218 \ucc98\ub9ac\ub97c \ud574\uc57c\ud558\ub294 \uacbd\uc6b0\uc5d0\ub294 \ubcc4\ub3c4\uc758 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud558\uc5ec \uac04\uc18c\ud654 \ud558\ub294 \uac83\uc774 \ud6a8\uacfc\uc801\uc778 \ubc29\ubc95\uc774\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c Helm \uacfc Kustomize \uac00 \uc788\uc73c\uba70 Helm\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uad6c\uc131 \uc815\ubcf4\ub97c \ud15c\ud50c\ub9bf\ud654 \ud558\uace0 \ud328\ud0a4\uc9d5\ud654\ub97c \ud55c\ub2e4\ub294 \uce21\uba74\uc5d0\uc11c \ubcf4\ub2e4 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc774\ub77c\uace0 \ub9d0\ud560\uc218 \uc788\uc73c\uba70 Kustomize\ub294 \uad6c\uc131 \uc815\ubcf4 \ud30c\uc77c\uc744 \uacf5\ud1b5\ub41c \ubd80\ubd84\uacfc \ub2e4\ub978 \ubd80\ubd84\uc744 \ud3f4\ub354 \ub808\ubca8\ub85c \ud658\uacbd\uc5d0 \ub9de\ucdb0\uc11c \uc624\ubc84\ub808\uc774\ud558\uac8c \uad00\ub9ac\uac00 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4. Helm\uc774 3rd party \ub3c4\uad6c\uc774\uae34 \ud558\uc9c0\ub9cc yum, apt, brew\ucc98\ub7fc \ud328\ud0a4\uc9c0 \uc0dd\ud0dc\uacc4 \uac00 \uad6c\uc131\ub418\uc5b4 \uc788\uc73c\uba70 \ub300\ubd80\ubd84\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uac1c\ubc1c\uc0ac\ub4e4\uc774 Helm Chart\ub97c \uacf5\uc2dd\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 Kustomize \ubcf4\ub2e4\ub294 \uc811\uadfc\uc131\uacfc \ud3b8\ub9ac\ud568 \uce21\uba74\uc5d0\uc11c \ub6f0\uc5b4\ub098\ub2e4. \ub610\ud55c Kustomize\uc5d0\uc11c Helm\uc744 \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud15c\ud50c\ub9bf\ud654\ud558\uba74\uc11c \uc5ec\ub7ec \ud658\uacbd\uc5d0 \uac01\uae30 \ub2e4\ub978 \ubcc0\uc218\ub4e4\ub85c \uad6c\uc131\uc744 \ud558\ub294 \uac83\uc744 \ucf54\ub4dc\ud654 \ubc0f \uac04\uc18c\ud654\ud558\uace0 \uc2f6\ub2e4\uace0 \ud558\uba74 \ub450 \ub3c4\uad6c\ub97c \uc0c1\ud638\ubcf4\uc644\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \uac83\ub3c4 \uac00\ub2a5\ud558\ub2e4. Info \ud5ec\ub984 \ubc84\uc804 2.x \uae4c\uc9c0\ub294 tiller\ub77c\ub294 \ud558\ub098\uc758 \uc911\uc559\ud654\ub41c helm \uc791\uc5c5 \uad00\ub9ac\uc790\uac00 \uc874\uc7ac \ud558\uc600\uc73c\ub098 \uad8c\ud55c \uad00\ub9ac\uc5d0 \ub300\ud55c \uc5b4\ub824\uc6c0\uc640 \ubcf4\uc548 \ucde8\uc57d\uc810\uc73c\ub85c \uc778\ud574 \ud5ec\ub984 3.x\uc5d0\uc11c\ub294 tiller\uac00 \uc0ac\ub77c\uc9c0\uace0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 API \uc11c\ubc84\uc5d0\uc11c \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ubc29\uc2dd\uc73c\ub85c \uac1c\uc120\uc774 \ub418\uc5c8\ub2e4 \ucd9c\ucc98: Intro to Helm \uc694\uc57d\ud558\uc790\uba74 \ud5ec\ub984\uc740 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c \ud15c\ud50c\ub9bf\ud654\ub97c \ud1b5\ud574\uc11c \uad6c\uc131 \uc815\ubcf4\ub97c \uac04\uacb0\ud558\uac8c \uad00\ub9ac \ud328\ud0a4\uc9c0 repo\ub97c \ud1b5\ud574 \uc190\uc27d\uace0 \uac04\ub2e8\ud558\uac8c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc124\uce58 \ubc0f \uc5c5\uadf8\ub808\uc774\ub4dc","title":"\uc65c Helm\uc774 \ud544\uc694\ud55c\uac00?"},{"location":"hello-kubernetes/section01/what-is-helm/#helm-chart","text":"Helm\uc758 \ud328\ud0a4\uc9d5 \ud3ec\ub9f7\uc744 Chart\ub77c\uace0 \ubd88\ub9ac\uba70 Kubernetes \ub9ac\uc18c\uc2a4\uac00 \uc815\uc758\ub41c \ud30c\uc77c\uc758 \ubb36\uc74c \ud328\ud0a4\uc9c0\uc774\ub2e4. \ub2e8\uc77c \ucc28\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub2e8\uc21c\ud55c HTTP \uc11c\ubc84\ubd80\ud130 \ub370\uc774\ud130\ubca0\uc774\uc2a4, \uce90\uc2dc \ub4f1\uc774 \ud3ec\ud568\ub41c \uc804\uccb4 \uc6f9\uc571 \uc2a4\ud0dd\uacfc \uac19\uc740 \ubcf5\uc7a1\ud55c \uac83\uae4c\uc9c0 \uc190\uc27d\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\ub2e4. Chart\ub294 \ud06c\uac8c \uba54\ud0c0\ub370\uc774\ud130\ub97c \uac00\uc9c0\uace0 \uc788\ub294 Chart.yaml, \ubcc0\uc218\uac12 \ubb36\uc74c\uc758 values.yaml \uadf8\ub9ac\uace0 template \ub514\ub809\ud1a0\ub9ac\uc5d0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4\uc758 manifest \ud30c\uc77c\uc744 \ub2f4\uace0 \uc788\ub2e4. \uae30\uc874\uc5d0 \ub9cc\ub4e4\uc5b4\uc9c4 Chart\ub97c \ud1b5\ud574 \ubc30\ud3ec\ub97c \ud558\ub294 \uacbd\uc6b0\ub294 \ud0c0\uac9f \ud658\uacbd\uc5d0 \ub9de\uac8c values.yaml\uc758 \uac12\ub4e4\ub9cc \uc218\uc815\uc744 \ud558\uba74 \ub41c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 mysql\uc758 \uc124\uce58 \ubc0f \uad6c\uc131\uc744 helm\uc73c\ub85c \uc9c4\ud589\ud55c\ub2e4\uace0 \uac00\uc815\ud558\uba74 \uba3c\uc800 artifact hub \ud639\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uacf5\uc2dd github repo\uc5d0\uc11c helm chart\ub97c \uac80\uc0c9\ud558\uace0 \ud574\ub2f9 repo\ub97c \ucd94\uac00\ud55c \ud6c4 values.yaml \ud30c\uc77c\uc744 \uac80\ud1a0 \ubc0f \ud544\uc694\uc5d0 \ub530\ub77c \uc218\uc815\uc744 \ud55c \ud6c4 \uc124\uce58\ub97c \uc9c4\ud589\ud558\uba74 \ub41c\ub2e4. Info \uac1c\ubc1c\uc0ac\uc5d0\uc11c \uacf5\uc2dd\uc801\uc73c\ub85c Helm Chart\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uace0 bitnami\uc640 \uac19\uc740 \ubcc4\ub3c4\uc758 3rd party \ubc34\ub354\uac00 Chart\ub97c \uba54\uc778\ud130\ub10c\uc2a4 \ud558\ub294 \uacbd\uc6b0\ub3c4 \ub9ce\ub2e4. \uc774\ub54c GitHub Star \uac1c\uc218\ub098 \uc5bc\ub9c8\ub098 \uc801\uadf9\uc801\uc73c\ub85c \ucee8\ud2b8\ub9ac\ubdf0\uc158\uc774 \uc774\ub8e8\uc5b4\uc9c0\uace0 \uc788\ub294\uc9c0\ub97c \ubcf4\uace0 \ud310\ub2e8\ud558\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4.","title":"Helm Chart \ud65c\uc6a9\ubc95"},{"location":"hello-kubernetes/section01/what-is-helm/#_1","text":"Helm Overview Official Helm Docs Helm\uc73c\ub85c Wordpress \uad6c\uc131 Digitalocean: How to set up wordpress with mysql on kubernetes using helm Kustomize\ub85c Workpress \uad6c\uc131 Mirantis: Creating a kubernetes app out of multiple pieces Kustomize + Helm \ud65c\uc6a9 JFrog: Power up helm charts using kustomize to manage kubernetes deployments Terraform Helm Provider Helm Provider","title":"\ucd94\ucc9c \uc790\ub8cc"},{"location":"hello-kubernetes/section01/what-is-kubernetes/","text":"1.2 Kubernetes \uc774\ud574 Kubernetes \ub780? \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub780 \ucee8\ud14c\uc774\ub108\ud654\ub41c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc790\ub3d9\uc73c\ub85c \ubc30\ud3ec, \ud655\uc7a5, \uad00\ub9ac\ud574\uc8fc\ub294 \uc624\ud508\uc18c\uc2a4 \uc2dc\uc2a4\ud15c\uc774\ub2e4. Info an open-source system for automating deployment, scaling, and management of containerized applications. kuberentes.io Kubernetes \ub4f1\uc7a5 \ubc30\uacbd \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 \uc804 \uc138\uacc4\uc801\uc73c\ub85c \uac00\uc7a5 \ub300\ud45c\uc801\uc778 \ucee8\ud14c\uc774\ub108 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158 \ub3c4\uad6c\uc774\uba70 \uc624\ub7ab\ub3d9\uc548 \uad6c\uae00 \ub0b4\ubd80\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub358 \ucee8\ud14c\uc774\ub108 \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac \uc2dc\uc2a4\ud15c( Borg )\uc73c\ub85c\ubd80\ud130 \ucd9c\ubc1c\ud558\uc5ec 2013\ub144\ub3c4\ubd80\ud130 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub77c\ub294 \uc774\ub984\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 \ud504\ub85c\uc81d\ud2b8\ub85c \uc9c4\ud589\uc774 \ub418\uace0 \uc788\ub2e4. \uc5ec\ub7ec\uac00\uc9c0 \ub4f1\uc7a5 \ubc30\uacbd\uc774 \uc788\uc9c0\ub9cc \uac00\uc7a5 \ud070 \uc774\uc720\ub294 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc9c4\ud654\uc640 \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\ucc98\uc758 \uc9c4\ud654\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4. \ud074\ub77c\uc6b0\ub4dc \ucef4\ud4e8\ud305\uacfc \ub3c4\ucee4\ub97c \ud544\ub450\ub85c \ucee8\ud14c\uc774\ub108 \uae30\uc220 \uc758 \ube44\uc57d\uc801\uc778 \ubc1c\uc804\uc5d0 \ub530\ub77c \ub9c8\uc774\ud06c\ub85c \uc11c\ube44\uc2a4\ub41c \ud615\ud0dc\ub85c \uac1c\ubc1c\ub41c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\ub4e4\uc744 \uc27d\uac8c \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uaca9\ub9ac\ud558\uace0 \ud655\uc7a5\uc131\uc744 \ub192\uc77c \uc218 \uc788\uac8c \ub418\uc5c8\uc73c\uba70 \ub610\ud55c \ube44\uc988\ub2c8\uc2a4 \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\ucdb0\uc11c \ube60\ub974\uac8c \uae30\ub2a5\ub4e4\uc744 \uac1c\ubc1c\ud558\uace0 \ubc30\ud3ec\ub97c \uc2e0\uc18d\ud558\uace0 \uc720\uc5f0\ud558\uac8c \ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4. \uacfc\uac70 \ud604\uc7ac Monolithic Microservices \ub4e4\ub85c \uc791\uac8c \ub098\ub204\uace0 Decoupled(\ub0ae\uc740 \uc751\uc9d1\ub3c4) \ud558\ub098\uc758 Release Cycle \uc11c\ube44\uc2a4 \ucef4\ud3ec\ub10c\ud2b8 \ubcc4\ub85c Release Cycle \uace0\uc815\uc801\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc11c\ubc84 \uc9d1\ud569 \ud074\ub7ec\uc2a4\ud130 \ub2e8\uc704\ub85c \ud655\uc7a5\uc131 \uc788\uac8c \uc6b4\uc601 \ud558\uc9c0\ub9cc \ubd84\uc0b0\ub41c \uad6c\uc870\uc758 \ub300\uaddc\ubaa8 \ud655\uc7a5\uc131\uc788\ub294 \ud658\uacbd\uc744 \uc6b4\uc601\ud558\ub294 \uac83\uc740 \ub9e4\uc6b0 \uc5b4\ub824\uc6b4 \uc77c\uc774\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \uc5b4\ub824\uc6c0\uc5d0 \uc9c1\uba74\ud558\uac8c \ub41c\ub2e4. Microservices \ub4e4\uc774 \ub9ce\uc544\uc9d0\uc5d0 \ub530\ub77c \uc6b4\uc601\uc758 \uc5b4\ub824\uc6c0 \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \ub514\ubc84\uae45\uc774 \uc5b4\ub824\uc6c0 east-west \ud1b5\uc2e0\uc758 tracking\uc774 \uc5b4\ub824\uc6c0 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ucee8\ud14c\uc774\ub108\ud654\uc5d0 \ub530\ub77c \uc6b4\uc601\uc758 \ubcf5\uc7a1\uc131\uc774 \ub192\uc544\uc9d0 \ube4c\ub4dc, \ubc30\ud3ec \uc790\ub3d9\ud654\uac00 \ud544\uc694 \ucee8\ud14c\uc774\ub108\ub97c \uad00\ub9ac\ud558\ub294 \uc2e0\ub8b0\uc131 \uc788\ub294 \uba38\uc2e0 \ud074\ub7ec\uc2a4\ud130\uac00 \ud544\uc694 \uc720\uc5f0\ud558\uace0 \ud655\uc7a5 \uac00\ub2a5\ud55c \ub124\ud2b8\uc6cc\ud06c, \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ud544\uc694 \uc774\ub7ec\ud55c \uc5b4\ub824\uc6c0\uc744 \uadf9\ubcf5\ud560 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc8fc\ub294 \ub3c4\uad6c\uac00 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc774\uba70 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\ucc98\uc758 \uc9c4\ud654\uc758 \ub2e8\uacc4\uc5d0 \uc911\uc2ec\uc5d0\uc11c \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \uc81c\uacf5\ud558\uace0 \uc11c\ube44\uc2a4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc6b4\uc601 \uad00\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \ub9cc\ub4e4\uc5b4 \uc900\ub2e4. Kubernetes \ucee8\uc149 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \ud639\uc740 \ud558\ub098\uc758 \ud070 \uc11c\ubc84 \ubcf4\ub2e4\ub294 \uc791\uc9c0\ub9cc \ub9ce\uc740 \uc11c\ubc84\ub97c \ubd84\uc0b0 \ubc30\ud3ec\ud558\uc5ec \uc6b4\uc601\ud558\ub294 \uc811\uadfc \ubc29\uc2dd\uc774\ub2e4. \uc11c\ubc84\uc640 \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \ub9ce\uc740 \uc5d0\uc774\uc804\ud2b8\ub4e4\ub85c \uc694\uccad\uc5d0 \ub530\ub978 \uc751\ub2f5\uc744 \ud560 \uac83\uc744 \uc608\uc0c1\ud558\ub3c4\ub85d \uc791\uc131 \ub418\uc5b4 \uc788\ub2e4. \ud55c\uac00\uc9c0 \uc911\uc694\ud55c \ubd80\ubd84\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc11c\ubc84 \ud504\ub85c\uc138\uc2a4\uac00 \uc8fd\uac70\ub098, \uad50\uccb4\ub418\uac70\ub098, \uc77c\uc2dc\uc801\uc778 \uc11c\ubc84\uc758 \ubc30\ud3ec\ub85c \uc774\uc5b4\uc9c0\ub294 \uac83\uc744 \uc608\uc0c1 \ud558\uace0 \uc788\uc5b4\uc57c \ud55c\ub2e4. \ub610\ud55c, \ucee4\ubba4\ub2c8\ucf00\uc774\uc158\uc740 API \ud638\ucd9c \uae30\ubc18\uc73c\ub85c \uc720\uc5f0\ud558\uac8c \uc774\ub8e8\uc5b4\uc9c4\ub2e4. \uad6c\uc131 \uc815\ubcf4\ub294 JSON \ud615\ud0dc\ub85c ETCD\uc5d0 \uc800\uc7a5\ub418\uc5b4 \uc788\uc73c\uba70 \ucee4\ubba4\ub2c8\ud2f0\uc5d0 \uc758\ud574 \ub300\ubd80\ubd84 YAML\ub85c \uc791\uc131\ub41c\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc5d0\uc774\uc804\ud2b8\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\ub418\uae30 \uc804\uc5d0 YAML\uc744 JSON\uc73c\ub85c \ubcc0\ud658 \uc2dc\ucf1c \uc800\uc7a5\ud55c\ub2e4. Control Plane kube-apiserver : API \uc11c\ubc84\ub294 REST\ub97c \ud1b5\ud574 \ub2e4\ub978 \ubaa8\ub4e0 \uad6c\uc131 \uc694\uc18c\uac00 \uc0c1\ud638 \uc791\uc6a9\ud560\uc218 \uc788\ub3c4\ub85d \uc81c\uacf5\ud558\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc \uc601\uc5ed\uc774\uba70 Pod, Service, replicationcontrollers \ub4f1\uc758 API \uac1c\uccb4\uc5d0 \ub300\ud55c \ub370\uc774\ud130\uc758 \uc720\ud6a8\uc131\uc744 \uac80\uc0ac\ud558\uace0 \uc801\uc6a9\ud55c\ub2e4. kube-scheduler: \ud560\ub2f9\ub41c \ub178\ub4dc\uac00 \uc5c6\ub294 \uc0c8\ub85c \uc0dd\uc131\ub41c \ud30c\ub4dc\ub97c \ud655\uc778\ud558\uc5ec \uc2e4\ud589\ud560 \ub178\ub4dc\ub97c \uc120\ud0dd\ud558\ub294 \uad00\ub9ac \uc601\uc5ed\uc774\ub2e4. kube-controller-manager: \ucee8\ud2b8\ub864\ub7ec \ud504\ub85c\uc138\uc2a4\ub97c \uc2e4\ud589\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc774\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \ucee8\ud2b8\ub864\ub7ec\ub97c \uad00\ub9ac \ud55c\ub2e4. node controller: \ub178\ub4dc\uac00 \ub2e4\uc6b4\ub418\uc5c8\uc744 \ub54c \ub300\uc751\uacfc notice\uc5d0 \uad00\ud55c \ucc45\uc784\uc744 \uac00\uc9c4\ub2e4. Job controller: Job\uc758 \uac1c\uccb4\ub97c \uac10\uc2dc\ud55c \ub2e4\uc74c\ud574\ub2f9 \uc791\uc5c5\uc774 \uc644\ub8cc \ub420\ub54c \uae4c\uc9c0 \uc2e4\ud589\ub418\ub294 \ud30c\ub4dc\ub97c \uc0dd\uc131 \uad00\ub9ac \ud55c\ub2e4. Endpoints controller: \uc11c\ube44\uc2a4\uc640 \ud30c\ub4dc\ub97c \uc5f0\uacb0\uc2dc\ud0a4\ub294 \uc5ed\ud560\uc744 \ub2f4\ub2f9 \ud55c\ub2e4. Service Account & Token controllers: \uc0c8\ub85c\uc6b4 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ub300\ud55c \uae30\ubcf8 \uacc4\uc815\uacfc API \uc811\uadfc \ud1a0\ud070\uc744 \uc0dd\uc131\ud55c\ub2e4. cloud-controller-manager: \ud074\ub77c\uc6b0\ub4dc\ubcc4 \ucee8\ud2b8\ub864 \ub85c\uc9c1\uc744 \ud3ec\ud568\ud558\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee8\ud2b8\ub864 \ud50c\ub808\uc778 \ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \ud074\ub77c\uc6b0\ub4dc \ucee8\ud2b8\ub864\ub7ec \ub9e4\ub2c8\uc800\ub97c \ud1b5\ud574 \ud074\ub7ec\uc2a4\ud130\ub97c \ud074\ub77c\uc6b0\ub4dc \uacf5\uae09\uc790\uc758 API\uc5d0 \uc5f0\uacb0\ub41c\ub2e4. Worker kubelet: \ud074\ub7ec\uc2a4\ud130\uc758 \uac01 \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \uc5d0\uc774\uc804\ud2b8. Kubelet\uc740 \ud30c\ub4dc\uc5d0\uc11c \ucee8\ud14c\uc774\ub108 \uad00\ub9ac \uc6b4\uc601\ud558\ub294 \uc8fc\uccb4 \uc774\ub2e4. kube-proxy : \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc815\uc758\ub41c \uc11c\ube44\uc2a4\uc758 \ub124\ud2b8\uc6cc\ud06c \uc815\ucc45\uc744 \ubc18\uc601\ud558\uace0 \uc11c\ube44\uc2a4\uc758 Pod\uc5d0 \ub300\ud55c \uc694\uccad\uc744 \ud3ec\uc6cc\ub529 \ud558\ub294 \uaddc\uce59\uc744 \uad00\ub9ac \ud55c\ub2e4. Kubernetes \uc7a5\uc810 \ubc0f \uace0\ub824\uc0ac\ud56d \uc7a5\uc810 \ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\ub97c Code\ub85c \uc120\uc5b8 \ubc0f \uad00\ub9ac\ud560 \uc218 \uc788\uc73c\uba70 GitOps, CICD\ub4f1\uc744 \ud65c\uc6a9\ud558\uc5ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec\ub97c \uc790\ub3d9\ud654\ud560 \uc218 \uc788\uc73c\uba70 On-prem \ubc0f Cloud \ud658\uacbd agnostic \ud558\uac8c \ucee8\ud14c\uc774\ub108\ub97c \uad00\ub9ac \uc6b4\uc601 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4. \uace0\ub824\uc0ac\ud56d \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \ucee8\uc149\uc5d0 \ub9de\ucdb0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ubcc0\ud654(Scale out \uad6c\uc870, Microservice \ud615\ud0dc)\uac00 \ud544\uc694\ud558\uba70, \ub2e4\uc591\ud55c \ubc29\ubc95\uc73c\ub85c \uac1c\ubc1c\uc870\uc9c1\uc744 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub85c on-boarding \ud558\uc5ec \uc0ac\uc804 \uac80\uc99d \ud544\uc694\ud558\ub2e4. \ub610\ud55c \uc778\ud504\ub77c \uad00\uc810\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uace0\ub824\ud574\uc11c \uc124\uacc4\ud558\uace0 \uad6c\ucd95\uc744 \uc9c4\ud589\ud574\uc57c \ud558\uba70 \uad6c\ucd95 \uc644\ub8cc \ud6c4\uc5d0\ub3c4 \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \ub2e4\uc591\ud55c CNCF \uc0dd\ud0dc\uacc4\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ubcf8\uc778\uc758 \ud658\uacbd\uc5d0 \ub9de\uac8c \uc870\ud569\ud574\uc57c \ud55c\ub2e4. \ud2b9\ud788 \uadf8 \uc0dd\ud0dc\uacc4\uac00 \ub9e4\uc6b0 \ubc29\ub300\ud558\ubbc0\ub85c Learning Curve \uaf64 \ub192\uace0 \ucda9\ubd84\ud55c \uc2dc\uac04\uacfc \ud14c\uc2a4\ud2b8\ub97c \uac70\uce5c \ud6c4\uc5d0 \ud504\ub7ec\ub355\uc158 \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec\ud574\uc57c \ud55c\ub2e4. \ucd94\ucc9c \uc790\ub8cc Kubernetes Tutorials Overview Official Kubernetes Tutorials","title":"1.2 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \uc774\ud574"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#12-kubernetes","text":"","title":"1.2 Kubernetes \uc774\ud574"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub780 \ucee8\ud14c\uc774\ub108\ud654\ub41c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc790\ub3d9\uc73c\ub85c \ubc30\ud3ec, \ud655\uc7a5, \uad00\ub9ac\ud574\uc8fc\ub294 \uc624\ud508\uc18c\uc2a4 \uc2dc\uc2a4\ud15c\uc774\ub2e4. Info an open-source system for automating deployment, scaling, and management of containerized applications. kuberentes.io","title":"Kubernetes \ub780?"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes_1","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 \uc804 \uc138\uacc4\uc801\uc73c\ub85c \uac00\uc7a5 \ub300\ud45c\uc801\uc778 \ucee8\ud14c\uc774\ub108 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158 \ub3c4\uad6c\uc774\uba70 \uc624\ub7ab\ub3d9\uc548 \uad6c\uae00 \ub0b4\ubd80\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub358 \ucee8\ud14c\uc774\ub108 \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac \uc2dc\uc2a4\ud15c( Borg )\uc73c\ub85c\ubd80\ud130 \ucd9c\ubc1c\ud558\uc5ec 2013\ub144\ub3c4\ubd80\ud130 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub77c\ub294 \uc774\ub984\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 \ud504\ub85c\uc81d\ud2b8\ub85c \uc9c4\ud589\uc774 \ub418\uace0 \uc788\ub2e4. \uc5ec\ub7ec\uac00\uc9c0 \ub4f1\uc7a5 \ubc30\uacbd\uc774 \uc788\uc9c0\ub9cc \uac00\uc7a5 \ud070 \uc774\uc720\ub294 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc9c4\ud654\uc640 \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\ucc98\uc758 \uc9c4\ud654\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4. \ud074\ub77c\uc6b0\ub4dc \ucef4\ud4e8\ud305\uacfc \ub3c4\ucee4\ub97c \ud544\ub450\ub85c \ucee8\ud14c\uc774\ub108 \uae30\uc220 \uc758 \ube44\uc57d\uc801\uc778 \ubc1c\uc804\uc5d0 \ub530\ub77c \ub9c8\uc774\ud06c\ub85c \uc11c\ube44\uc2a4\ub41c \ud615\ud0dc\ub85c \uac1c\ubc1c\ub41c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\ub4e4\uc744 \uc27d\uac8c \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uaca9\ub9ac\ud558\uace0 \ud655\uc7a5\uc131\uc744 \ub192\uc77c \uc218 \uc788\uac8c \ub418\uc5c8\uc73c\uba70 \ub610\ud55c \ube44\uc988\ub2c8\uc2a4 \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\ucdb0\uc11c \ube60\ub974\uac8c \uae30\ub2a5\ub4e4\uc744 \uac1c\ubc1c\ud558\uace0 \ubc30\ud3ec\ub97c \uc2e0\uc18d\ud558\uace0 \uc720\uc5f0\ud558\uac8c \ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4. \uacfc\uac70 \ud604\uc7ac Monolithic Microservices \ub4e4\ub85c \uc791\uac8c \ub098\ub204\uace0 Decoupled(\ub0ae\uc740 \uc751\uc9d1\ub3c4) \ud558\ub098\uc758 Release Cycle \uc11c\ube44\uc2a4 \ucef4\ud3ec\ub10c\ud2b8 \ubcc4\ub85c Release Cycle \uace0\uc815\uc801\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc11c\ubc84 \uc9d1\ud569 \ud074\ub7ec\uc2a4\ud130 \ub2e8\uc704\ub85c \ud655\uc7a5\uc131 \uc788\uac8c \uc6b4\uc601 \ud558\uc9c0\ub9cc \ubd84\uc0b0\ub41c \uad6c\uc870\uc758 \ub300\uaddc\ubaa8 \ud655\uc7a5\uc131\uc788\ub294 \ud658\uacbd\uc744 \uc6b4\uc601\ud558\ub294 \uac83\uc740 \ub9e4\uc6b0 \uc5b4\ub824\uc6b4 \uc77c\uc774\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \uc5b4\ub824\uc6c0\uc5d0 \uc9c1\uba74\ud558\uac8c \ub41c\ub2e4. Microservices \ub4e4\uc774 \ub9ce\uc544\uc9d0\uc5d0 \ub530\ub77c \uc6b4\uc601\uc758 \uc5b4\ub824\uc6c0 \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \ub514\ubc84\uae45\uc774 \uc5b4\ub824\uc6c0 east-west \ud1b5\uc2e0\uc758 tracking\uc774 \uc5b4\ub824\uc6c0 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ucee8\ud14c\uc774\ub108\ud654\uc5d0 \ub530\ub77c \uc6b4\uc601\uc758 \ubcf5\uc7a1\uc131\uc774 \ub192\uc544\uc9d0 \ube4c\ub4dc, \ubc30\ud3ec \uc790\ub3d9\ud654\uac00 \ud544\uc694 \ucee8\ud14c\uc774\ub108\ub97c \uad00\ub9ac\ud558\ub294 \uc2e0\ub8b0\uc131 \uc788\ub294 \uba38\uc2e0 \ud074\ub7ec\uc2a4\ud130\uac00 \ud544\uc694 \uc720\uc5f0\ud558\uace0 \ud655\uc7a5 \uac00\ub2a5\ud55c \ub124\ud2b8\uc6cc\ud06c, \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ud544\uc694 \uc774\ub7ec\ud55c \uc5b4\ub824\uc6c0\uc744 \uadf9\ubcf5\ud560 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc8fc\ub294 \ub3c4\uad6c\uac00 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc774\uba70 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\ucc98\uc758 \uc9c4\ud654\uc758 \ub2e8\uacc4\uc5d0 \uc911\uc2ec\uc5d0\uc11c \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \uc81c\uacf5\ud558\uace0 \uc11c\ube44\uc2a4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc6b4\uc601 \uad00\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \ub9cc\ub4e4\uc5b4 \uc900\ub2e4.","title":"Kubernetes \ub4f1\uc7a5 \ubc30\uacbd"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes_2","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \ud639\uc740 \ud558\ub098\uc758 \ud070 \uc11c\ubc84 \ubcf4\ub2e4\ub294 \uc791\uc9c0\ub9cc \ub9ce\uc740 \uc11c\ubc84\ub97c \ubd84\uc0b0 \ubc30\ud3ec\ud558\uc5ec \uc6b4\uc601\ud558\ub294 \uc811\uadfc \ubc29\uc2dd\uc774\ub2e4. \uc11c\ubc84\uc640 \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \ub9ce\uc740 \uc5d0\uc774\uc804\ud2b8\ub4e4\ub85c \uc694\uccad\uc5d0 \ub530\ub978 \uc751\ub2f5\uc744 \ud560 \uac83\uc744 \uc608\uc0c1\ud558\ub3c4\ub85d \uc791\uc131 \ub418\uc5b4 \uc788\ub2e4. \ud55c\uac00\uc9c0 \uc911\uc694\ud55c \ubd80\ubd84\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc11c\ubc84 \ud504\ub85c\uc138\uc2a4\uac00 \uc8fd\uac70\ub098, \uad50\uccb4\ub418\uac70\ub098, \uc77c\uc2dc\uc801\uc778 \uc11c\ubc84\uc758 \ubc30\ud3ec\ub85c \uc774\uc5b4\uc9c0\ub294 \uac83\uc744 \uc608\uc0c1 \ud558\uace0 \uc788\uc5b4\uc57c \ud55c\ub2e4. \ub610\ud55c, \ucee4\ubba4\ub2c8\ucf00\uc774\uc158\uc740 API \ud638\ucd9c \uae30\ubc18\uc73c\ub85c \uc720\uc5f0\ud558\uac8c \uc774\ub8e8\uc5b4\uc9c4\ub2e4. \uad6c\uc131 \uc815\ubcf4\ub294 JSON \ud615\ud0dc\ub85c ETCD\uc5d0 \uc800\uc7a5\ub418\uc5b4 \uc788\uc73c\uba70 \ucee4\ubba4\ub2c8\ud2f0\uc5d0 \uc758\ud574 \ub300\ubd80\ubd84 YAML\ub85c \uc791\uc131\ub41c\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc5d0\uc774\uc804\ud2b8\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\ub418\uae30 \uc804\uc5d0 YAML\uc744 JSON\uc73c\ub85c \ubcc0\ud658 \uc2dc\ucf1c \uc800\uc7a5\ud55c\ub2e4.","title":"Kubernetes \ucee8\uc149"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#control-plane","text":"kube-apiserver : API \uc11c\ubc84\ub294 REST\ub97c \ud1b5\ud574 \ub2e4\ub978 \ubaa8\ub4e0 \uad6c\uc131 \uc694\uc18c\uac00 \uc0c1\ud638 \uc791\uc6a9\ud560\uc218 \uc788\ub3c4\ub85d \uc81c\uacf5\ud558\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc \uc601\uc5ed\uc774\uba70 Pod, Service, replicationcontrollers \ub4f1\uc758 API \uac1c\uccb4\uc5d0 \ub300\ud55c \ub370\uc774\ud130\uc758 \uc720\ud6a8\uc131\uc744 \uac80\uc0ac\ud558\uace0 \uc801\uc6a9\ud55c\ub2e4. kube-scheduler: \ud560\ub2f9\ub41c \ub178\ub4dc\uac00 \uc5c6\ub294 \uc0c8\ub85c \uc0dd\uc131\ub41c \ud30c\ub4dc\ub97c \ud655\uc778\ud558\uc5ec \uc2e4\ud589\ud560 \ub178\ub4dc\ub97c \uc120\ud0dd\ud558\ub294 \uad00\ub9ac \uc601\uc5ed\uc774\ub2e4. kube-controller-manager: \ucee8\ud2b8\ub864\ub7ec \ud504\ub85c\uc138\uc2a4\ub97c \uc2e4\ud589\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc774\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \ucee8\ud2b8\ub864\ub7ec\ub97c \uad00\ub9ac \ud55c\ub2e4. node controller: \ub178\ub4dc\uac00 \ub2e4\uc6b4\ub418\uc5c8\uc744 \ub54c \ub300\uc751\uacfc notice\uc5d0 \uad00\ud55c \ucc45\uc784\uc744 \uac00\uc9c4\ub2e4. Job controller: Job\uc758 \uac1c\uccb4\ub97c \uac10\uc2dc\ud55c \ub2e4\uc74c\ud574\ub2f9 \uc791\uc5c5\uc774 \uc644\ub8cc \ub420\ub54c \uae4c\uc9c0 \uc2e4\ud589\ub418\ub294 \ud30c\ub4dc\ub97c \uc0dd\uc131 \uad00\ub9ac \ud55c\ub2e4. Endpoints controller: \uc11c\ube44\uc2a4\uc640 \ud30c\ub4dc\ub97c \uc5f0\uacb0\uc2dc\ud0a4\ub294 \uc5ed\ud560\uc744 \ub2f4\ub2f9 \ud55c\ub2e4. Service Account & Token controllers: \uc0c8\ub85c\uc6b4 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ub300\ud55c \uae30\ubcf8 \uacc4\uc815\uacfc API \uc811\uadfc \ud1a0\ud070\uc744 \uc0dd\uc131\ud55c\ub2e4. cloud-controller-manager: \ud074\ub77c\uc6b0\ub4dc\ubcc4 \ucee8\ud2b8\ub864 \ub85c\uc9c1\uc744 \ud3ec\ud568\ud558\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee8\ud2b8\ub864 \ud50c\ub808\uc778 \ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \ud074\ub77c\uc6b0\ub4dc \ucee8\ud2b8\ub864\ub7ec \ub9e4\ub2c8\uc800\ub97c \ud1b5\ud574 \ud074\ub7ec\uc2a4\ud130\ub97c \ud074\ub77c\uc6b0\ub4dc \uacf5\uae09\uc790\uc758 API\uc5d0 \uc5f0\uacb0\ub41c\ub2e4.","title":"Control Plane"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#worker","text":"kubelet: \ud074\ub7ec\uc2a4\ud130\uc758 \uac01 \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \uc5d0\uc774\uc804\ud2b8. Kubelet\uc740 \ud30c\ub4dc\uc5d0\uc11c \ucee8\ud14c\uc774\ub108 \uad00\ub9ac \uc6b4\uc601\ud558\ub294 \uc8fc\uccb4 \uc774\ub2e4. kube-proxy : \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc815\uc758\ub41c \uc11c\ube44\uc2a4\uc758 \ub124\ud2b8\uc6cc\ud06c \uc815\ucc45\uc744 \ubc18\uc601\ud558\uace0 \uc11c\ube44\uc2a4\uc758 Pod\uc5d0 \ub300\ud55c \uc694\uccad\uc744 \ud3ec\uc6cc\ub529 \ud558\ub294 \uaddc\uce59\uc744 \uad00\ub9ac \ud55c\ub2e4.","title":"Worker"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes_3","text":"","title":"Kubernetes \uc7a5\uc810 \ubc0f \uace0\ub824\uc0ac\ud56d"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#_1","text":"\ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\ub97c Code\ub85c \uc120\uc5b8 \ubc0f \uad00\ub9ac\ud560 \uc218 \uc788\uc73c\uba70 GitOps, CICD\ub4f1\uc744 \ud65c\uc6a9\ud558\uc5ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec\ub97c \uc790\ub3d9\ud654\ud560 \uc218 \uc788\uc73c\uba70 On-prem \ubc0f Cloud \ud658\uacbd agnostic \ud558\uac8c \ucee8\ud14c\uc774\ub108\ub97c \uad00\ub9ac \uc6b4\uc601 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.","title":"\uc7a5\uc810"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#_2","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \ucee8\uc149\uc5d0 \ub9de\ucdb0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ubcc0\ud654(Scale out \uad6c\uc870, Microservice \ud615\ud0dc)\uac00 \ud544\uc694\ud558\uba70, \ub2e4\uc591\ud55c \ubc29\ubc95\uc73c\ub85c \uac1c\ubc1c\uc870\uc9c1\uc744 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub85c on-boarding \ud558\uc5ec \uc0ac\uc804 \uac80\uc99d \ud544\uc694\ud558\ub2e4. \ub610\ud55c \uc778\ud504\ub77c \uad00\uc810\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uace0\ub824\ud574\uc11c \uc124\uacc4\ud558\uace0 \uad6c\ucd95\uc744 \uc9c4\ud589\ud574\uc57c \ud558\uba70 \uad6c\ucd95 \uc644\ub8cc \ud6c4\uc5d0\ub3c4 \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \ub2e4\uc591\ud55c CNCF \uc0dd\ud0dc\uacc4\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ubcf8\uc778\uc758 \ud658\uacbd\uc5d0 \ub9de\uac8c \uc870\ud569\ud574\uc57c \ud55c\ub2e4. \ud2b9\ud788 \uadf8 \uc0dd\ud0dc\uacc4\uac00 \ub9e4\uc6b0 \ubc29\ub300\ud558\ubbc0\ub85c Learning Curve \uaf64 \ub192\uace0 \ucda9\ubd84\ud55c \uc2dc\uac04\uacfc \ud14c\uc2a4\ud2b8\ub97c \uac70\uce5c \ud6c4\uc5d0 \ud504\ub7ec\ub355\uc158 \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec\ud574\uc57c \ud55c\ub2e4.","title":"\uace0\ub824\uc0ac\ud56d"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#_3","text":"Kubernetes Tutorials Overview Official Kubernetes Tutorials","title":"\ucd94\ucc9c \uc790\ub8cc"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/","text":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(cloud) - AWS EKS EKS \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5 \uc774\ubc88 \uc2e4\uc2b5\uc740 Amazon EKS\ub85c \ub300\uaddc\ubaa8 \ucee8\ud14c\uc774\ub108 \uc6b4\uc601 \ud658\uacbd\uc744 \ub9cc\ub4e4\uace0 \uc11c\ube44\uc2a4(Container)\ub97c \ubc30\ud3ec \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc785\ub2c8\ub2e4. AWS\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f1\uc2a4 \uc11c\ube44\uc2a4\uc778 EKS\uc5d0 \ub300\ud574 \ubc30\uc6cc \ubcf4\uace0 \ucee8\ud14c\uc774\ub108 \uc11c\ube44\uc2a4 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d AWS CLI \uc124\uc815 AWS CLI \uc124\uce58: \uad00\ub828 \ub9c1\ud06c AWS CLI \ucd08\uae30 \uc124\uc815: \uad00\ub828 \ub9c1\ud06c Note \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 IAM User \uad8c\ud55c\uc5d0 AdministratorAccess policy \ubd80\uc5ec Architecture 1. EKS \uad6c\uc131 \ud558\uae30 IAM user for EKS EKS\ub294 Root User\ub85c \uc0dd\uc131/\uc811\uc18d\ud558\ub294 \uac83\uc744 \ubcf4\uc548\uc0c1 \uad8c\uace0\ud558\uc9c0 \uc54a\uc73c\uba70 EKS\uc744 \uad00\ub9ac\ud558\uae30 \uc704\ud55c \uad8c\ud55c(Kubernetes RBAC authorization)\uc744 EKS\ub97c \uc0dd\uc131\ud55c IAM \uc5d4\ud130\ud2f0(user \ud639\uc740 role)\ub85c \ubd80\ud130 \ud560\ub2f9\uc744 \uc2dc\ud0a4\uae30 \ub54c\ubb38\uc5d0 IAM user \ud639\uc740 role\ub97c \uc0ac\uc6a9\uc911\uc774\uc9c0 \uc54a\ub2e4\uba74 \ud544\uc218\ub85c IAM \uc5d4\ud130\ud2f0\ub97c \uc0dd\uc131\ud558\uace0 EKS \uc0dd\uc131 \uc5ed\ud560\uc744 \ubd80\uc5ec \ud574\uc57c\ud55c\ub2e4. https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html \uc0ac\uc6a9\uc911\uc778 IAM \uc5d4\ud130\ud2f0(\uc720\uc800, Role)\uac00 \uc788\ub2e4\uba74 eksctl \uad8c\ud55c\uc774 \uc788\ub294\uc9c0 \uac80\ud1a0. \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 AdministratorAccess policy \ubd80\uc5ec Otherwise, create a IAM user with eksctl minimum policies. https://eksctl.io/usage/minimum-iam-policies/ \ud604\uc7ac \uc138\uc158\uc758 IAM \uc5d4\ud130\ud2f0 \ud655\uc778 \ubc29\ubc95 $ aws sts get-caller-identity Install eksctl and kubectl EKS \uc0dd\uc131\uc744 \uc704\ud574 eksctl\uc744 \uc124\uce58 \ud558\uace0 \ucd94\ud6c4 kubernetes \uad00\ub9ac\ub97c \uc704\ud574 kubectl\ub3c4 \uc0ac\uc804\uc5d0 \uc124\uce58 \ud544\uc694: kubectl \uc124\uce58(1.18) eksctl \uc124\uce58 Deploy EKS Cluster EKS \ubc30\ud3ec\ub97c \uc704\ud55c \uad6c\uc131 \uc815\ubcf4 \ud30c\uc77c (eks-cluster-config.yml) \uc791\uc131 *\uc2e4\uc2b5 \ube44\uc6a9 \uc808\uac10\uc744 \uc704\ud574 SPOT \uc778\uc2a4\ud134\uc2a4 \uc0ac\uc6a9 --- apiVersion: eksctl.io/v1alpha5 kind: ClusterConfig metadata: name: cloud-eks-cluster region: ap-northeast-2 availabilityZones: [\"ap-northeast-2a\", \"ap-northeast-2c\"] iam: withOIDC: true managedNodeGroups: - name: cloud-eks-workers desiredCapacity: 1 iam: withAddonPolicies: albIngress: true instanceTypes: [\"c4.large\",\"c5.large\"] spot: true # instanceType: t3.small # ssh: # publicKeyName: \"<your key pair name>\" # https://ap-northeast-2.console.aws.amazon.com/ec2/v2/home?region=ap-northeast-2#KeyPairs: cloudWatch: clusterLogging: enableTypes: [\"audit\", \"authenticator\", \"controllerManager\"] \uc815\uc758\ud55c \uad6c\uc131 \uc815\ubcf4 \ub300\ub85c cluster \uc0dd\uc131 $ eksctl create cluster -f ./eks-cluster-config.yml EKS Cluster \uad6c\uc131 \uc644\ub8cc \uae4c\uc9c0 \uc57d 15\ubd84 \uc18c\uc694 \uc635\uc158)\ub9cc\uc57d CLI\ub85c \ud558\uace0 \uc2f6\ub2e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uc218\ud589 eksctl create cluster \\ --name cloud-eks-01 \\ --version 1.18 \\ --region ap-northeast-2 \\ --zones=ap-northeast-2a,ap-northeast-2c \\ --nodegroup-name cloud-eks-workers \\ --nodes 1 \\ --nodes-min 1 \\ --nodes-max 3 \\ --with-oidc \\ --managed \\ --alb-ingress-access \\ --spot \\ --instance-types=c4.large,c5.large EKS Cluster \uc811\uc18d \ud655\uc778 \uc815\uc0c1\uc801\uc778 output [\u2714] all EKS cluster resources for \"cloud-eks-01\" have been created [\u2139] nodegroup \"cloud-eks-workers\" has 1 node(s) [\u2139] node \"ip-192-168-27-236.ap-northeast-2.compute.internal\" is ready [\u2139] waiting for at least 1 node(s) to become ready in \"cloud-eks-workers\" [\u2139] nodegroup \"cloud-eks-workers\" has 1 node(s) [\u2139] node \"ip-192-168-27-236.ap-northeast-2.compute.internal\" is ready [\u2139] kubectl command should work with \"/Users/kcchang/.kube/config\", try 'kubectl get nodes' [\u2714] EKS cluster \"cloud-eks-01\" in \"ap-northeast-2\" region is ready kubectl\uc744 \ud1b5\ud574 \ucd94\uac00\ub41c node \ud655\uc778 \u279c \u2717 kubectl get nodes NAME STATUS ROLES AGE VERSION ip-192-168-27-236.ap-northeast-2.compute.internal Ready <none> 19m v1.18.9-eks-d1db3c 2. Application \ubc30\ud3ec Database \ubc30\ud3ec \uc608\uc81c todo \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc5d0\uc11c \ub85c\uceec sqlight DB \ub300\uc2e0\uc5d0 \uc678\ubd80 RDBMS(mariadb, mysql\ub4f1) \ub9ac\uc18c\uc2a4\ub97c \uc5f0\ub3d9 \ud55c \uacbd\uc6b0\uc5d0\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc704\uc5d0 DB app\uc744 \ubc30\ud3ec \ud574\uc57c\ud558\ubbc0\ub85c \uad00\ub828\ud574 Deployment manifast \ud30c\uc77c \uc791\uc131 Deployment \ud30c\uc77c \uad6c\uc131 \ud558\uae30 kuberentes deployment mysql-deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: mysql spec: selector: matchLabels: app: mysql strategy: type: Recreate template: metadata: labels: app: mysql spec: containers: - image: cloudacode/mariadb-todo:v1.0.1 name: mysql ports: - containerPort: 3306 name: mysql Deploy the contents of the deployment file: kubectl apply -f mysql-deployment.yaml Display information about the Deployment: kubectl describe deployment mysql \uc815\uc0c1\uc801\uc73c\ub85c mysql\uc774 Deploy\uac00 \ub418\uc5c8\ub2e4\uba74 flask app\uc5d0\uc11c mysql\ub85c \uc811\uc18d\uc744 \uc704\ud574 service\ub97c deployment\uc5d0 \ub9e4\ud551 mysql-service.yaml apiVersion: v1 kind: Service metadata: name: mysql spec: ports: - port: 3306 selector: app: mysql clusterIP: None Deploy the contents of the service file: kubectl apply -f mysql-service.yaml \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4 kubectl get pods -l app=mysql Output NAME READY STATUS RESTARTS AGE mysql-6fd94cc949-d8lj7 1/1 Running 0 23s Flask APP \ubc30\ud3ec \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0 Flask app\uc744 \ubc30\ud3ec\ud558\uae30 \uc704\ud574 Deployment manifast \ud30c\uc77c \uc791\uc131 flask-deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: cloud-flask labels: app: cloud-flask spec: replicas: 1 selector: matchLabels: app: cloud-flask strategy: rollingUpdate: maxSurge: 20% maxUnavailable: 20% type: RollingUpdate template: metadata: labels: app: cloud-flask spec: containers: - image: cloudacode/python-todo:v1.1.0 imagePullPolicy: Always name: cloud-flask ports: - containerPort: 5000 protocol: TCP env: - name: DB_USER value: root - name: DB_PASSWORD value: mysecret - name: DB_NAME value: todo - name: DB_HOST value: mysql Deploy the contents of the deployment file: kubectl apply -f flask-deployment.yaml Display information about the Deployment: kubectl describe deployment cloud-flask \uc815\uc0c1\uc801\uc73c\ub85c Flask app\uc774 \ubc30\ud3ec \ub418\uc5c8\ub2e4\uba74 \uc678\ubd80\uc5d0\uc11c flask app\uc73c\ub85c \uc811\uc18d\uc744 \uc704\ud574 service\ub97c deployment\uc5d0 \ub9e4\ud551 flask-service.yaml apiVersion: v1 kind: Service metadata: name: cloud-flask-svc spec: selector: app: cloud-flask ports: - protocol: TCP port: 80 targetPort: 5000 type: LoadBalancer Deploy the contents of the service file: kubectl apply -f flask-service.yaml \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4 kubectl get pods -l app=cloud-flask flask app\uc758 \uacbd\uc6b0\ub294 Service \ud0c0\uc785\uc744 LB\ub85c \uc678\ubd80 \ub178\ucd9c\uc744 \uc2dc\ucf30\uc73c\ubbc0\ub85c \ub2e4\uc74c\uacfc \uac19\uc774 LB Endpoint\ub97c \ud655\uc778 \uac00\ub2a5 kubectl get svc cloud-flask-svc Output NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE cloud-flask-svc LoadBalancer 10.100.211.215 acd2f9103b9564eb3ada544282a1dee3-566651492.ap-northeast-2.elb.amazonaws.com 80:31126/TCP 101s \ud574\ub2f9 LB endpoint\ub85c \uc811\uadfc \ud558\uc5ec \ud655\uc778 \ub3d9\uc791 \ud655\uc778 Clean Up \uc2e4\uc2b5 \uc644\ub8cc \ud6c4 \ube44\uc6a9 \uc808\uc57d\uc744 \uc704\ud574 \uc2e4\uc2b5\ud55c EKS \ub9ac\uc18c\uc2a4\ub97c \uc815\ub9ac eksctl delete cluster --region=ap-northeast-2 --name=<your eks cluster name>","title":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(cloud) - AWS EKS"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#cloud-aws-eks","text":"EKS \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5 \uc774\ubc88 \uc2e4\uc2b5\uc740 Amazon EKS\ub85c \ub300\uaddc\ubaa8 \ucee8\ud14c\uc774\ub108 \uc6b4\uc601 \ud658\uacbd\uc744 \ub9cc\ub4e4\uace0 \uc11c\ube44\uc2a4(Container)\ub97c \ubc30\ud3ec \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc785\ub2c8\ub2e4. AWS\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f1\uc2a4 \uc11c\ube44\uc2a4\uc778 EKS\uc5d0 \ub300\ud574 \ubc30\uc6cc \ubcf4\uace0 \ucee8\ud14c\uc774\ub108 \uc11c\ube44\uc2a4 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","title":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(cloud) - AWS EKS"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#_1","text":"","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#aws-cli","text":"AWS CLI \uc124\uce58: \uad00\ub828 \ub9c1\ud06c AWS CLI \ucd08\uae30 \uc124\uc815: \uad00\ub828 \ub9c1\ud06c Note \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 IAM User \uad8c\ud55c\uc5d0 AdministratorAccess policy \ubd80\uc5ec","title":"AWS CLI \uc124\uc815"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#architecture","text":"","title":"Architecture"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#1-eks","text":"","title":"1. EKS \uad6c\uc131 \ud558\uae30"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#iam-user-for-eks","text":"EKS\ub294 Root User\ub85c \uc0dd\uc131/\uc811\uc18d\ud558\ub294 \uac83\uc744 \ubcf4\uc548\uc0c1 \uad8c\uace0\ud558\uc9c0 \uc54a\uc73c\uba70 EKS\uc744 \uad00\ub9ac\ud558\uae30 \uc704\ud55c \uad8c\ud55c(Kubernetes RBAC authorization)\uc744 EKS\ub97c \uc0dd\uc131\ud55c IAM \uc5d4\ud130\ud2f0(user \ud639\uc740 role)\ub85c \ubd80\ud130 \ud560\ub2f9\uc744 \uc2dc\ud0a4\uae30 \ub54c\ubb38\uc5d0 IAM user \ud639\uc740 role\ub97c \uc0ac\uc6a9\uc911\uc774\uc9c0 \uc54a\ub2e4\uba74 \ud544\uc218\ub85c IAM \uc5d4\ud130\ud2f0\ub97c \uc0dd\uc131\ud558\uace0 EKS \uc0dd\uc131 \uc5ed\ud560\uc744 \ubd80\uc5ec \ud574\uc57c\ud55c\ub2e4. https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html \uc0ac\uc6a9\uc911\uc778 IAM \uc5d4\ud130\ud2f0(\uc720\uc800, Role)\uac00 \uc788\ub2e4\uba74 eksctl \uad8c\ud55c\uc774 \uc788\ub294\uc9c0 \uac80\ud1a0. \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 AdministratorAccess policy \ubd80\uc5ec Otherwise, create a IAM user with eksctl minimum policies. https://eksctl.io/usage/minimum-iam-policies/ \ud604\uc7ac \uc138\uc158\uc758 IAM \uc5d4\ud130\ud2f0 \ud655\uc778 \ubc29\ubc95 $ aws sts get-caller-identity","title":"IAM user for EKS"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#install-eksctl-and-kubectl","text":"EKS \uc0dd\uc131\uc744 \uc704\ud574 eksctl\uc744 \uc124\uce58 \ud558\uace0 \ucd94\ud6c4 kubernetes \uad00\ub9ac\ub97c \uc704\ud574 kubectl\ub3c4 \uc0ac\uc804\uc5d0 \uc124\uce58 \ud544\uc694: kubectl \uc124\uce58(1.18) eksctl \uc124\uce58","title":"Install eksctl and kubectl"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#deploy-eks-cluster","text":"EKS \ubc30\ud3ec\ub97c \uc704\ud55c \uad6c\uc131 \uc815\ubcf4 \ud30c\uc77c (eks-cluster-config.yml) \uc791\uc131 *\uc2e4\uc2b5 \ube44\uc6a9 \uc808\uac10\uc744 \uc704\ud574 SPOT \uc778\uc2a4\ud134\uc2a4 \uc0ac\uc6a9 --- apiVersion: eksctl.io/v1alpha5 kind: ClusterConfig metadata: name: cloud-eks-cluster region: ap-northeast-2 availabilityZones: [\"ap-northeast-2a\", \"ap-northeast-2c\"] iam: withOIDC: true managedNodeGroups: - name: cloud-eks-workers desiredCapacity: 1 iam: withAddonPolicies: albIngress: true instanceTypes: [\"c4.large\",\"c5.large\"] spot: true # instanceType: t3.small # ssh: # publicKeyName: \"<your key pair name>\" # https://ap-northeast-2.console.aws.amazon.com/ec2/v2/home?region=ap-northeast-2#KeyPairs: cloudWatch: clusterLogging: enableTypes: [\"audit\", \"authenticator\", \"controllerManager\"] \uc815\uc758\ud55c \uad6c\uc131 \uc815\ubcf4 \ub300\ub85c cluster \uc0dd\uc131 $ eksctl create cluster -f ./eks-cluster-config.yml EKS Cluster \uad6c\uc131 \uc644\ub8cc \uae4c\uc9c0 \uc57d 15\ubd84 \uc18c\uc694 \uc635\uc158)\ub9cc\uc57d CLI\ub85c \ud558\uace0 \uc2f6\ub2e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uc218\ud589 eksctl create cluster \\ --name cloud-eks-01 \\ --version 1.18 \\ --region ap-northeast-2 \\ --zones=ap-northeast-2a,ap-northeast-2c \\ --nodegroup-name cloud-eks-workers \\ --nodes 1 \\ --nodes-min 1 \\ --nodes-max 3 \\ --with-oidc \\ --managed \\ --alb-ingress-access \\ --spot \\ --instance-types=c4.large,c5.large","title":"Deploy EKS Cluster"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#eks-cluster","text":"\uc815\uc0c1\uc801\uc778 output [\u2714] all EKS cluster resources for \"cloud-eks-01\" have been created [\u2139] nodegroup \"cloud-eks-workers\" has 1 node(s) [\u2139] node \"ip-192-168-27-236.ap-northeast-2.compute.internal\" is ready [\u2139] waiting for at least 1 node(s) to become ready in \"cloud-eks-workers\" [\u2139] nodegroup \"cloud-eks-workers\" has 1 node(s) [\u2139] node \"ip-192-168-27-236.ap-northeast-2.compute.internal\" is ready [\u2139] kubectl command should work with \"/Users/kcchang/.kube/config\", try 'kubectl get nodes' [\u2714] EKS cluster \"cloud-eks-01\" in \"ap-northeast-2\" region is ready kubectl\uc744 \ud1b5\ud574 \ucd94\uac00\ub41c node \ud655\uc778 \u279c \u2717 kubectl get nodes NAME STATUS ROLES AGE VERSION ip-192-168-27-236.ap-northeast-2.compute.internal Ready <none> 19m v1.18.9-eks-d1db3c","title":"EKS Cluster \uc811\uc18d \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#2-application","text":"","title":"2. Application \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#database","text":"\uc608\uc81c todo \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc5d0\uc11c \ub85c\uceec sqlight DB \ub300\uc2e0\uc5d0 \uc678\ubd80 RDBMS(mariadb, mysql\ub4f1) \ub9ac\uc18c\uc2a4\ub97c \uc5f0\ub3d9 \ud55c \uacbd\uc6b0\uc5d0\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc704\uc5d0 DB app\uc744 \ubc30\ud3ec \ud574\uc57c\ud558\ubbc0\ub85c \uad00\ub828\ud574 Deployment manifast \ud30c\uc77c \uc791\uc131 Deployment \ud30c\uc77c \uad6c\uc131 \ud558\uae30 kuberentes deployment mysql-deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: mysql spec: selector: matchLabels: app: mysql strategy: type: Recreate template: metadata: labels: app: mysql spec: containers: - image: cloudacode/mariadb-todo:v1.0.1 name: mysql ports: - containerPort: 3306 name: mysql Deploy the contents of the deployment file: kubectl apply -f mysql-deployment.yaml Display information about the Deployment: kubectl describe deployment mysql \uc815\uc0c1\uc801\uc73c\ub85c mysql\uc774 Deploy\uac00 \ub418\uc5c8\ub2e4\uba74 flask app\uc5d0\uc11c mysql\ub85c \uc811\uc18d\uc744 \uc704\ud574 service\ub97c deployment\uc5d0 \ub9e4\ud551 mysql-service.yaml apiVersion: v1 kind: Service metadata: name: mysql spec: ports: - port: 3306 selector: app: mysql clusterIP: None Deploy the contents of the service file: kubectl apply -f mysql-service.yaml \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4 kubectl get pods -l app=mysql Output NAME READY STATUS RESTARTS AGE mysql-6fd94cc949-d8lj7 1/1 Running 0 23s","title":"Database \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#flask-app","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0 Flask app\uc744 \ubc30\ud3ec\ud558\uae30 \uc704\ud574 Deployment manifast \ud30c\uc77c \uc791\uc131 flask-deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: cloud-flask labels: app: cloud-flask spec: replicas: 1 selector: matchLabels: app: cloud-flask strategy: rollingUpdate: maxSurge: 20% maxUnavailable: 20% type: RollingUpdate template: metadata: labels: app: cloud-flask spec: containers: - image: cloudacode/python-todo:v1.1.0 imagePullPolicy: Always name: cloud-flask ports: - containerPort: 5000 protocol: TCP env: - name: DB_USER value: root - name: DB_PASSWORD value: mysecret - name: DB_NAME value: todo - name: DB_HOST value: mysql Deploy the contents of the deployment file: kubectl apply -f flask-deployment.yaml Display information about the Deployment: kubectl describe deployment cloud-flask \uc815\uc0c1\uc801\uc73c\ub85c Flask app\uc774 \ubc30\ud3ec \ub418\uc5c8\ub2e4\uba74 \uc678\ubd80\uc5d0\uc11c flask app\uc73c\ub85c \uc811\uc18d\uc744 \uc704\ud574 service\ub97c deployment\uc5d0 \ub9e4\ud551 flask-service.yaml apiVersion: v1 kind: Service metadata: name: cloud-flask-svc spec: selector: app: cloud-flask ports: - protocol: TCP port: 80 targetPort: 5000 type: LoadBalancer Deploy the contents of the service file: kubectl apply -f flask-service.yaml \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4 kubectl get pods -l app=cloud-flask flask app\uc758 \uacbd\uc6b0\ub294 Service \ud0c0\uc785\uc744 LB\ub85c \uc678\ubd80 \ub178\ucd9c\uc744 \uc2dc\ucf30\uc73c\ubbc0\ub85c \ub2e4\uc74c\uacfc \uac19\uc774 LB Endpoint\ub97c \ud655\uc778 \uac00\ub2a5 kubectl get svc cloud-flask-svc Output NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE cloud-flask-svc LoadBalancer 10.100.211.215 acd2f9103b9564eb3ada544282a1dee3-566651492.ap-northeast-2.elb.amazonaws.com 80:31126/TCP 101s \ud574\ub2f9 LB endpoint\ub85c \uc811\uadfc \ud558\uc5ec \ud655\uc778 \ub3d9\uc791 \ud655\uc778","title":"Flask APP \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#clean-up","text":"\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 \ube44\uc6a9 \uc808\uc57d\uc744 \uc704\ud574 \uc2e4\uc2b5\ud55c EKS \ub9ac\uc18c\uc2a4\ub97c \uc815\ub9ac eksctl delete cluster --region=ap-northeast-2 --name=<your eks cluster name>","title":"Clean Up"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/","text":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(local) - Kind Kind \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5 \uc774\ubc88 \uc2e4\uc2b5\uc740 Local \ud658\uacbd\uc5d0\uc11c Kind\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2e4\uc2b5 \ud658\uacbd\uc744 \ub9cc\ub4e4\uace0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc785\ub2c8\ub2e4. \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \ucee8\ud14c\uc774\ub108 \uc11c\ube44\uc2a4 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kuberctl \uc124\uce58 kuberctl \uc124\uce58: \uad00\ub828 \ub9c1\ud06c Docker Desktop \uc124\uce58 Docker Desktop \uc124\uce58: \uad00\ub828 \ub9c1\ud06c Tip \uc708\ub3c4\uc6b0\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ub294 WSL \uae30\ub2a5\uc744 \ud65c\uc131\ud654 \ud558\uc5ec \ub9ac\ub205\uc2a4 \uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \ub3c4\ucee4\ub97c \uc0ac\uc6a9 \ud558\ub294 \uac83\uc744 \ucd94\ucc9c \ud55c\ub2e4. WSL \uc124\uce58 \uac00\uc774\ub4dc Architecture Kind( K ubernetes IN D ocker)\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\uc758 \uae30\ub2a5\ub4e4\uc744 \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\ub3c4\ub85d \ucee8\ud2b8\ub864\ub7ec, \uc6cc\ucee4 \ub178\ub4dc\uc758 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ud328\ud0a4\uc9d5 \ubc0f Image\ud654 \ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\uc774\ub2e4. \ucc38\uace0: Kind Document - Initial design , Deep Dive: Kind - CNCF19 1. Kind \uad6c\uc131 \ud558\uae30 \uc124\uce58 Kind Document - Installation OS \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800 \ud639\uc740 \ubc14\uc774\ub108\ub9ac\ub97c \ud1b5\ud574\uc11c \uc124\uce58\ub97c \uc9c4\ud589 Cluster \uc124\uc815 Kind Cluster\uc758 \uad6c\uc131 \uc815\ubcf4\ub97c \ucf54\ub4dc\ud654\ud558\uc5ec \uad00\ub9ac\ud560 \uc218 \uc788\uc73c\uba70 \uc5ec\ub7ec \uac00\uc9c0 \uae30\ub2a5\ub4e4\uc744 \ud65c\uc131\ud654\ud560 \uc218 \uc788\ub2e4. \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 local cluster\ub97c \uc544\ub798\uc640 \uac19\uc774 \ucee8\ud2b8\ub864\ub7ec 1\uac1c, \uc6cc\ucee4\ub178\ub4dc 3\uac1c\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \uad6c\uc131\ud558\uba70 \uc678\ubd80\uc5d0\uc11c ingress\ub85c \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d port mapping\uae4c\uc9c0 \uae30\ub2a5\uc744 \ud65c\uc131\ud654\ud55c\ub2e4. Info Worker node\uc5d0\ub3c4 ingress\ub97c \uc704\ud55c HostPort Mapping\uc744 \ud560 \uc218 \uc788\uc9c0\ub9cc \uc2e4\uc2b5\uc5d0\uc11c \ub2e4\ub978 \uc6cc\ud06c\ub85c\ub4dc\uc5d0 \uc758\ud574 80, 443\uc774 \uc810\uc720\ub418\uace0 \uc788\uc744 \uc218 \uc788\uae30 \ub584\ubb38\uc5d0 \uc544\ub798\uc640 \uac19\uc774 control node \ub9cc \ud65c\uc131\ud654\ud55c\ub2e4 kind-cluster-config.yaml kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 # 1 control plane node and 3 workers nodes: # the control plane node config - role: control-plane # create cluster with extraPortMappings # https://kind.sigs.k8s.io/docs/user/ingress/#create-cluster kubeadmConfigPatches: - | kind: InitConfiguration nodeRegistration: kubeletExtraArgs: node-labels: \"ingress-ready=true\" extraPortMappings: - containerPort: 80 hostPort: 80 protocol: TCP - containerPort: 443 hostPort: 443 protocol: TCP - role: worker - role: worker - role: worker \ucc38\uace0: configuring your kind cluster , kind example config file Cluster \uc0dd\uc131 \uc815\uc758\ud55c \uad6c\uc131 \uc815\ubcf4(kind-cluster-config.yaml) \ub300\ub85c cluster \uc0dd\uc131 $ kind create cluster --config kind-cluster-config.yaml Kind Cluster \uc811\uc18d \ud655\uc778 \uc815\uc0c1\uc801\uc778 output Creating cluster \"kind\" ... \u2713 Ensuring node image (kindest/node:v1.24.0) \ud83d\uddbc \u2713 Preparing nodes \ud83d\udce6 \ud83d\udce6 \ud83d\udce6 \ud83d\udce6 \u2713 Writing configuration \ud83d\udcdc \u2713 Starting control-plane \ud83d\udd79\ufe0f \u2713 Installing CNI \ud83d\udd0c \u2713 Installing StorageClass \ud83d\udcbe \u2713 Joining worker nodes \ud83d\ude9c Set kubectl context to \"kind-kind\" You can now use your cluster with: kubectl cluster-info --context kind-kind ... kubectl\uc744 \ud1b5\ud574 \ucd94\uac00\ub41c node \ud655\uc778 $ kubectl get nodes NAME STATUS ROLES AGE VERSION kind-control-plane Ready control-plane 10m v1.24.0 kind-worker Ready <none> 10m v1.24.0 kind-worker2 Ready <none> 10m v1.24.0 kind-worker3 Ready <none> 10m v1.24.0 2. \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec Nginx \uc6cc\ud06c\ub85c\ub4dc \ubc30\ud3ec \ub300\ud45c\uc801\uc778 Stateless \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc778 Nginx\ub97c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0 \ubc30\ud3ec\ud558\uace0 \uc11c\ube44\uc2a4 \ubc0f \uc778\uadf8\ub808\uc2a4\uae4c\uc9c0 \uc5f0\ub3d9\ud558\uc5ec \uc811\uadfc \ud655\uc778\uc744 \ud574 \ubcf8\ub2e4. Info Service, Ingress\ub294 \uae30\ucd08\uc801\uc778 \uc124\uc815\uc73c\ub85c \uc9c4\ud589, \ucd94\ud6c4 \ubcc4\ub3c4 \uc2e4\uc2b5\uc5d0\uc11c \uc790\uc138\ud788 \ub2e4\ub8f0 \uc608\uc815 frontend-nginx.yaml kind: Pod apiVersion: v1 metadata: name: frontend labels: app: nginx spec: containers: - image: nginx name: nginx ports: - containerPort: 80 --- kind: Service apiVersion: v1 metadata: name: frontend-service spec: selector: app: nginx ports: - port: 80 --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: frontend-ingress spec: rules: - http: paths: - pathType: Prefix path: / backend: service: name: frontend-service port: number: 80 --- \uc815\uc758\ub41c \uad6c\uc131\ub300\ub85c \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec: kubectl apply -f frontend-nginx.yaml \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4 kubectl get pods -l app=nginx \uc811\uadfc \ud655\uc778 \uc544\uc9c1 Load Balancer\ub098 Ingress Controller\ub97c \uad6c\uc131\ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 Port-Forwarding\uc744 \ud1b5\ud574\uc11c \uc9c1\uc811 \ud3ec\ud2b8\ub97c \uc5f4\uc5b4\uc11c \uc811\uadfc\ud558\uc5ec \uc811\uc18d\uc774 \uc798 \ub418\ub294\uc9c0\ub97c \ud655\uc778\ud574\uc57c \ud55c\ub2e4. Port-Forwarding\uc744 \ud1b5\ud55c \uc811\uadfc \ud655\uc778 frontend-service \uc11c\ube44\uc2a4\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ub9cc\ub4e4\uc5b4 \uc84c\ub294\uc9c0 \ud655\uc778 \ud6c4 kubectl get service/frontend-service NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE frontend-service ClusterIP 10.96.1.81 <none> 80/TCP 10m Port-Forwarding \uc124\uc815\uc744 \ud1b5\ud574\uc11c local \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc11c\ube44\uc2a4 \ud3ec\ud2b8\ub85c \uc9c1\uc811 \uc5f0\uacb0\uc744 \uc2dc\ub3c4 kubectl port-forward service/frontend-service 8080:80 Forwarding from 127.0.0.1:8080 -> 80 Forwarding from [::1]:8080 -> 80 Tip \ub85c\uceec\ud658\uacbd\uc5d0\uc11c 80\ud3ec\ud2b8\uac00 \ub2e4\ub978 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc77c \uc218 \uc788\uc73c\uba70 \ud3ec\ud2b8 \uc624\ud508 \uad8c\ud55c\uc774 \ud544\uc694\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 8080\ud3ec\ud2b8\ub85c \uc9c4\ud589 Endpoint localhost:8080 \uc811\uadfc \ud655\uc778 \ubc0f \ube0c\ub77c\uc6b0\uc838\ub85c \uae30\ubcf8 nginx \ud398\uc774\uc9c0\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ubcf4\uc774\ub294\uc9c0 \ud655\uc778 (\uc635\uc158) Ingress-nginx\ub97c \uad6c\uc131 \ubc0f \uc811\uadfc \ud655\uc778 \ub9e4\ubc88 \ud3ec\ud2b8\ud3ec\uc6cc\ub529\uc73c\ub85c \uc811\uadfc \ud655\uc778\uc744 \ud558\ub294 \uac83\uc774 \ub9e4\uc6b0 \ubc88\uac70\ub86d\uae30 \ub54c\ubb38\uc5d0 \uc678\ubd80\uc758 \ud2b8\ub808\ud53d\uc744 \uc11c\ube44\uc2a4\ub85c \ud3ec\uc6cc\ub529 \uc2dc\ud0a4\uae30 \uc704\ud574 Ingress-Nginx\ub97c \uad6c\uc131\ud55c\ub2e4. (2. Fundamentals \ud578\uc988\uc628\uc5d0\uc11c ingress-nginx\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \ub2e4\ub8f0 \uc608\uc815) ingress-nginx \uc124\uce58 \uc9c4\ud589 kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml ingress-nginx controller\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uae30\ub3d9\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778 kubectl get pods -n ingress-nginx -l app.kubernetes.io/component=controller NAME READY STATUS RESTARTS AGE ingress-nginx-controller-5458c46d7d-qjscg 1/1 Running 0 2m \uc704 frontend-nginx.yaml\uc5d0\uc11c service \ud0c0\uc785\uc744 \uae30\ubcf8 ClusterIP\ub85c \ub450\uace0 \uc678\ubd80 \ub178\ucd9c\uc744 Ingress\ub97c \ud1b5\ud574 \ud558\uc600\uc73c\ubbc0\ub85c \ub2e4\uc74c\uacfc \uac19\uc774 Endpoint\ub97c Ingress \ub808\ubca8\uc5d0\uc11c \ud655\uc778 \uac00\ub2a5 kubectl get ingress NAME CLASS HOSTS ADDRESS PORTS AGE frontend-ingress <none> * localhost 80 68s Endpoint localhost:80 \uc811\uadfc \ud655\uc778 \ubc0f \ube0c\ub77c\uc6b0\uc838\ub85c \uae30\ubcf8 nginx \ud398\uc774\uc9c0\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ubcf4\uc774\ub294\uc9c0 \ud655\uc778 Clean Up \uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(local) - Kind"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#local-kind","text":"Kind \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5 \uc774\ubc88 \uc2e4\uc2b5\uc740 Local \ud658\uacbd\uc5d0\uc11c Kind\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2e4\uc2b5 \ud658\uacbd\uc744 \ub9cc\ub4e4\uace0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc785\ub2c8\ub2e4. \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \ucee8\ud14c\uc774\ub108 \uc11c\ube44\uc2a4 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","title":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(local) - Kind"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#_1","text":"","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#kuberctl","text":"kuberctl \uc124\uce58: \uad00\ub828 \ub9c1\ud06c","title":"Kuberctl \uc124\uce58"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#docker-desktop","text":"Docker Desktop \uc124\uce58: \uad00\ub828 \ub9c1\ud06c Tip \uc708\ub3c4\uc6b0\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ub294 WSL \uae30\ub2a5\uc744 \ud65c\uc131\ud654 \ud558\uc5ec \ub9ac\ub205\uc2a4 \uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \ub3c4\ucee4\ub97c \uc0ac\uc6a9 \ud558\ub294 \uac83\uc744 \ucd94\ucc9c \ud55c\ub2e4. WSL \uc124\uce58 \uac00\uc774\ub4dc","title":"Docker Desktop \uc124\uce58"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#architecture","text":"Kind( K ubernetes IN D ocker)\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\uc758 \uae30\ub2a5\ub4e4\uc744 \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\ub3c4\ub85d \ucee8\ud2b8\ub864\ub7ec, \uc6cc\ucee4 \ub178\ub4dc\uc758 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ud328\ud0a4\uc9d5 \ubc0f Image\ud654 \ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\uc774\ub2e4. \ucc38\uace0: Kind Document - Initial design , Deep Dive: Kind - CNCF19","title":"Architecture"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#1-kind","text":"","title":"1. Kind \uad6c\uc131 \ud558\uae30"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#_2","text":"Kind Document - Installation OS \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800 \ud639\uc740 \ubc14\uc774\ub108\ub9ac\ub97c \ud1b5\ud574\uc11c \uc124\uce58\ub97c \uc9c4\ud589","title":"\uc124\uce58"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#cluster","text":"Kind Cluster\uc758 \uad6c\uc131 \uc815\ubcf4\ub97c \ucf54\ub4dc\ud654\ud558\uc5ec \uad00\ub9ac\ud560 \uc218 \uc788\uc73c\uba70 \uc5ec\ub7ec \uac00\uc9c0 \uae30\ub2a5\ub4e4\uc744 \ud65c\uc131\ud654\ud560 \uc218 \uc788\ub2e4. \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 local cluster\ub97c \uc544\ub798\uc640 \uac19\uc774 \ucee8\ud2b8\ub864\ub7ec 1\uac1c, \uc6cc\ucee4\ub178\ub4dc 3\uac1c\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \uad6c\uc131\ud558\uba70 \uc678\ubd80\uc5d0\uc11c ingress\ub85c \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d port mapping\uae4c\uc9c0 \uae30\ub2a5\uc744 \ud65c\uc131\ud654\ud55c\ub2e4. Info Worker node\uc5d0\ub3c4 ingress\ub97c \uc704\ud55c HostPort Mapping\uc744 \ud560 \uc218 \uc788\uc9c0\ub9cc \uc2e4\uc2b5\uc5d0\uc11c \ub2e4\ub978 \uc6cc\ud06c\ub85c\ub4dc\uc5d0 \uc758\ud574 80, 443\uc774 \uc810\uc720\ub418\uace0 \uc788\uc744 \uc218 \uc788\uae30 \ub584\ubb38\uc5d0 \uc544\ub798\uc640 \uac19\uc774 control node \ub9cc \ud65c\uc131\ud654\ud55c\ub2e4 kind-cluster-config.yaml kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 # 1 control plane node and 3 workers nodes: # the control plane node config - role: control-plane # create cluster with extraPortMappings # https://kind.sigs.k8s.io/docs/user/ingress/#create-cluster kubeadmConfigPatches: - | kind: InitConfiguration nodeRegistration: kubeletExtraArgs: node-labels: \"ingress-ready=true\" extraPortMappings: - containerPort: 80 hostPort: 80 protocol: TCP - containerPort: 443 hostPort: 443 protocol: TCP - role: worker - role: worker - role: worker \ucc38\uace0: configuring your kind cluster , kind example config file","title":"Cluster \uc124\uc815"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#cluster_1","text":"\uc815\uc758\ud55c \uad6c\uc131 \uc815\ubcf4(kind-cluster-config.yaml) \ub300\ub85c cluster \uc0dd\uc131 $ kind create cluster --config kind-cluster-config.yaml","title":"Cluster \uc0dd\uc131"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#kind-cluster","text":"\uc815\uc0c1\uc801\uc778 output Creating cluster \"kind\" ... \u2713 Ensuring node image (kindest/node:v1.24.0) \ud83d\uddbc \u2713 Preparing nodes \ud83d\udce6 \ud83d\udce6 \ud83d\udce6 \ud83d\udce6 \u2713 Writing configuration \ud83d\udcdc \u2713 Starting control-plane \ud83d\udd79\ufe0f \u2713 Installing CNI \ud83d\udd0c \u2713 Installing StorageClass \ud83d\udcbe \u2713 Joining worker nodes \ud83d\ude9c Set kubectl context to \"kind-kind\" You can now use your cluster with: kubectl cluster-info --context kind-kind ... kubectl\uc744 \ud1b5\ud574 \ucd94\uac00\ub41c node \ud655\uc778 $ kubectl get nodes NAME STATUS ROLES AGE VERSION kind-control-plane Ready control-plane 10m v1.24.0 kind-worker Ready <none> 10m v1.24.0 kind-worker2 Ready <none> 10m v1.24.0 kind-worker3 Ready <none> 10m v1.24.0","title":"Kind Cluster \uc811\uc18d \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#2","text":"","title":"2. \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#nginx","text":"\ub300\ud45c\uc801\uc778 Stateless \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc778 Nginx\ub97c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0 \ubc30\ud3ec\ud558\uace0 \uc11c\ube44\uc2a4 \ubc0f \uc778\uadf8\ub808\uc2a4\uae4c\uc9c0 \uc5f0\ub3d9\ud558\uc5ec \uc811\uadfc \ud655\uc778\uc744 \ud574 \ubcf8\ub2e4. Info Service, Ingress\ub294 \uae30\ucd08\uc801\uc778 \uc124\uc815\uc73c\ub85c \uc9c4\ud589, \ucd94\ud6c4 \ubcc4\ub3c4 \uc2e4\uc2b5\uc5d0\uc11c \uc790\uc138\ud788 \ub2e4\ub8f0 \uc608\uc815 frontend-nginx.yaml kind: Pod apiVersion: v1 metadata: name: frontend labels: app: nginx spec: containers: - image: nginx name: nginx ports: - containerPort: 80 --- kind: Service apiVersion: v1 metadata: name: frontend-service spec: selector: app: nginx ports: - port: 80 --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: frontend-ingress spec: rules: - http: paths: - pathType: Prefix path: / backend: service: name: frontend-service port: number: 80 --- \uc815\uc758\ub41c \uad6c\uc131\ub300\ub85c \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec: kubectl apply -f frontend-nginx.yaml \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4 kubectl get pods -l app=nginx","title":"Nginx \uc6cc\ud06c\ub85c\ub4dc \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#_3","text":"\uc544\uc9c1 Load Balancer\ub098 Ingress Controller\ub97c \uad6c\uc131\ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 Port-Forwarding\uc744 \ud1b5\ud574\uc11c \uc9c1\uc811 \ud3ec\ud2b8\ub97c \uc5f4\uc5b4\uc11c \uc811\uadfc\ud558\uc5ec \uc811\uc18d\uc774 \uc798 \ub418\ub294\uc9c0\ub97c \ud655\uc778\ud574\uc57c \ud55c\ub2e4.","title":"\uc811\uadfc \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#port-forwarding","text":"frontend-service \uc11c\ube44\uc2a4\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ub9cc\ub4e4\uc5b4 \uc84c\ub294\uc9c0 \ud655\uc778 \ud6c4 kubectl get service/frontend-service NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE frontend-service ClusterIP 10.96.1.81 <none> 80/TCP 10m Port-Forwarding \uc124\uc815\uc744 \ud1b5\ud574\uc11c local \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc11c\ube44\uc2a4 \ud3ec\ud2b8\ub85c \uc9c1\uc811 \uc5f0\uacb0\uc744 \uc2dc\ub3c4 kubectl port-forward service/frontend-service 8080:80 Forwarding from 127.0.0.1:8080 -> 80 Forwarding from [::1]:8080 -> 80 Tip \ub85c\uceec\ud658\uacbd\uc5d0\uc11c 80\ud3ec\ud2b8\uac00 \ub2e4\ub978 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc77c \uc218 \uc788\uc73c\uba70 \ud3ec\ud2b8 \uc624\ud508 \uad8c\ud55c\uc774 \ud544\uc694\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 8080\ud3ec\ud2b8\ub85c \uc9c4\ud589 Endpoint localhost:8080 \uc811\uadfc \ud655\uc778 \ubc0f \ube0c\ub77c\uc6b0\uc838\ub85c \uae30\ubcf8 nginx \ud398\uc774\uc9c0\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ubcf4\uc774\ub294\uc9c0 \ud655\uc778","title":"Port-Forwarding\uc744 \ud1b5\ud55c \uc811\uadfc \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#ingress-nginx","text":"\ub9e4\ubc88 \ud3ec\ud2b8\ud3ec\uc6cc\ub529\uc73c\ub85c \uc811\uadfc \ud655\uc778\uc744 \ud558\ub294 \uac83\uc774 \ub9e4\uc6b0 \ubc88\uac70\ub86d\uae30 \ub54c\ubb38\uc5d0 \uc678\ubd80\uc758 \ud2b8\ub808\ud53d\uc744 \uc11c\ube44\uc2a4\ub85c \ud3ec\uc6cc\ub529 \uc2dc\ud0a4\uae30 \uc704\ud574 Ingress-Nginx\ub97c \uad6c\uc131\ud55c\ub2e4. (2. Fundamentals \ud578\uc988\uc628\uc5d0\uc11c ingress-nginx\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \ub2e4\ub8f0 \uc608\uc815) ingress-nginx \uc124\uce58 \uc9c4\ud589 kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml ingress-nginx controller\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uae30\ub3d9\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778 kubectl get pods -n ingress-nginx -l app.kubernetes.io/component=controller NAME READY STATUS RESTARTS AGE ingress-nginx-controller-5458c46d7d-qjscg 1/1 Running 0 2m \uc704 frontend-nginx.yaml\uc5d0\uc11c service \ud0c0\uc785\uc744 \uae30\ubcf8 ClusterIP\ub85c \ub450\uace0 \uc678\ubd80 \ub178\ucd9c\uc744 Ingress\ub97c \ud1b5\ud574 \ud558\uc600\uc73c\ubbc0\ub85c \ub2e4\uc74c\uacfc \uac19\uc774 Endpoint\ub97c Ingress \ub808\ubca8\uc5d0\uc11c \ud655\uc778 \uac00\ub2a5 kubectl get ingress NAME CLASS HOSTS ADDRESS PORTS AGE frontend-ingress <none> * localhost 80 68s Endpoint localhost:80 \uc811\uadfc \ud655\uc778 \ubc0f \ube0c\ub77c\uc6b0\uc838\ub85c \uae30\ubcf8 nginx \ud398\uc774\uc9c0\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ubcf4\uc774\ub294\uc9c0 \ud655\uc778","title":"(\uc635\uc158) Ingress-nginx\ub97c \uad6c\uc131 \ubc0f \uc811\uadfc \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#clean-up","text":"\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"Clean Up"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/","text":"\ud578\uc988\uc628. Helm\uc73c\ub85c Redis master-replica cluster \ud658\uacbd \uad6c\uc131 \ubc0f \ubc30\ud3ec Kind \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5 \uc774\ubc88 \uc2e4\uc2b5\uc740 redis \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 Helm\uc744 \ud1b5\ud574 master-replica cluster \uad6c\uc131\uc73c\ub85c \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc774\ub2e4. Helm\uc73c\ub85c \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\ub2e4. \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind \ud658\uacbd \ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131: \uad00\ub828 \ub9c1\ud06c Architecture 1. Helm\uc73c\ub85c Redis M-S Cluster \ud658\uacbd \uad6c\uc131 \ubc0f \ubc30\ud3ec \ub300\ud45c\uc801\uc778 cache \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc778 Redis\ub97c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0 helm\uc73c\ub85c \uc190\uc27d\uac8c Master-Replica \uad6c\uc131 \ubc30\ud3ec\ub97c \ud574 \ubcf8\ub2e4. Redis \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub294 Redis\uc5d0\uc11c \uacf5\uc2dd \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 Standalone \ud658\uacbd \uad6c\uc131\uc740 \uac04\ub2e8\ud788 \ubc30\ud3ec\ud560 \uc218 \uc788\uc73c\ub098 Cluster \uad6c\uc131\uc744 \ud574\uc57c \ud560 \uacbd\uc6b0 \ub9ac\uc18c\uc2a4\uc758 \uc5f0\uad00\uad00\uacc4\uc640 \ud074\ub7ec\uc2a4\ud130\uc758 \uc124\uc815\uac12\ub4e4\uc744 \ub9de\ud600\uc11c \ucd94\uac00\ud574 \uc8fc\uc5b4\uc57c \ud55c\ub2e4. Bitnami\uc5d0\uc11c \uc774\ub7ec\ud55c \uad6c\uc131 \uc815\ubcf4\ub97c helm\uc73c\ub85c \ud15c\ud50c\ub9bf \ubc0f \ud328\ud0a4\uc9d5\ud654 \ud574 \ub193\uc558\uc73c\uba70 \uc0ac\uc6a9\uc790\ub294 \uc6d0\ud558\ub294 \uad6c\uc131 \ubcc0\uc22b\uac12\ub9cc \uc218\uc815\ud558\uba74 Master Replica \uad6c\uc131\ubd80\ud130 Sentinel \uad6c\uc131\uae4c\uc9c0 \uc190\uc27d\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\ub2e4. 1.1 Helm Repo \ucd94\uac00 Bitnami helm repo\ub97c \ucd94\uac00 helm repo add bitnami https://charts.bitnami.com/bitnami 1.2 Redis \uad6c\uc131 \ud658\uacbd \uc124\uc815 \ub450 \ubc88\uc9f8\ub85c helm vaules \uac12 \uc6d0\ud558\ub294 \uad6c\uc131(Master\uc640 Replica Cluster)\uc5d0 \ub9de\uac8c \ubcc0\uc22b\uac12\uc744 \uc5c5\ub370\uc774\ud2b8 \ud604\uc7ac \uae30\ubcf8 \uc124\uc815 \uac12\uc774 Replication \uc774\ubbc0\ub85c architecture\uc5d0 \ub300\ud574\uc11c\ub294 \uc218\uc815 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\uba70 \uc2e4\uc2b5 \ud658\uacbd\uc5d0 \ub9de\uac8c Storage Class \uc774\ub984\uacfc \ud06c\uae30\ub9cc \uc870\uc808 \ud558\ub3c4\ub85d \ud55c\ub2e4. Tip \ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130\uc778 \uacbd\uc6b0\ub294 standard \uac00 \uae30\ubcf8 storageClass \uc774\ubbc0\ub85c \ucd94\uac00\ud560 \ud544\uc694 \uc5c6\ub2e4. \uc790\uc138\ud55c \uc815\ubcf4\uc5d0 \ub300\ud574 \uc54c\uace0 \uc2f6\ub2e4\uba74 kubectl get storageclasses.storage.k8s.io \uc744 \ud1b5\ud574\uc11c \ud655\uc778 \uac00\ub2a5\ud558\ub2e4. redis-values.yaml global: storageClass: \"standard\" master: persistence: size: 50Mi replica: persistence: size: 50Mi 1.3 \uc124\uce58 \ud574\ub2f9 \uad6c\uc131 \uc815\ubcf4\uc5d0 \ub9de\ucdb0\uc11c redis cluster \ubc30\ud3ec helm install redis-cluster bitnami/redis --namespace redis \\ --create-namespace -f redis-values.yaml \ub9cc\uc57d values \uac12\uc744 \uc5c5\ub370\uc774\ud2b8\ud55c \ud6c4 \ub2e4\uc2dc \ub9b4\ub9ac\uc988\ud574\uc57c \ud558\ub294 \uacbd\uc6b0\ub294 upgrade \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4 helm upgrade --install redis-cluster bitnami/redis \\ --namespace redis --create-namespace -f redis-values.yaml \ub2e4\uc74c\uacfc \uac19\uc774 revision\uc774 \uc62c\ub77c\uac04 \uac83\uc744 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4. NAMESPACE: redis STATUS: deployed REVISION: 2 TEST SUITE: None 2. Redis M-S Cluster \ud658\uacbd \uad6c\uc131 \ud655\uc778 2.1 \uad6c\uc131 \ud655\uc778 \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc788\uc73c\uba70 \ub2e4\uc74c\uacfc \uac19\uc774 \uc784\uc2dc redis client pod\ub97c \ud1b5\ud574 redis\uc5d0 \uc811\uadfc \ubc0f \uc124\uc815\uac12\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. # Redis Password \ud655\uc778 export REDIS_PASSWORD=$(kubectl get secret --namespace redis redis-cluster -o jsonpath=\"{.data.redis-password}\" | base64 -d) # \ud14c\uc2a4\ud2b8\uc6a9 redis-client pod \uc0dd\uc131 kubectl run --namespace redis redis-client --restart='Never' --env REDIS_PASSWORD=$REDIS_PASSWORD --image docker.io/bitnami/redis:7.0.3-debian-11-r0 --command -- sleep infinity # \ud14c\uc2a4\ud2b8\uc6a9 redis-client pod\uc5d0 \uc811\uadfc kubectl exec --tty -i redis-client \\ --namespace redis -- bash \ubc30\ud3ec\ub41c Redis \uc11c\ubc84\uc5d0 \uc811\uc18d # Redis \uc11c\ubc84(master \ud639\uc740 replicas)\uc5d0 \uc811\uc18d REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-master REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-replicas # \uc608\uc0c1 output redis-client:/$ REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-master redis-cluster-master:6379> redis-cluster-master:6379> redis-cluster-master:6379> INFO ## Server redis_version:7.0.3 redis_git_sha1:00000000 ... ## Replication role:master connected_slaves:3 slave0:ip=redis-cluster-replicas-1.,port=6379,state=online,offset=574,lag=1 slave1:ip=redis-cluster-replicas-2.,port=6379,state=online,offset=574,lag=1 slave2:ip=redis-cluster-replicas-0.,port=6379,state=online,offset=574,lag=0 master_failover_state:no-failover ... \uc704\uc758 output\uc5d0 \ud604\uc7ac \uc811\uadfc\ud55c \uc11c\ubc84\ub294 master\uc774\uace0 slave\uac00 3\ub300\uac00 \uad6c\uc131\ub41c \uac83\uc73c\ub85c \ub098\uc624\uba70 \uc2e4\uc81c\ub85c pod \uc774\ub984\uacfc \ub3d9\uc77c\ud558\uac8c \ub9e4\uce6d\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. kubectl get pods -n redis -l app.kubernetes.io/component=replica NAME READY STATUS RESTARTS AGE redis-cluster-replicas-0 1/1 Running 0 13m redis-cluster-replicas-1 1/1 Running 0 14m redis-cluster-replicas-2 1/1 Running 0 15m 2.1 Key/Value \ucd94\uac00 \ubc0f \uc870\ud68c \ud655\uc778 \uac04\ub2e8\ud788 key/value\ub97c \ucd94\uac00(master\uc5d0\uc11c\ub9cc \uac00\ub2a5)\ud558\uace0 \uc870\ud68c(master/replica \ub458 \ub2e4 \uac00\ub2a5) \ud560 \uc218 \uc788\ub2e4 redis-cluster-master:6379> SET mykey test OK redis-cluster-master:6379> redis-cluster-master:6379> KEYS * 1) \"mykey\" redis-cluster-master:6379> redis-cluster-master:6379> GET mykey \"test\" redis-cluster-master:6379> \uc815\uc0c1\uc801\uc73c\ub85c data\uac00 replication \ub418\uace0 \uc788\ub294\uc9c0 \ubcf4\uace0 \uc2f6\uc740 \uacbd\uc6b0\ub294 Replica \uc11c\ubc84\uc5d0 \ub4e4\uc5b4\uac00\uc11c GET mykey \ub97c \ud1b5\ud574 \ub611\uac19\uc740 \uac12\uc774 \ub098\uc624\ub294\uc9c0 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4. redis-client:/$ REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-replicas redis-cluster-replicas:6379> redis-cluster-replicas:6379> KEYS * 1) \"mykey\" redis-cluster-replicas:6379> GET mykey \"test\" redis-cluster-replicas:6379> Clean Up \uc2e4\uc2b5 \uc644\ub8cc \ud6c4 Redis Helm Release \uc81c\uac70 helm uninstall redis-cluster -n redis kind cluster \uc0ad\uc81c kind delete cluster","title":"\ud578\uc988\uc628. Helm\uc73c\ub85c Redis Cluster \ud658\uacbd \uad6c\uc131 \ubc0f \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#helm-redis-master-replica-cluster","text":"Kind \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5 \uc774\ubc88 \uc2e4\uc2b5\uc740 redis \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 Helm\uc744 \ud1b5\ud574 master-replica cluster \uad6c\uc131\uc73c\ub85c \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc774\ub2e4. Helm\uc73c\ub85c \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\ub2e4.","title":"\ud578\uc988\uc628. Helm\uc73c\ub85c Redis master-replica cluster \ud658\uacbd \uad6c\uc131 \ubc0f \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#_1","text":"","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#kind","text":"\ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131: \uad00\ub828 \ub9c1\ud06c","title":"Kind \ud658\uacbd"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#architecture","text":"","title":"Architecture"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#1-helm-redis-m-s-cluster","text":"\ub300\ud45c\uc801\uc778 cache \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc778 Redis\ub97c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0 helm\uc73c\ub85c \uc190\uc27d\uac8c Master-Replica \uad6c\uc131 \ubc30\ud3ec\ub97c \ud574 \ubcf8\ub2e4. Redis \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub294 Redis\uc5d0\uc11c \uacf5\uc2dd \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 Standalone \ud658\uacbd \uad6c\uc131\uc740 \uac04\ub2e8\ud788 \ubc30\ud3ec\ud560 \uc218 \uc788\uc73c\ub098 Cluster \uad6c\uc131\uc744 \ud574\uc57c \ud560 \uacbd\uc6b0 \ub9ac\uc18c\uc2a4\uc758 \uc5f0\uad00\uad00\uacc4\uc640 \ud074\ub7ec\uc2a4\ud130\uc758 \uc124\uc815\uac12\ub4e4\uc744 \ub9de\ud600\uc11c \ucd94\uac00\ud574 \uc8fc\uc5b4\uc57c \ud55c\ub2e4. Bitnami\uc5d0\uc11c \uc774\ub7ec\ud55c \uad6c\uc131 \uc815\ubcf4\ub97c helm\uc73c\ub85c \ud15c\ud50c\ub9bf \ubc0f \ud328\ud0a4\uc9d5\ud654 \ud574 \ub193\uc558\uc73c\uba70 \uc0ac\uc6a9\uc790\ub294 \uc6d0\ud558\ub294 \uad6c\uc131 \ubcc0\uc22b\uac12\ub9cc \uc218\uc815\ud558\uba74 Master Replica \uad6c\uc131\ubd80\ud130 Sentinel \uad6c\uc131\uae4c\uc9c0 \uc190\uc27d\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\ub2e4.","title":"1. Helm\uc73c\ub85c Redis M-S Cluster \ud658\uacbd \uad6c\uc131 \ubc0f \ubc30\ud3ec"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#11-helm-repo","text":"Bitnami helm repo\ub97c \ucd94\uac00 helm repo add bitnami https://charts.bitnami.com/bitnami","title":"1.1 Helm Repo \ucd94\uac00"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#12-redis","text":"\ub450 \ubc88\uc9f8\ub85c helm vaules \uac12 \uc6d0\ud558\ub294 \uad6c\uc131(Master\uc640 Replica Cluster)\uc5d0 \ub9de\uac8c \ubcc0\uc22b\uac12\uc744 \uc5c5\ub370\uc774\ud2b8 \ud604\uc7ac \uae30\ubcf8 \uc124\uc815 \uac12\uc774 Replication \uc774\ubbc0\ub85c architecture\uc5d0 \ub300\ud574\uc11c\ub294 \uc218\uc815 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\uba70 \uc2e4\uc2b5 \ud658\uacbd\uc5d0 \ub9de\uac8c Storage Class \uc774\ub984\uacfc \ud06c\uae30\ub9cc \uc870\uc808 \ud558\ub3c4\ub85d \ud55c\ub2e4. Tip \ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130\uc778 \uacbd\uc6b0\ub294 standard \uac00 \uae30\ubcf8 storageClass \uc774\ubbc0\ub85c \ucd94\uac00\ud560 \ud544\uc694 \uc5c6\ub2e4. \uc790\uc138\ud55c \uc815\ubcf4\uc5d0 \ub300\ud574 \uc54c\uace0 \uc2f6\ub2e4\uba74 kubectl get storageclasses.storage.k8s.io \uc744 \ud1b5\ud574\uc11c \ud655\uc778 \uac00\ub2a5\ud558\ub2e4. redis-values.yaml global: storageClass: \"standard\" master: persistence: size: 50Mi replica: persistence: size: 50Mi","title":"1.2 Redis \uad6c\uc131 \ud658\uacbd \uc124\uc815"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#13","text":"\ud574\ub2f9 \uad6c\uc131 \uc815\ubcf4\uc5d0 \ub9de\ucdb0\uc11c redis cluster \ubc30\ud3ec helm install redis-cluster bitnami/redis --namespace redis \\ --create-namespace -f redis-values.yaml \ub9cc\uc57d values \uac12\uc744 \uc5c5\ub370\uc774\ud2b8\ud55c \ud6c4 \ub2e4\uc2dc \ub9b4\ub9ac\uc988\ud574\uc57c \ud558\ub294 \uacbd\uc6b0\ub294 upgrade \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4 helm upgrade --install redis-cluster bitnami/redis \\ --namespace redis --create-namespace -f redis-values.yaml \ub2e4\uc74c\uacfc \uac19\uc774 revision\uc774 \uc62c\ub77c\uac04 \uac83\uc744 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4. NAMESPACE: redis STATUS: deployed REVISION: 2 TEST SUITE: None","title":"1.3 \uc124\uce58"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#2-redis-m-s-cluster","text":"","title":"2. Redis M-S Cluster \ud658\uacbd \uad6c\uc131 \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#21","text":"\ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc788\uc73c\uba70 \ub2e4\uc74c\uacfc \uac19\uc774 \uc784\uc2dc redis client pod\ub97c \ud1b5\ud574 redis\uc5d0 \uc811\uadfc \ubc0f \uc124\uc815\uac12\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. # Redis Password \ud655\uc778 export REDIS_PASSWORD=$(kubectl get secret --namespace redis redis-cluster -o jsonpath=\"{.data.redis-password}\" | base64 -d) # \ud14c\uc2a4\ud2b8\uc6a9 redis-client pod \uc0dd\uc131 kubectl run --namespace redis redis-client --restart='Never' --env REDIS_PASSWORD=$REDIS_PASSWORD --image docker.io/bitnami/redis:7.0.3-debian-11-r0 --command -- sleep infinity # \ud14c\uc2a4\ud2b8\uc6a9 redis-client pod\uc5d0 \uc811\uadfc kubectl exec --tty -i redis-client \\ --namespace redis -- bash \ubc30\ud3ec\ub41c Redis \uc11c\ubc84\uc5d0 \uc811\uc18d # Redis \uc11c\ubc84(master \ud639\uc740 replicas)\uc5d0 \uc811\uc18d REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-master REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-replicas # \uc608\uc0c1 output redis-client:/$ REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-master redis-cluster-master:6379> redis-cluster-master:6379> redis-cluster-master:6379> INFO ## Server redis_version:7.0.3 redis_git_sha1:00000000 ... ## Replication role:master connected_slaves:3 slave0:ip=redis-cluster-replicas-1.,port=6379,state=online,offset=574,lag=1 slave1:ip=redis-cluster-replicas-2.,port=6379,state=online,offset=574,lag=1 slave2:ip=redis-cluster-replicas-0.,port=6379,state=online,offset=574,lag=0 master_failover_state:no-failover ... \uc704\uc758 output\uc5d0 \ud604\uc7ac \uc811\uadfc\ud55c \uc11c\ubc84\ub294 master\uc774\uace0 slave\uac00 3\ub300\uac00 \uad6c\uc131\ub41c \uac83\uc73c\ub85c \ub098\uc624\uba70 \uc2e4\uc81c\ub85c pod \uc774\ub984\uacfc \ub3d9\uc77c\ud558\uac8c \ub9e4\uce6d\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. kubectl get pods -n redis -l app.kubernetes.io/component=replica NAME READY STATUS RESTARTS AGE redis-cluster-replicas-0 1/1 Running 0 13m redis-cluster-replicas-1 1/1 Running 0 14m redis-cluster-replicas-2 1/1 Running 0 15m","title":"2.1 \uad6c\uc131 \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#21-keyvalue","text":"\uac04\ub2e8\ud788 key/value\ub97c \ucd94\uac00(master\uc5d0\uc11c\ub9cc \uac00\ub2a5)\ud558\uace0 \uc870\ud68c(master/replica \ub458 \ub2e4 \uac00\ub2a5) \ud560 \uc218 \uc788\ub2e4 redis-cluster-master:6379> SET mykey test OK redis-cluster-master:6379> redis-cluster-master:6379> KEYS * 1) \"mykey\" redis-cluster-master:6379> redis-cluster-master:6379> GET mykey \"test\" redis-cluster-master:6379> \uc815\uc0c1\uc801\uc73c\ub85c data\uac00 replication \ub418\uace0 \uc788\ub294\uc9c0 \ubcf4\uace0 \uc2f6\uc740 \uacbd\uc6b0\ub294 Replica \uc11c\ubc84\uc5d0 \ub4e4\uc5b4\uac00\uc11c GET mykey \ub97c \ud1b5\ud574 \ub611\uac19\uc740 \uac12\uc774 \ub098\uc624\ub294\uc9c0 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4. redis-client:/$ REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-replicas redis-cluster-replicas:6379> redis-cluster-replicas:6379> KEYS * 1) \"mykey\" redis-cluster-replicas:6379> GET mykey \"test\" redis-cluster-replicas:6379>","title":"2.1 Key/Value \ucd94\uac00 \ubc0f \uc870\ud68c \ud655\uc778"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#clean-up","text":"\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 Redis Helm Release \uc81c\uac70 helm uninstall redis-cluster -n redis kind cluster \uc0ad\uc81c kind delete cluster","title":"Clean Up"},{"location":"hello-kubernetes/section02/configmap-secret/","text":"2.6 ConfigMap & Secret \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uac1c\ubc1c\ud560 \ub54c, \ud658\uacbd\ubcc4(\uac1c\ubc1c\ud658\uacbd, \ud14c\uc2a4\ud2b8\ud658\uacbd, \uc6b4\uc601\ud658\uacbd \ub4f1)\ub85c \uc124\uc815 \uc815\ubcf4\ub97c \ub2e4\ub974\uac8c \ub9cc\ub4e4\uc5b4 \ub2e4\ub8e8\ub294 \uac83\uc740 \uc77c\ubc18\uc801\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc758 \uacbd\uc6b0 \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud558\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc811\uadfc\ud558\uae30 \uc704\ud55c endpoint \uc815\ubcf4\uac00 \uc788\uc744 \uac83\uc774\ub2e4. \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc774\ub7f0 \ud658\uacbd \uc815\ubcf4\ub97c \uc9c1\uc811 \uac00\uc9c0\uace0 \uc788\uc744 \uc218\ub3c4 \uc788\uaca0\uc9c0\ub9cc, \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 ConfigMap \uacfc Secret \uc774\ub77c\ub294 \uc624\ube0c\uc81d\ud2b8\ub97c \ud65c\uc6a9\ud558\uc5ec \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ucf54\ub4dc\uc640 \uc124\uc815 \uc815\ubcf4\ub97c \ubd84\ub9ac\ud558\uc5ec \uc124\uc815\uc5d0 \ub300\ud55c \uacb0\ud569\ub3c4\ub97c \ub0ae\ucd9c \uc218 \uc788\ub2e4. ConfigMap ConfigMap\uc740 \uc124\uc815 \uc815\ubcf4\ub97c \ud558\ub098 \ud639\uc740 \uc774\uc0c1\uc758 key/value \uc30d\uc73c\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\uc73c\uba70, value\ub294 \ub2e8\uc77c \uac12\uc774 \ub420 \uc218\ub3c4 \uc788\uace0, \ud30c\uc77c\uc758 \ub0b4\uc6a9\uc774 \ub420 \uc218\ub3c4 \uc788\ub2e4. ConfigMap manifest\uc758 \uc608\uc2dc\ub97c \ubcf4\uc790. apiVersion: v1 kind: ConfigMap metadata: name: sample-configs data: # \uc544\ub798\uc640 \uac19\uc774 \uac04\ub2e8\ud55c key/value\ub85c \uc815\uc758\ud560 \uc218 \uc788\ub2e4. default_ttl: \"30\" say_hello: \"Hi!\" # \ub610\ub294, \uc124\uc815 file \ub0b4\uc6a9\uc744 value\ub85c \uc815\uc758\ud560 \uc218\ub3c4 \uc788\ub2e4. sample-nginx.conf: | server { listen 80; index index.html; server_name cloudacode.com; location / { root /cloudacode/static/ } location /api { proxy_pass https://api.cloudacode.internal } } Pod \uc5d0 ConfigMap \uc815\ubcf4\ub97c \uc804\ub2ec\ud558\uae30 \uc774\ub807\uac8c \uc815\uc758\ub41c ConfigMap\uc740 Pod\uc5d0 \ub2e4\uc591\ud55c \ubc29\ubc95\uc73c\ub85c \uc804\ub2ec\ub420 \uc218 \uc788\ub2e4. \ud658\uacbd \ubcc0\uc218\ub85c \uc815\uc758\ud558\uae30 Command-line Argument \ub85c \uc804\ub2ec\ud558\uae30 Volume\uc73c\ub85c \ub9cc\ub4e4\uc5b4 \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac\ub85c \ub9c8\uc6b4\ud2b8\ud558\uae30 ConfigMap\uc758 \uc815\ubcf4\ub97c \ud658\uacbd\ubcc0\uc218\ub85c \uc815\uc758\ud558\uae30 \uc774\uc804\uc5d0 \uc124\uba85\ud55c ConfigMap \uc608\uc2dc\uc5d0 \uc788\ub294 \uc815\ubcf4\uc758 \uc77c\ubd80\ub97c Pod\ub97c \uc0dd\uc131\ud560 \ub54c \ud658\uacbd \ubcc0\uc218\ub85c \uc77d\ub294 \ubc29\ubc95\uc774\ub2e4. apiVersion: v1 kind: Pod metadata: name: sample spec: containers: - image: busybox env: - name: DEFAULT_TTL # \ud658\uacbd\ubcc0\uc218 \uc774\ub984. \uc544\ub798 ConfigMap key\uc5d0 \ud574\ub2f9\ud558\ub294 value\ub97c \uac00\uc9c4\ub2e4. valueFrom: configMapKeyRef: name: sample-configs # ConfigMap\uc758 \uc774\ub984 key: default_ttl # ConfigMap\uc5d0 \uc815\uc758\ub41c key ConfigMap\uc758 \uc815\ubcf4\ub97c Command-line Argument\ub85c \uc804\ub2ec\ud558\uae30 \uc774\uc804 \ud658\uacbd\ubcc0\uc218\ub85c \uc77d\uc5b4\uc628 \uac12\uc744, $(VALUE_NAME) \uacfc \uac19\uc740 \ubb38\ubc95\uc744 \uc774\uc6a9\ud574 Command-line Argument\ub85c \uc804\ub2ec\ud560 \uc218\ub3c4 \uc788\ub2e4. apiVersion: v1 kind: Pod metadata: name: sample spec: containers: - image: busybox command: [ \"/bin/sh\", \"-c\", \"echo $(WELCOME_MESSAGE)\"] env: - name: WELCOME_MESSAGE valueFrom: configMapKeyRef: name: sample-configs key: say_hello ConfigMap\uc758 \uc815\ubcf4\ub97c \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac\ub85c \ub9c8\uc6b4\ud2b8\ud558\uae30 \uc774 \ubc29\ubc95\uc740 \uac00\uc7a5 \ud754\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 ConfigMap\uc744 \uc804\ub2ec\ud558\ub294 \ubc29\ubc95 \uc911 \ud558\ub098\ub85c, \uc6f9\uc11c\ubc84\uc758 \uc124\uc815\ud30c\uc77c \ub4f1\uc744 \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac \ud615\uc2dd\uc73c\ub85c Pod\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4. apiVersion: apps/v1 kind: Pod metadata: name: nginx spec: containers: - name: nginx image: nginx ports: - containerPort: 80 volumeMounts: - name: nginx-vhost-config mountPath: /etc/nginx/conf.d readOnly: true volumes: - name: nginx-vhost-config configMap: name: sample-configs items: - key: \"sample-nginx.conf\" path: \"sample-nginx.conf\" \uc774\ub807\uac8c \uc120\uc5b8\ub41c Pod\uc5d0\uc11c\ub294 /etc/nginx/conf.d/ \uacbd\ub85c\uc5d0 sample-nginx.conf \ud30c\uc77c\uc774 \ub9c8\uc6b4\ud2b8\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. ConfigMap \uc758 \ubcc0\uacbd \uc0ac\ud56d \ubc18\uc601 \uc0dd\uc131\ub418\uc5b4\uc788\ub294 ConfigMap\uc758 \ub0b4\uc6a9\uc744 \ubc14\uafb8\ub294 \uacbd\uc6b0, ConfigMap\uc744 Volume\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ud574\uc11c \uc0ac\uc6a9\ud558\ub294 Pod\uc5d0\ub3c4 \uc5c5\ub370\uc774\ud2b8\ub41c \uc124\uc815\uc744 \uc77d\uc744 \uc218 \uc788\ub2e4. \ub2e4\ub9cc ConfigMap\uc758 \ubcc0\uacbd\ub41c \uc815\ubcf4\ub97c \uc5c5\ub370\uc774\ud2b8 \ubc1b\ub294\ub370\ub294 \uc544\ub798\uc640 \uac19\uc740 \uc81c\uc57d\uc0ac\ud56d\uc774 \uc788\uc744 \uc218 \uc788\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub294 kubelet \uc758 \ub3d9\uae30\ud654 \uc2dc\uac04 \ud639\uc740 \uce90\uc2dc \uc9c0\uc5f0 \uc124\uc815\ub4f1 \ub9cc\ud07c \uac78\ub9b4 \uc218 \uc788\ub2e4. ConfigMap \uc815\ubcf4\ub97c subPath\ub97c \uc0ac\uc6a9\ud558\uc5ec volume \ub9c8\uc6b4\ud2b8 \uc2dc \uc5c5\ub370\uc774\ud2b8\ub97c \ubc1b\uc9c0 \ubabb \ud55c\ub2e4. \ud658\uacbd\ubcc0\uc218\ub85c \uc77d\uc5b4\uc628 ConfigMap \uc815\ubcf4 \uc5ed\uc2dc \uc5c5\ub370\uc774\ud2b8\ub97c \ubc1b\uc9c0 \ubabb \ud55c\ub2e4. Immutable ConfigMap \uacbd\uc6b0\uc5d0 \ub530\ub77c \ud55c\ubc88 \uc0dd\uc131\ub41c ConfigMap\uc744 \ub0b4\uc6a9 \ubcc0\uacbd\uc5c6\uc774 \uc0dd\uc131/\uad00\ub9ac\ud558\ub294 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud560 \uc218\ub3c4 \uc788\ub2e4. \uc774 \uacbd\uc6b0, immutable \ud544\ub4dc\ub97c true \ub85c \uc124\uc815\ud558\uc5ec \ub0b4\uc6a9\uc774 \ubcc0\uacbd\ub420 \uc218 \uc5c6\ub294 ConfigMap\uc744 \ub9cc\ub4e4 \uc218 \uc788\ub2e4. \uc774\ub807\uac8c \uc0dd\uc131\ub41c ConfigMap\uc740, * kubelet\uc774 \uac10\uc2dc\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c kube apiserver\uc758 \ubd80\ud558\ub97c \uc904\uc77c \uc218 \uc788\ub2e4. * \uc6b0\ubc1c\uc801\uc778 ConfigMap \ubcc0\uacbd\uc774 \ubaa8\ub4e0 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\ub3c4\ub85d \ud560 \uc218 \uc788\ub2e4. Info Nginx\uc640 \uac19\uc740 \uc6f9\uc11c\ubc84\uc758 \uc124\uc815 \ud30c\uc77c\uc758 \uacbd\uc6b0, \uc124\uc815\uc758 \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud55c\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \uc6f9\uc11c\ubc84\uc5d0 \uc9c1\uc811 \uba85\ub839\uc744 \ud1b5\ud574 \uc124\uc815\uc744 \ub2e4\uc2dc \uc77d\ub3c4\ub85d \ud574\uc57c \ubc18\uc601\uc774 \ub41c\ub2e4. Pod\ub85c \uad6c\uc131\ub41c \uc6f9\uc11c\ubc84\ub77c\uba74 ConfigMap\uc73c\ub85c \uc0dd\uc131\ub41c \uc124\uc815 \ud30c\uc77c\uc774 \ubcc0\uacbd\ub418\uc5c8\uc744 \ub54c, Pod\ub97c \uc7ac\uc0dd\uc131\ud558\uc5ec \uc124\uc815\uc744 \ubc18\uc601\ud558\ub294\uac83\uc774 \ud6a8\uc728\uc801\uc77c \uc218 \uc788\ub2e4. \uc774\ub7f0 \uacbd\uc6b0\ub77c\uba74, ConfigMap\uc758 \ubcc0\uacbd\uc744 \uac10\uc2dc\ud558\uc9c0 \uc54a\ub294 Immutable ConfigMap \uc73c\ub85c \ub9cc\ub4e4\uc5b4 \uad00\ub9ac\ud574\ubcfc \uc218 \uc788\ub2e4. ConfigMap \uc758 \uc81c\uc57d\uc0ac\ud56d ConfigMap\uc758 \ud06c\uae30\ub294 1MiB \ub85c \uc81c\ud55c\ub41c\ub2e4. Secret Secret\uc740 \ud328\uc2a4\uc6cc\ub4dc, API token \ub4f1\uacfc \uac19\uc740 \uc720\ucd9c\uc5d0 \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud55c \ubaa9\uc801\uc73c\ub85c \uc124\uacc4\ub418\uc5b4\uc788\ub2e4. Application \uc5d0\uc11c \ucf54\ub4dc\uc5d0 \uc9c1\uc811 \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uc9c0 \uc54a\uace0, Secret\uc744 \uc0ac\uc6a9\ud558\uc5ec Pod\uac00 \uc0dd\uc131\ub418\ub294 \uc2dc\uc810\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4. Warning Secret \ub9ac\uc18c\uc2a4\uc758 \uae30\ubcf8 \uc800\uc7a5\uc740 etcd\uc5d0 \uc554\ud638\ud654\ud558\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\ub85c \uc800\uc7a5\ud55c\ub2e4. Secret \ub9ac\uc18c\uc2a4\ub97c \uc554\ud638\ud654\ud558\uc5ec \uc800\uc7a5\ud558\ub824\uba74 \uc800\uc7a5 \uc2dc \uc554\ud638\ud654(Encryption at rest)\ub97c \ud65c\uc131\ud654\ud558\uace0, Encryption Provider \ub97c \ud65c\uc6a9\ud574\uc11c \ub370\uc774\ud130\uc5d0 \ub300\ud574 \uc554\ud638\ud654\ub97c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4. Secret\uc740 data \ud639\uc740 stringData \ud544\ub4dc\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. data \ub85c \uc800\uc7a5\ud558\ub294 \uacbd\uc6b0, key/value \uc911 value\ub97c base64 \ub85c \uc778\ucf54\ub529 \ud574\uc57c \ud55c\ub2e4. Secret \ud0c0\uc785 Built-in Type Usage Opaque \uc784\uc758\uc774 \uc0ac\uc6a9\uc790 \uc9c0\uc815 \ub370\uc774\ud130 kubernetes.io/service-account-token Service Account \ud1a0\ud070 kubernetes.io/dockercfg \uc9c1\ub82c\ud654\ub41c ./dockercfg \ud30c\uc77c kubernetes.io/dockerconfigjson \uc9c1\ub82c\ud654\ub41c ./docker/config.json \ud30c\uc77c kubernetes.io/basic-auth Basic Authentication \uc6a9 credential kubernetes.io/ssh-auth SSH Authentication \uc6a9 credential kubernetes.io/tls TLS \uc778\uc99d\uc11c \ud615\ud0dc\uc758 \ub370\uc774\ud130 bootstrap.kubernetes.io/token \ubd80\ud2b8\uc2a4\ud2b8\ub7a9 \ud1a0\ud070 \ub370\uc774\ud130 Secret \uc0ac\uc6a9 \uc608\uc2dc Secret \uc740 \uc544\ub798\uc640 \uac19\uc740 \ud615\uc2dd\uc73c\ub85c \uc815\uc758\ud560 \uc218 \uc788\ub2e4. apiVersion: v1 kind: Secret metadata: name: db-account type: Opaque data: DB_ACCESS_ID: aGVsbG93b3JsZAo= DB_ACCESS_PW: dGhpc2lzcGFzc3dvcmQK Pod\uc5d0\uc11c \uc704\uc5d0 \uc815\uc758\ub41c Secret \uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \uc544\ub798\uc640 \uac19\uc774 \uc0ac\uc6a9\uc774 \uac00\ub2a5\ud558\ub2e4. Secret\uc744 envFrom \uad6c\uc808\uc744 \uc774\uc6a9\ud574 Pod\uc758 \uc0dd\uc131 \uc2dc\uc810\uc5d0 Environment Variable\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. apiVersion: v1 kind: Pod metadata: name: secret-test-pod spec: containers: - name: test image: k8s.gcr.io/busybox command: [ \"/bin/sh\", \"-c\", \"env\" ] envFrom: - secretRef: name: db-account restartPolicy: Never Secret \ubcf4\ud638 Kubernetes \uc5d0\uc11c\ub294 Secret\uc744 \ud544\uc694\ub85c\ud558\ub294 Pod\uac00 \uc788\ub294 Node\uc5d0\ub9cc Secret \uc815\ubcf4\uac00 \uc804\ub2ec\ub418\ub3c4\ub85d \uc124\uacc4\ub418\uc5b4\uc788\ub2e4. Kubelet\uc740 Secret\uc744 Node\uc758 tmpfs (\uac00\uc0c1\uba54\ubaa8\ub9ac \uacf5\uac04)\uc5d0 \uc800\uc7a5\ud558\uc5ec disk\uc5d0 \uc601\uad6c\uc801\uc73c\ub85c \uae30\ub85d\ub418\uc9c0 \uc54a\ub3c4\ub85d \ud55c\ub2e4. Pod\uc5d0 2\uac1c \uc774\uc0c1\uc758 Container\uac00 \uc788\ub294 \uacbd\uc6b0, \uba85\uc2dc\uc801\uc73c\ub85c mount \ud558\ub294 container\uc5d0\uc11c\ub9cc secret\uc744 \uc870\ud68c\ud560 \uc218 \uc788\ub2e4.","title":"2.6 ConfigMap & Secret"},{"location":"hello-kubernetes/section02/configmap-secret/#26-configmap-secret","text":"\uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uac1c\ubc1c\ud560 \ub54c, \ud658\uacbd\ubcc4(\uac1c\ubc1c\ud658\uacbd, \ud14c\uc2a4\ud2b8\ud658\uacbd, \uc6b4\uc601\ud658\uacbd \ub4f1)\ub85c \uc124\uc815 \uc815\ubcf4\ub97c \ub2e4\ub974\uac8c \ub9cc\ub4e4\uc5b4 \ub2e4\ub8e8\ub294 \uac83\uc740 \uc77c\ubc18\uc801\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc758 \uacbd\uc6b0 \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud558\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc811\uadfc\ud558\uae30 \uc704\ud55c endpoint \uc815\ubcf4\uac00 \uc788\uc744 \uac83\uc774\ub2e4. \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc774\ub7f0 \ud658\uacbd \uc815\ubcf4\ub97c \uc9c1\uc811 \uac00\uc9c0\uace0 \uc788\uc744 \uc218\ub3c4 \uc788\uaca0\uc9c0\ub9cc, \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 ConfigMap \uacfc Secret \uc774\ub77c\ub294 \uc624\ube0c\uc81d\ud2b8\ub97c \ud65c\uc6a9\ud558\uc5ec \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ucf54\ub4dc\uc640 \uc124\uc815 \uc815\ubcf4\ub97c \ubd84\ub9ac\ud558\uc5ec \uc124\uc815\uc5d0 \ub300\ud55c \uacb0\ud569\ub3c4\ub97c \ub0ae\ucd9c \uc218 \uc788\ub2e4.","title":"2.6 ConfigMap &amp; Secret"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap","text":"ConfigMap\uc740 \uc124\uc815 \uc815\ubcf4\ub97c \ud558\ub098 \ud639\uc740 \uc774\uc0c1\uc758 key/value \uc30d\uc73c\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\uc73c\uba70, value\ub294 \ub2e8\uc77c \uac12\uc774 \ub420 \uc218\ub3c4 \uc788\uace0, \ud30c\uc77c\uc758 \ub0b4\uc6a9\uc774 \ub420 \uc218\ub3c4 \uc788\ub2e4. ConfigMap manifest\uc758 \uc608\uc2dc\ub97c \ubcf4\uc790. apiVersion: v1 kind: ConfigMap metadata: name: sample-configs data: # \uc544\ub798\uc640 \uac19\uc774 \uac04\ub2e8\ud55c key/value\ub85c \uc815\uc758\ud560 \uc218 \uc788\ub2e4. default_ttl: \"30\" say_hello: \"Hi!\" # \ub610\ub294, \uc124\uc815 file \ub0b4\uc6a9\uc744 value\ub85c \uc815\uc758\ud560 \uc218\ub3c4 \uc788\ub2e4. sample-nginx.conf: | server { listen 80; index index.html; server_name cloudacode.com; location / { root /cloudacode/static/ } location /api { proxy_pass https://api.cloudacode.internal } }","title":"ConfigMap"},{"location":"hello-kubernetes/section02/configmap-secret/#pod-configmap","text":"\uc774\ub807\uac8c \uc815\uc758\ub41c ConfigMap\uc740 Pod\uc5d0 \ub2e4\uc591\ud55c \ubc29\ubc95\uc73c\ub85c \uc804\ub2ec\ub420 \uc218 \uc788\ub2e4. \ud658\uacbd \ubcc0\uc218\ub85c \uc815\uc758\ud558\uae30 Command-line Argument \ub85c \uc804\ub2ec\ud558\uae30 Volume\uc73c\ub85c \ub9cc\ub4e4\uc5b4 \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac\ub85c \ub9c8\uc6b4\ud2b8\ud558\uae30","title":"Pod \uc5d0 ConfigMap \uc815\ubcf4\ub97c \uc804\ub2ec\ud558\uae30"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_1","text":"\uc774\uc804\uc5d0 \uc124\uba85\ud55c ConfigMap \uc608\uc2dc\uc5d0 \uc788\ub294 \uc815\ubcf4\uc758 \uc77c\ubd80\ub97c Pod\ub97c \uc0dd\uc131\ud560 \ub54c \ud658\uacbd \ubcc0\uc218\ub85c \uc77d\ub294 \ubc29\ubc95\uc774\ub2e4. apiVersion: v1 kind: Pod metadata: name: sample spec: containers: - image: busybox env: - name: DEFAULT_TTL # \ud658\uacbd\ubcc0\uc218 \uc774\ub984. \uc544\ub798 ConfigMap key\uc5d0 \ud574\ub2f9\ud558\ub294 value\ub97c \uac00\uc9c4\ub2e4. valueFrom: configMapKeyRef: name: sample-configs # ConfigMap\uc758 \uc774\ub984 key: default_ttl # ConfigMap\uc5d0 \uc815\uc758\ub41c key","title":"ConfigMap\uc758 \uc815\ubcf4\ub97c \ud658\uacbd\ubcc0\uc218\ub85c \uc815\uc758\ud558\uae30"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap-command-line-argument","text":"\uc774\uc804 \ud658\uacbd\ubcc0\uc218\ub85c \uc77d\uc5b4\uc628 \uac12\uc744, $(VALUE_NAME) \uacfc \uac19\uc740 \ubb38\ubc95\uc744 \uc774\uc6a9\ud574 Command-line Argument\ub85c \uc804\ub2ec\ud560 \uc218\ub3c4 \uc788\ub2e4. apiVersion: v1 kind: Pod metadata: name: sample spec: containers: - image: busybox command: [ \"/bin/sh\", \"-c\", \"echo $(WELCOME_MESSAGE)\"] env: - name: WELCOME_MESSAGE valueFrom: configMapKeyRef: name: sample-configs key: say_hello","title":"ConfigMap\uc758 \uc815\ubcf4\ub97c Command-line Argument\ub85c \uc804\ub2ec\ud558\uae30"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_2","text":"\uc774 \ubc29\ubc95\uc740 \uac00\uc7a5 \ud754\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 ConfigMap\uc744 \uc804\ub2ec\ud558\ub294 \ubc29\ubc95 \uc911 \ud558\ub098\ub85c, \uc6f9\uc11c\ubc84\uc758 \uc124\uc815\ud30c\uc77c \ub4f1\uc744 \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac \ud615\uc2dd\uc73c\ub85c Pod\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4. apiVersion: apps/v1 kind: Pod metadata: name: nginx spec: containers: - name: nginx image: nginx ports: - containerPort: 80 volumeMounts: - name: nginx-vhost-config mountPath: /etc/nginx/conf.d readOnly: true volumes: - name: nginx-vhost-config configMap: name: sample-configs items: - key: \"sample-nginx.conf\" path: \"sample-nginx.conf\" \uc774\ub807\uac8c \uc120\uc5b8\ub41c Pod\uc5d0\uc11c\ub294 /etc/nginx/conf.d/ \uacbd\ub85c\uc5d0 sample-nginx.conf \ud30c\uc77c\uc774 \ub9c8\uc6b4\ud2b8\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.","title":"ConfigMap\uc758 \uc815\ubcf4\ub97c \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac\ub85c \ub9c8\uc6b4\ud2b8\ud558\uae30"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_3","text":"\uc0dd\uc131\ub418\uc5b4\uc788\ub294 ConfigMap\uc758 \ub0b4\uc6a9\uc744 \ubc14\uafb8\ub294 \uacbd\uc6b0, ConfigMap\uc744 Volume\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ud574\uc11c \uc0ac\uc6a9\ud558\ub294 Pod\uc5d0\ub3c4 \uc5c5\ub370\uc774\ud2b8\ub41c \uc124\uc815\uc744 \uc77d\uc744 \uc218 \uc788\ub2e4. \ub2e4\ub9cc ConfigMap\uc758 \ubcc0\uacbd\ub41c \uc815\ubcf4\ub97c \uc5c5\ub370\uc774\ud2b8 \ubc1b\ub294\ub370\ub294 \uc544\ub798\uc640 \uac19\uc740 \uc81c\uc57d\uc0ac\ud56d\uc774 \uc788\uc744 \uc218 \uc788\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub294 kubelet \uc758 \ub3d9\uae30\ud654 \uc2dc\uac04 \ud639\uc740 \uce90\uc2dc \uc9c0\uc5f0 \uc124\uc815\ub4f1 \ub9cc\ud07c \uac78\ub9b4 \uc218 \uc788\ub2e4. ConfigMap \uc815\ubcf4\ub97c subPath\ub97c \uc0ac\uc6a9\ud558\uc5ec volume \ub9c8\uc6b4\ud2b8 \uc2dc \uc5c5\ub370\uc774\ud2b8\ub97c \ubc1b\uc9c0 \ubabb \ud55c\ub2e4. \ud658\uacbd\ubcc0\uc218\ub85c \uc77d\uc5b4\uc628 ConfigMap \uc815\ubcf4 \uc5ed\uc2dc \uc5c5\ub370\uc774\ud2b8\ub97c \ubc1b\uc9c0 \ubabb \ud55c\ub2e4.","title":"ConfigMap \uc758 \ubcc0\uacbd \uc0ac\ud56d \ubc18\uc601"},{"location":"hello-kubernetes/section02/configmap-secret/#immutable-configmap","text":"\uacbd\uc6b0\uc5d0 \ub530\ub77c \ud55c\ubc88 \uc0dd\uc131\ub41c ConfigMap\uc744 \ub0b4\uc6a9 \ubcc0\uacbd\uc5c6\uc774 \uc0dd\uc131/\uad00\ub9ac\ud558\ub294 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud560 \uc218\ub3c4 \uc788\ub2e4. \uc774 \uacbd\uc6b0, immutable \ud544\ub4dc\ub97c true \ub85c \uc124\uc815\ud558\uc5ec \ub0b4\uc6a9\uc774 \ubcc0\uacbd\ub420 \uc218 \uc5c6\ub294 ConfigMap\uc744 \ub9cc\ub4e4 \uc218 \uc788\ub2e4. \uc774\ub807\uac8c \uc0dd\uc131\ub41c ConfigMap\uc740, * kubelet\uc774 \uac10\uc2dc\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c kube apiserver\uc758 \ubd80\ud558\ub97c \uc904\uc77c \uc218 \uc788\ub2e4. * \uc6b0\ubc1c\uc801\uc778 ConfigMap \ubcc0\uacbd\uc774 \ubaa8\ub4e0 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\ub3c4\ub85d \ud560 \uc218 \uc788\ub2e4. Info Nginx\uc640 \uac19\uc740 \uc6f9\uc11c\ubc84\uc758 \uc124\uc815 \ud30c\uc77c\uc758 \uacbd\uc6b0, \uc124\uc815\uc758 \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud55c\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \uc6f9\uc11c\ubc84\uc5d0 \uc9c1\uc811 \uba85\ub839\uc744 \ud1b5\ud574 \uc124\uc815\uc744 \ub2e4\uc2dc \uc77d\ub3c4\ub85d \ud574\uc57c \ubc18\uc601\uc774 \ub41c\ub2e4. Pod\ub85c \uad6c\uc131\ub41c \uc6f9\uc11c\ubc84\ub77c\uba74 ConfigMap\uc73c\ub85c \uc0dd\uc131\ub41c \uc124\uc815 \ud30c\uc77c\uc774 \ubcc0\uacbd\ub418\uc5c8\uc744 \ub54c, Pod\ub97c \uc7ac\uc0dd\uc131\ud558\uc5ec \uc124\uc815\uc744 \ubc18\uc601\ud558\ub294\uac83\uc774 \ud6a8\uc728\uc801\uc77c \uc218 \uc788\ub2e4. \uc774\ub7f0 \uacbd\uc6b0\ub77c\uba74, ConfigMap\uc758 \ubcc0\uacbd\uc744 \uac10\uc2dc\ud558\uc9c0 \uc54a\ub294 Immutable ConfigMap \uc73c\ub85c \ub9cc\ub4e4\uc5b4 \uad00\ub9ac\ud574\ubcfc \uc218 \uc788\ub2e4.","title":"Immutable ConfigMap"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_4","text":"ConfigMap\uc758 \ud06c\uae30\ub294 1MiB \ub85c \uc81c\ud55c\ub41c\ub2e4.","title":"ConfigMap \uc758 \uc81c\uc57d\uc0ac\ud56d"},{"location":"hello-kubernetes/section02/configmap-secret/#secret","text":"Secret\uc740 \ud328\uc2a4\uc6cc\ub4dc, API token \ub4f1\uacfc \uac19\uc740 \uc720\ucd9c\uc5d0 \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud55c \ubaa9\uc801\uc73c\ub85c \uc124\uacc4\ub418\uc5b4\uc788\ub2e4. Application \uc5d0\uc11c \ucf54\ub4dc\uc5d0 \uc9c1\uc811 \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uc9c0 \uc54a\uace0, Secret\uc744 \uc0ac\uc6a9\ud558\uc5ec Pod\uac00 \uc0dd\uc131\ub418\ub294 \uc2dc\uc810\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4. Warning Secret \ub9ac\uc18c\uc2a4\uc758 \uae30\ubcf8 \uc800\uc7a5\uc740 etcd\uc5d0 \uc554\ud638\ud654\ud558\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\ub85c \uc800\uc7a5\ud55c\ub2e4. Secret \ub9ac\uc18c\uc2a4\ub97c \uc554\ud638\ud654\ud558\uc5ec \uc800\uc7a5\ud558\ub824\uba74 \uc800\uc7a5 \uc2dc \uc554\ud638\ud654(Encryption at rest)\ub97c \ud65c\uc131\ud654\ud558\uace0, Encryption Provider \ub97c \ud65c\uc6a9\ud574\uc11c \ub370\uc774\ud130\uc5d0 \ub300\ud574 \uc554\ud638\ud654\ub97c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4. Secret\uc740 data \ud639\uc740 stringData \ud544\ub4dc\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. data \ub85c \uc800\uc7a5\ud558\ub294 \uacbd\uc6b0, key/value \uc911 value\ub97c base64 \ub85c \uc778\ucf54\ub529 \ud574\uc57c \ud55c\ub2e4.","title":"Secret"},{"location":"hello-kubernetes/section02/configmap-secret/#secret_1","text":"Built-in Type Usage Opaque \uc784\uc758\uc774 \uc0ac\uc6a9\uc790 \uc9c0\uc815 \ub370\uc774\ud130 kubernetes.io/service-account-token Service Account \ud1a0\ud070 kubernetes.io/dockercfg \uc9c1\ub82c\ud654\ub41c ./dockercfg \ud30c\uc77c kubernetes.io/dockerconfigjson \uc9c1\ub82c\ud654\ub41c ./docker/config.json \ud30c\uc77c kubernetes.io/basic-auth Basic Authentication \uc6a9 credential kubernetes.io/ssh-auth SSH Authentication \uc6a9 credential kubernetes.io/tls TLS \uc778\uc99d\uc11c \ud615\ud0dc\uc758 \ub370\uc774\ud130 bootstrap.kubernetes.io/token \ubd80\ud2b8\uc2a4\ud2b8\ub7a9 \ud1a0\ud070 \ub370\uc774\ud130","title":"Secret \ud0c0\uc785"},{"location":"hello-kubernetes/section02/configmap-secret/#secret_2","text":"Secret \uc740 \uc544\ub798\uc640 \uac19\uc740 \ud615\uc2dd\uc73c\ub85c \uc815\uc758\ud560 \uc218 \uc788\ub2e4. apiVersion: v1 kind: Secret metadata: name: db-account type: Opaque data: DB_ACCESS_ID: aGVsbG93b3JsZAo= DB_ACCESS_PW: dGhpc2lzcGFzc3dvcmQK Pod\uc5d0\uc11c \uc704\uc5d0 \uc815\uc758\ub41c Secret \uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \uc544\ub798\uc640 \uac19\uc774 \uc0ac\uc6a9\uc774 \uac00\ub2a5\ud558\ub2e4. Secret\uc744 envFrom \uad6c\uc808\uc744 \uc774\uc6a9\ud574 Pod\uc758 \uc0dd\uc131 \uc2dc\uc810\uc5d0 Environment Variable\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. apiVersion: v1 kind: Pod metadata: name: secret-test-pod spec: containers: - name: test image: k8s.gcr.io/busybox command: [ \"/bin/sh\", \"-c\", \"env\" ] envFrom: - secretRef: name: db-account restartPolicy: Never","title":"Secret \uc0ac\uc6a9 \uc608\uc2dc"},{"location":"hello-kubernetes/section02/configmap-secret/#secret_3","text":"Kubernetes \uc5d0\uc11c\ub294 Secret\uc744 \ud544\uc694\ub85c\ud558\ub294 Pod\uac00 \uc788\ub294 Node\uc5d0\ub9cc Secret \uc815\ubcf4\uac00 \uc804\ub2ec\ub418\ub3c4\ub85d \uc124\uacc4\ub418\uc5b4\uc788\ub2e4. Kubelet\uc740 Secret\uc744 Node\uc758 tmpfs (\uac00\uc0c1\uba54\ubaa8\ub9ac \uacf5\uac04)\uc5d0 \uc800\uc7a5\ud558\uc5ec disk\uc5d0 \uc601\uad6c\uc801\uc73c\ub85c \uae30\ub85d\ub418\uc9c0 \uc54a\ub3c4\ub85d \ud55c\ub2e4. Pod\uc5d0 2\uac1c \uc774\uc0c1\uc758 Container\uac00 \uc788\ub294 \uacbd\uc6b0, \uba85\uc2dc\uc801\uc73c\ub85c mount \ud558\ub294 container\uc5d0\uc11c\ub9cc secret\uc744 \uc870\ud68c\ud560 \uc218 \uc788\ub2e4.","title":"Secret \ubcf4\ud638"},{"location":"hello-kubernetes/section02/deployment-replicaset/","text":"2.4 Deployment & ReplicaSet Pod \ub9ac\uc18c\uc2a4\ub97c \uc9c1\uc811 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \ubc30\ud3ec\ub3c4 \uac00\ub2a5\ud558\uc9c0\ub9cc \ubcf4\ub2e4 \ud6a8\uacfc\uc801\uc73c\ub85c \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec, \uad00\ub9ac\ub97c \ud558\uae30 \uc704\ud574\uc11c\ub294 Deployment, StatefulSet\uc640 \uac19\uc740 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc624\ube0c\uc81d\ud2b8\ub97c \ud65c\uc6a9\ud574\uc57c \ud55c\ub2e4. Deployments\uc5d0\ub294 container image, replica \uac1c\uc218, spec \ub4f1\ub4f1\uc774 desired state \uc791\uc131\ub418\uba70 controller\uac00 \ub9ac\uc18c\uc2a4\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \ubc30\ud3ec, \uc2a4\ucf00\uc974\ub9c1 \ud558\uba74\uc11c \uc2e4\uc81c \uc0c1\ud0dc\ub97c \uc120\uc5b8\ub41c \uc0c1\ud0dc\uc640 \ub3d9\uc77c\ud558\uac8c \ub9de\ucd98\ub2e4. \uc2e4\uc81c Pod\ub4e4\uc758 spec\uacfc \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1 \ud558\uace0 \uad00\ub9ac \ud558\ub294 \uc5ed\ud560\uc740 ReplicaSet\uc774 \ud558\uba70 \uc0ac\uc6a9\uc790\ub294 \uc9c1\uc811 ReplicaSet\uc744 \uad00\ub9ac \uc6b4\uc601 \ud560\uc77c\uc774 \uc5c6\uc73c\uba70 Deployment\ub97c \ud1b5\ud574 \uc81c\uc5b4\uac00 \ub41c\ub2e4. Deployment Deployment\ub97c \uc0dd\uc131\uc744 \ud558\uac70\ub098 \uc5c5\ub370\uc774\ud2b8\ub97c \ud558\uba74 \ucee8\ud2b8\ub864\ub7ec\ub294 \ud574\ub2f9\ub418\ub294 \ub9ac\uc18c\uc2a4\uac00 \ud604\uc7ac \uc874\uc7ac\ud558\ub294\uc9c0 \ud655\uc778 \ud6c4 \uc9c0\uc815\ub41c \ubcf5\uc81c\ubcf8(replicas)\uacfc \uc2e4\uc81c \ubcf5\uc81c\ubcf8\uc744 \uc77c\uce58 \uc2dc\ud0a4\ub294 \uc791\uc5c5\uc744 \uc9c4\ud589 \ud55c\ub2e4. Deployment\ub294 \uc9c1\uc811 \ubcf5\uc81c\ubcf8\uc744 \uad00\ub9ac\ud558\uc9c0 \uc54a\uc73c\uba70 \ub300\uc2e0 ReplicaSet\uc774 \ubcf5\uc81c\ubcf8\uc5d0 \ub300\ud55c \uad00\ub9ac\ub97c \uc218\ud589 \ud55c\ub2e4. ReplicaSet ReplicaSet\uc740 \uc9c0\uc815\ub41c \uc218\uc758 Pod \uc5ec\ub7ec \uac1c\ub97c \ud56d\uc0c1 \uac00\uc6a9\ud558\uac8c \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \uc5ed\ud560\uc744 \ud558\uba70 Label\uc744 \ud1b5\ud574\uc11c \uad00\ub9ac\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 role=web\uc758 label\uc744 \uac00\uc9c0\uace0 \uc788\ub294 ReplicaSet\uc744 \uc0dd\uc131/\uc218\uc815/\uc0ad\uc81c\ud558\uba74 \ucee8\ud2b8\ub864\ub7ec\uac00 \uba3c\uc800 label\uc774 role=web\uc778 \ubaa8\ub4e0 Pod\ub97c \uac80\uc0c9\ud558\uace0 \ud574\ub2f9 Pod\uc758 ownerReference \uc758 \uc885\uc18d\uad00\uacc4\ub97c \ud655\uc778 \ud6c4 Pod\ub97c \uc81c\uc5b4\ud55c\ub2e4. Deployment Strategies \uc0c8\ub85c\uc6b4 \ubc84\uc804\uc758 \ucee8\ud14c\uc774\ub108\uac00 \ubc30\ud3ec \ub420\ub54c Rolling\uc73c\ub85c \uc2e0\uaddc Pod\ub97c \ubc30\ud3ec, \uae30\uc874 Pod\ub97c \uc0ad\uc81c \ud558\ub294 \uc804\ub7b5 \uc774\ub2e4. .spec.strategy.type \uac12\uc73c\ub85c Recreate \ud639\uc740 RollingUpdate \ubc30\ud3ec \uc804\ub7b5\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc73c\uba70 \uae30\ubcf8\uc740 RollingUpdate\uc774\ub2e4. Recreate\ub294 \uc0c8 Pod\uac00 \uc0dd\uc131\ub418\uae30 \uc804 \uc774\uc804 \ubc84\uc804\uc758 \ubaa8\ub4e0 Pod\ub97c \uc0ad\uc81c\ud558\ub294 \ubc29\uc2dd\uc774\uba70 RollingUpdate\ub294 \uc21c\ucc28\uc801\uc73c\ub85c \uc624\ub798\ub41c Pod\ub97c \uc0ad\uc81c\ud558\uace0 \uc0c8 Pod\ub294 \uc0dd\uc131\uc744 \ubc18\ubcf5\ud558\uc5ec \ubc30\ud3ec\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. RollingUpdate\uc758 \uacbd\uc6b0\ub294 Max Unavailable\uacfc MaxSurge \uac12\uc744 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4. maxSurge: ReplicaSet\uc758 Desired \uac12\ubcf4\ub2e4 N\uac1c \ud639\uc740 N%\ub9cc\ud07c \ub354 \uc0dd\uc131\ud558\uc5ec Rollout \uac00\ub2a5\ud55c \ubc94\uc704\uc758 \uc124\uc815\uac12 (\uae30\ubcf8\uac12 25%) maxUnavailable: \uc774\uc804 \ubc84\uc804 Pod \uc0ad\uc81c \uc2dc \ucd5c\uc18c \uc720\uc9c0\ud574\uc57c \ud560 \uac1c\uc218 \ud639\uc740 \ube44\uc728\uc758 \uc124\uc815\uac12 (\uae30\ubcf8\uac12 25%) \uc608\uc2dc1. desired=3 maxSurge=1 maxUnavailable=0 \uc778 \uacbd\uc6b0 \uc608\uc2dc2. desired=3 maxSurge=1 maxUnavailable=1 \uc778 \uacbd\uc6b0","title":"2.4 Deployment & ReplicaSet"},{"location":"hello-kubernetes/section02/deployment-replicaset/#24-deployment-replicaset","text":"Pod \ub9ac\uc18c\uc2a4\ub97c \uc9c1\uc811 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \ubc30\ud3ec\ub3c4 \uac00\ub2a5\ud558\uc9c0\ub9cc \ubcf4\ub2e4 \ud6a8\uacfc\uc801\uc73c\ub85c \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec, \uad00\ub9ac\ub97c \ud558\uae30 \uc704\ud574\uc11c\ub294 Deployment, StatefulSet\uc640 \uac19\uc740 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc624\ube0c\uc81d\ud2b8\ub97c \ud65c\uc6a9\ud574\uc57c \ud55c\ub2e4. Deployments\uc5d0\ub294 container image, replica \uac1c\uc218, spec \ub4f1\ub4f1\uc774 desired state \uc791\uc131\ub418\uba70 controller\uac00 \ub9ac\uc18c\uc2a4\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \ubc30\ud3ec, \uc2a4\ucf00\uc974\ub9c1 \ud558\uba74\uc11c \uc2e4\uc81c \uc0c1\ud0dc\ub97c \uc120\uc5b8\ub41c \uc0c1\ud0dc\uc640 \ub3d9\uc77c\ud558\uac8c \ub9de\ucd98\ub2e4. \uc2e4\uc81c Pod\ub4e4\uc758 spec\uacfc \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1 \ud558\uace0 \uad00\ub9ac \ud558\ub294 \uc5ed\ud560\uc740 ReplicaSet\uc774 \ud558\uba70 \uc0ac\uc6a9\uc790\ub294 \uc9c1\uc811 ReplicaSet\uc744 \uad00\ub9ac \uc6b4\uc601 \ud560\uc77c\uc774 \uc5c6\uc73c\uba70 Deployment\ub97c \ud1b5\ud574 \uc81c\uc5b4\uac00 \ub41c\ub2e4.","title":"2.4 Deployment &amp; ReplicaSet"},{"location":"hello-kubernetes/section02/deployment-replicaset/#deployment","text":"Deployment\ub97c \uc0dd\uc131\uc744 \ud558\uac70\ub098 \uc5c5\ub370\uc774\ud2b8\ub97c \ud558\uba74 \ucee8\ud2b8\ub864\ub7ec\ub294 \ud574\ub2f9\ub418\ub294 \ub9ac\uc18c\uc2a4\uac00 \ud604\uc7ac \uc874\uc7ac\ud558\ub294\uc9c0 \ud655\uc778 \ud6c4 \uc9c0\uc815\ub41c \ubcf5\uc81c\ubcf8(replicas)\uacfc \uc2e4\uc81c \ubcf5\uc81c\ubcf8\uc744 \uc77c\uce58 \uc2dc\ud0a4\ub294 \uc791\uc5c5\uc744 \uc9c4\ud589 \ud55c\ub2e4. Deployment\ub294 \uc9c1\uc811 \ubcf5\uc81c\ubcf8\uc744 \uad00\ub9ac\ud558\uc9c0 \uc54a\uc73c\uba70 \ub300\uc2e0 ReplicaSet\uc774 \ubcf5\uc81c\ubcf8\uc5d0 \ub300\ud55c \uad00\ub9ac\ub97c \uc218\ud589 \ud55c\ub2e4.","title":"Deployment"},{"location":"hello-kubernetes/section02/deployment-replicaset/#replicaset","text":"ReplicaSet\uc740 \uc9c0\uc815\ub41c \uc218\uc758 Pod \uc5ec\ub7ec \uac1c\ub97c \ud56d\uc0c1 \uac00\uc6a9\ud558\uac8c \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \uc5ed\ud560\uc744 \ud558\uba70 Label\uc744 \ud1b5\ud574\uc11c \uad00\ub9ac\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 role=web\uc758 label\uc744 \uac00\uc9c0\uace0 \uc788\ub294 ReplicaSet\uc744 \uc0dd\uc131/\uc218\uc815/\uc0ad\uc81c\ud558\uba74 \ucee8\ud2b8\ub864\ub7ec\uac00 \uba3c\uc800 label\uc774 role=web\uc778 \ubaa8\ub4e0 Pod\ub97c \uac80\uc0c9\ud558\uace0 \ud574\ub2f9 Pod\uc758 ownerReference \uc758 \uc885\uc18d\uad00\uacc4\ub97c \ud655\uc778 \ud6c4 Pod\ub97c \uc81c\uc5b4\ud55c\ub2e4.","title":"ReplicaSet"},{"location":"hello-kubernetes/section02/deployment-replicaset/#deployment-strategies","text":"\uc0c8\ub85c\uc6b4 \ubc84\uc804\uc758 \ucee8\ud14c\uc774\ub108\uac00 \ubc30\ud3ec \ub420\ub54c Rolling\uc73c\ub85c \uc2e0\uaddc Pod\ub97c \ubc30\ud3ec, \uae30\uc874 Pod\ub97c \uc0ad\uc81c \ud558\ub294 \uc804\ub7b5 \uc774\ub2e4. .spec.strategy.type \uac12\uc73c\ub85c Recreate \ud639\uc740 RollingUpdate \ubc30\ud3ec \uc804\ub7b5\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc73c\uba70 \uae30\ubcf8\uc740 RollingUpdate\uc774\ub2e4. Recreate\ub294 \uc0c8 Pod\uac00 \uc0dd\uc131\ub418\uae30 \uc804 \uc774\uc804 \ubc84\uc804\uc758 \ubaa8\ub4e0 Pod\ub97c \uc0ad\uc81c\ud558\ub294 \ubc29\uc2dd\uc774\uba70 RollingUpdate\ub294 \uc21c\ucc28\uc801\uc73c\ub85c \uc624\ub798\ub41c Pod\ub97c \uc0ad\uc81c\ud558\uace0 \uc0c8 Pod\ub294 \uc0dd\uc131\uc744 \ubc18\ubcf5\ud558\uc5ec \ubc30\ud3ec\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. RollingUpdate\uc758 \uacbd\uc6b0\ub294 Max Unavailable\uacfc MaxSurge \uac12\uc744 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4. maxSurge: ReplicaSet\uc758 Desired \uac12\ubcf4\ub2e4 N\uac1c \ud639\uc740 N%\ub9cc\ud07c \ub354 \uc0dd\uc131\ud558\uc5ec Rollout \uac00\ub2a5\ud55c \ubc94\uc704\uc758 \uc124\uc815\uac12 (\uae30\ubcf8\uac12 25%) maxUnavailable: \uc774\uc804 \ubc84\uc804 Pod \uc0ad\uc81c \uc2dc \ucd5c\uc18c \uc720\uc9c0\ud574\uc57c \ud560 \uac1c\uc218 \ud639\uc740 \ube44\uc728\uc758 \uc124\uc815\uac12 (\uae30\ubcf8\uac12 25%) \uc608\uc2dc1. desired=3 maxSurge=1 maxUnavailable=0 \uc778 \uacbd\uc6b0 \uc608\uc2dc2. desired=3 maxSurge=1 maxUnavailable=1 \uc778 \uacbd\uc6b0","title":"Deployment Strategies"},{"location":"hello-kubernetes/section02/pod-namespce/","text":"2.1 Pod & Namespace Pod \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \ucee8\ud14c\uc774\ub108\ub294 \ub3c5\ub9bd\uc801\uc73c\ub85c \uad00\ub9ac \ub418\uc9c0 \uc54a\uc73c\uba70 Pod\ub77c\ub294 \ud558\ub098\uc758 \ub9ac\uc18c\uc2a4\ub85c \uad00\ub9ac \ub41c\ub2e4. Pod\ub294 \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\ub85c \uc774\ub8e8\uc5b4\uc838 \uc788\uc73c\uba70 IP \uc8fc\uc18c, \uc2a4\ud1a0\ub9ac\uc9c0 \uadf8\ub9ac\uace0 \ub9ac\ub205\uc2a4 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uacf5\uc720\ud55c\ub2e4. \ucee8\ud14c\uc774\ub108\ub97c \uc9c1\uc811 \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc544\ub2cc Pod\uac00 \ud544\uc694\ud55c \uc774\uc720\ub294 \ucee8\ud14c\uc774\ub108\uac00 \ud558\ub098\uc758 main process\ub9cc \ub744\uc6b0\ub3c4\ub85d \uc124\uacc4\uac00 \ub418\uc5c8\uae30 \ub54c\ubb38\uc5d0 multi processes\ub85c \uc6b4\uc601\ud574\uc57c \ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uac19\uc740 \uacbd\uc6b0\ub294 \uac01\uac01 \ud504\ub85c\uc138\uc2a4\ubcc4\ub85c \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\uace0 \uadf8 \ucee8\ud14c\uc774\ub108\ub4e4\uc758 \ubb36\uc74c \uc790\uccb4\ub97c \ud558\ub098\uc758 \uadf8\ub8f9\uc73c\ub85c \uad00\ub9ac\ud574\uc57c \ud55c\ub2e4. \ub610\ud55c \uc704\uc5d0\uc11c \uc5b8\uae09\ud55c \uac83\ucc98\ub7fc \ub124\ud2b8\uc6cc\ud06c, \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uacfc \uac19\uc740 \ub0b4\ubd80 \ub9ac\uc18c\uc2a4\ub4e4\uc774 \uacf5\uc720\ub418\uae30 \ub584\ubb38\uc5d0 \ubcf4\uc548\uacfc \uc131\ub2a5\uc5d0 \ub300\ud55c \uc774\ub4dd\ub3c4 \uac16\ub294\ub2e4. Info \uae30\ubcf8\uc73c\ub85c\ub294 \ucee8\ud14c\uc774\ub108\ub4e4\ub07c\ub9ac\ub294 PID \uc811\uadfc\uc774 \uc548 \ub418\uc9c0\ub9cc \ucd94\uac00\ub85c Pod \uc2a4\ud399\uc5d0 shareProcessNamespace \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uba74 \ub2e4\ub978 \ucee8\ud14c\uc774\ub108\uc758 PID\ub3c4 \uc811\uadfc\ud560 \uc218 \uc788\ub2e4. https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/ \ud30c\ub4dc\uc758 lifecycle \uc740 Pending, Running, Succeed, Failed, Unknown, CrashLoopBackOff\ub85c \ubd84\ub958 \ub41c\ub2e4. Lifecycle Description Pending \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c Pod\uc758 \uc0dd\uc131\uc774 \ud5c8\ub77d\ub418\uc5c8\uc9c0\ub9cc \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\uac00 \uc900\ube44\ub418\uc9c0 \uc54a\uc558\ub2e4\ub294 \uc0c1\ud0dc\uc774\uba70 Schedule \ub418\ub294 \uc2dc\uac04\uacfc \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub294 \uc2dc\uac04 \uc911\uc5d0\ub3c4 Pending Running Pod\uac00 \uc6cc\ucee4\ub178\ub4dc\uc5d0 \ubc14\uc778\ub529\ub418\uc5c8\uc73c\uba70 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc0dd\uc131\ub41c \uc0c1\ud0dc Succeed Pod\uc758 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc885\ub8cc\ub41c \uc0c1\ud0dc\uc640 Job\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc885\ub8cc\ub41c \uc0c1\ud0dc Failed \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud328\ud558\uc5ec \uc885\ub8cc \ub418\uc5c8\uc73c\uba70 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub41c \uc0c1\ud0dc Unknown \uc5b4\ub5a4 \uc774\uc720\ub85c \ucee8\ud14c\uc774\ub108 \uc0c1\ud0dc\uac00 \ud655\uc778\ub418\uc9c0 \uc54a\uace0 \ub178\ub4dc\uc5d0\uc11c Pod\uc758 \uc0c1\ud0dc \ud655\uc778\uc744 \uc704\ud55c \uc811\uc18d\uc774 \ub418\uc9c0 \uc54a\ub294 \uc0c1\ud0dc CrashLoopBackOff \ucee8\ud14c\uc774\ub108 \uc2dc\uc791\uc774 \uc9c0\uc18d\ud574\uc11c \uc2e4\ud328\ud558\uace0 \uc788\uc73c\uba70 \uc77c\ubc18\uc801\uc73c\ub85c \uc774\ubbf8\uc9c0\uc758 \ubb38\uc81c\uac00 \uc788\uac70\ub098 \ud658\uacbd \ubcc0\uc218 \uc124\uc815 \ub4f1\uc758 \uc774\uc288\ub85c \ucee8\ud14c\uc774\ub108\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc2dc\uc791\ub418\uc9c0 \uc54a\ub294 \uc0c1\ud0dc $ kubectl run tmp-nginx --image nginx --port=80 $ kubectl port-forward pod/tmp-nginx 8000:80 $ curl 127.0.0.1:8000 Namespace \ud558\ub098\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\uc5d0 \ud558\ub098\uc758 \uc11c\ube44\uc2a4 \ud639\uc740 \ud558\ub098\uc758 \ud300\uc774 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ubcf4\ub2e4\ub294 \uba40\ud2f0 \ud14c\ub10c\ud2b8 \ud558\uac8c(\uc5ec\ub7ec \uc11c\ube44\uc2a4\uac00 \ud63c\uc7ac\ub418\uc5b4) \ub2e4\uc591\ud55c \ud300 \ud639\uc740 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ub9ac\uc18c\uc2a4\ub97c \uacf5\uc720\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\ub840\uac00 \ub9e4\uc6b0 \uc77c\ubc18\uc801\uc774\ub2e4. \uc11c\ube44\uc2a4 \ud639\uc740 \ud300 \uac04\uc5d0 \ub3c5\ub9bd\ub41c \uacf5\uac04\uc744 \ud560\ub2f9\ud560 \ud544\uc694\uac00 \uc788\uc73c\uba70 \uc774\ub54c Namespace\ub97c \ud1b5\ud574\uc11c \uc11c\ube44\uc2a4\ubcc4 \ub9ac\uc18c\uc2a4\ub97c \ub17c\ub9ac\uc801\uc73c\ub85c \ub098\ub204\uace0 \uad00\ub9ac \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \uc2e4\uc81c Pod\uac00 \uc0dd\uc131\ub418\ub294 Worker node\ub294 \uacf5\uc720\uac00 \ub418\ub294 \uc601\uc5ed\uc774\uae30 \ub54c\ubb38\uc5d0 self-service \ub41c \ud615\ud0dc\ub85c \ub9ac\uc18c\uc2a4\ub97c \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ub97c \ud55c\ub2e4\uace0 \ud558\uba74 \uac01 namespace \ubcc4\ub85c quota\ub97c \ubd80\uc5ec\ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \ub9ac\uc18c\uc2a4\ub97c soft/hard limit\uc73c\ub85c \uad00\ub9ac \ud558\uace0 \uc0ac\uc6a9\uc790 \uc811\uadfc\uc5d0 \ub300\ud574 RBAC(Role Based Access Controller) \ub85c \uad00\ub9ac\ud558\ub294 \uac83\uc774 \ucd94\ud6c4 \ub9ac\uc18c\uc2a4 \uad00\ub9ac\uc758 \uce21\uba74\uc5d0\uc11c\ubcf4\ub2e4 \ud6a8\uacfc\uc801\uc774\ub2e4. \ub610\ud55c namespace\uc5d0\ub3c4 label\uc774 \uac00\ub2a5\ud558\ubbc0\ub85c label\uc744 \ud1b5\ud574 \uadf8\ub8f9\ud654 \uac00\ub2a5\ud558\ub2e4. $ kubectl create namespace demo namespace/demo created $ cat <<EOF > compute-resources.yaml apiVersion: v1 kind: ResourceQuota metadata: name: compute-resources spec: hard: requests.cpu: \"1\" requests.memory: 1Gi limits.cpu: \"2\" limits.memory: 2Gi EOF $ kubectl create -f ./compute-resources.yaml --namespace=demo $ kubectl get quota --namespace=demo NAME AGE REQUEST LIMIT compute-resources 35s requests.cpu: 0/1, requests.memory: 0/1Gi limits.cpu: 0/2, limits.memory: 0/2Gi $ kubectl label namespace demo env=dev namespace/test labeled $ kubectl get namespace -l env=dev NAME STATUS AGE demo Active 12m","title":"2.1 Pod & Namespace"},{"location":"hello-kubernetes/section02/pod-namespce/#21-pod-namespace","text":"","title":"2.1 Pod &amp; Namespace"},{"location":"hello-kubernetes/section02/pod-namespce/#pod","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \ucee8\ud14c\uc774\ub108\ub294 \ub3c5\ub9bd\uc801\uc73c\ub85c \uad00\ub9ac \ub418\uc9c0 \uc54a\uc73c\uba70 Pod\ub77c\ub294 \ud558\ub098\uc758 \ub9ac\uc18c\uc2a4\ub85c \uad00\ub9ac \ub41c\ub2e4. Pod\ub294 \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\ub85c \uc774\ub8e8\uc5b4\uc838 \uc788\uc73c\uba70 IP \uc8fc\uc18c, \uc2a4\ud1a0\ub9ac\uc9c0 \uadf8\ub9ac\uace0 \ub9ac\ub205\uc2a4 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uacf5\uc720\ud55c\ub2e4. \ucee8\ud14c\uc774\ub108\ub97c \uc9c1\uc811 \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc544\ub2cc Pod\uac00 \ud544\uc694\ud55c \uc774\uc720\ub294 \ucee8\ud14c\uc774\ub108\uac00 \ud558\ub098\uc758 main process\ub9cc \ub744\uc6b0\ub3c4\ub85d \uc124\uacc4\uac00 \ub418\uc5c8\uae30 \ub54c\ubb38\uc5d0 multi processes\ub85c \uc6b4\uc601\ud574\uc57c \ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uac19\uc740 \uacbd\uc6b0\ub294 \uac01\uac01 \ud504\ub85c\uc138\uc2a4\ubcc4\ub85c \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\uace0 \uadf8 \ucee8\ud14c\uc774\ub108\ub4e4\uc758 \ubb36\uc74c \uc790\uccb4\ub97c \ud558\ub098\uc758 \uadf8\ub8f9\uc73c\ub85c \uad00\ub9ac\ud574\uc57c \ud55c\ub2e4. \ub610\ud55c \uc704\uc5d0\uc11c \uc5b8\uae09\ud55c \uac83\ucc98\ub7fc \ub124\ud2b8\uc6cc\ud06c, \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uacfc \uac19\uc740 \ub0b4\ubd80 \ub9ac\uc18c\uc2a4\ub4e4\uc774 \uacf5\uc720\ub418\uae30 \ub584\ubb38\uc5d0 \ubcf4\uc548\uacfc \uc131\ub2a5\uc5d0 \ub300\ud55c \uc774\ub4dd\ub3c4 \uac16\ub294\ub2e4. Info \uae30\ubcf8\uc73c\ub85c\ub294 \ucee8\ud14c\uc774\ub108\ub4e4\ub07c\ub9ac\ub294 PID \uc811\uadfc\uc774 \uc548 \ub418\uc9c0\ub9cc \ucd94\uac00\ub85c Pod \uc2a4\ud399\uc5d0 shareProcessNamespace \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uba74 \ub2e4\ub978 \ucee8\ud14c\uc774\ub108\uc758 PID\ub3c4 \uc811\uadfc\ud560 \uc218 \uc788\ub2e4. https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/ \ud30c\ub4dc\uc758 lifecycle \uc740 Pending, Running, Succeed, Failed, Unknown, CrashLoopBackOff\ub85c \ubd84\ub958 \ub41c\ub2e4. Lifecycle Description Pending \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c Pod\uc758 \uc0dd\uc131\uc774 \ud5c8\ub77d\ub418\uc5c8\uc9c0\ub9cc \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\uac00 \uc900\ube44\ub418\uc9c0 \uc54a\uc558\ub2e4\ub294 \uc0c1\ud0dc\uc774\uba70 Schedule \ub418\ub294 \uc2dc\uac04\uacfc \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub294 \uc2dc\uac04 \uc911\uc5d0\ub3c4 Pending Running Pod\uac00 \uc6cc\ucee4\ub178\ub4dc\uc5d0 \ubc14\uc778\ub529\ub418\uc5c8\uc73c\uba70 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc0dd\uc131\ub41c \uc0c1\ud0dc Succeed Pod\uc758 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc885\ub8cc\ub41c \uc0c1\ud0dc\uc640 Job\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc885\ub8cc\ub41c \uc0c1\ud0dc Failed \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud328\ud558\uc5ec \uc885\ub8cc \ub418\uc5c8\uc73c\uba70 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub41c \uc0c1\ud0dc Unknown \uc5b4\ub5a4 \uc774\uc720\ub85c \ucee8\ud14c\uc774\ub108 \uc0c1\ud0dc\uac00 \ud655\uc778\ub418\uc9c0 \uc54a\uace0 \ub178\ub4dc\uc5d0\uc11c Pod\uc758 \uc0c1\ud0dc \ud655\uc778\uc744 \uc704\ud55c \uc811\uc18d\uc774 \ub418\uc9c0 \uc54a\ub294 \uc0c1\ud0dc CrashLoopBackOff \ucee8\ud14c\uc774\ub108 \uc2dc\uc791\uc774 \uc9c0\uc18d\ud574\uc11c \uc2e4\ud328\ud558\uace0 \uc788\uc73c\uba70 \uc77c\ubc18\uc801\uc73c\ub85c \uc774\ubbf8\uc9c0\uc758 \ubb38\uc81c\uac00 \uc788\uac70\ub098 \ud658\uacbd \ubcc0\uc218 \uc124\uc815 \ub4f1\uc758 \uc774\uc288\ub85c \ucee8\ud14c\uc774\ub108\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc2dc\uc791\ub418\uc9c0 \uc54a\ub294 \uc0c1\ud0dc $ kubectl run tmp-nginx --image nginx --port=80 $ kubectl port-forward pod/tmp-nginx 8000:80 $ curl 127.0.0.1:8000","title":"Pod"},{"location":"hello-kubernetes/section02/pod-namespce/#namespace","text":"\ud558\ub098\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\uc5d0 \ud558\ub098\uc758 \uc11c\ube44\uc2a4 \ud639\uc740 \ud558\ub098\uc758 \ud300\uc774 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ubcf4\ub2e4\ub294 \uba40\ud2f0 \ud14c\ub10c\ud2b8 \ud558\uac8c(\uc5ec\ub7ec \uc11c\ube44\uc2a4\uac00 \ud63c\uc7ac\ub418\uc5b4) \ub2e4\uc591\ud55c \ud300 \ud639\uc740 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ub9ac\uc18c\uc2a4\ub97c \uacf5\uc720\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\ub840\uac00 \ub9e4\uc6b0 \uc77c\ubc18\uc801\uc774\ub2e4. \uc11c\ube44\uc2a4 \ud639\uc740 \ud300 \uac04\uc5d0 \ub3c5\ub9bd\ub41c \uacf5\uac04\uc744 \ud560\ub2f9\ud560 \ud544\uc694\uac00 \uc788\uc73c\uba70 \uc774\ub54c Namespace\ub97c \ud1b5\ud574\uc11c \uc11c\ube44\uc2a4\ubcc4 \ub9ac\uc18c\uc2a4\ub97c \ub17c\ub9ac\uc801\uc73c\ub85c \ub098\ub204\uace0 \uad00\ub9ac \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \uc2e4\uc81c Pod\uac00 \uc0dd\uc131\ub418\ub294 Worker node\ub294 \uacf5\uc720\uac00 \ub418\ub294 \uc601\uc5ed\uc774\uae30 \ub54c\ubb38\uc5d0 self-service \ub41c \ud615\ud0dc\ub85c \ub9ac\uc18c\uc2a4\ub97c \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ub97c \ud55c\ub2e4\uace0 \ud558\uba74 \uac01 namespace \ubcc4\ub85c quota\ub97c \ubd80\uc5ec\ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \ub9ac\uc18c\uc2a4\ub97c soft/hard limit\uc73c\ub85c \uad00\ub9ac \ud558\uace0 \uc0ac\uc6a9\uc790 \uc811\uadfc\uc5d0 \ub300\ud574 RBAC(Role Based Access Controller) \ub85c \uad00\ub9ac\ud558\ub294 \uac83\uc774 \ucd94\ud6c4 \ub9ac\uc18c\uc2a4 \uad00\ub9ac\uc758 \uce21\uba74\uc5d0\uc11c\ubcf4\ub2e4 \ud6a8\uacfc\uc801\uc774\ub2e4. \ub610\ud55c namespace\uc5d0\ub3c4 label\uc774 \uac00\ub2a5\ud558\ubbc0\ub85c label\uc744 \ud1b5\ud574 \uadf8\ub8f9\ud654 \uac00\ub2a5\ud558\ub2e4. $ kubectl create namespace demo namespace/demo created $ cat <<EOF > compute-resources.yaml apiVersion: v1 kind: ResourceQuota metadata: name: compute-resources spec: hard: requests.cpu: \"1\" requests.memory: 1Gi limits.cpu: \"2\" limits.memory: 2Gi EOF $ kubectl create -f ./compute-resources.yaml --namespace=demo $ kubectl get quota --namespace=demo NAME AGE REQUEST LIMIT compute-resources 35s requests.cpu: 0/1, requests.memory: 0/1Gi limits.cpu: 0/2, limits.memory: 0/2Gi $ kubectl label namespace demo env=dev namespace/test labeled $ kubectl get namespace -l env=dev NAME STATUS AGE demo Active 12m","title":"Namespace"},{"location":"hello-kubernetes/section02/pod-requests-limits/","text":"2.2 Resources & QoS \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\uc790 application\uc758 Pod\uc744 \uc815\uc758\ud560\ub54c, container\uac00 \uc0ac\uc6a9\ud558\ub294 resource \uc591\uc744 \uc9c0\uc815\ud560\uc218 \uc788\ub2e4. \ub300\ud45c\uc801\uc778 \uc0ac\uc804 \uc815\uc758\ub41c resource\ub294 cpu, memory\uac00 \uc788\ub2e4. \uadf8\ub9ac\uace0 \uc774 resource\ub294 pod(\ud639\uc740 container)\uc5d0 \uc758\ud574 \uc694\uccad/\ud560\ub2f9/\uc18c\ube44\uac00 \uac00\ub2a5\ud558\ub2e4. \uc9c0\uc815\ud560\uc218 \uc788\ub294 resource\ub294 type\uc744 \uac00\uc9c0\uace0 type name(e.g cpu, memory)\uc744 \uac00\uc9c0\uace0 \uad6c\ubd84\ud560\uc218 \uc788\ub2e4. \uc5ec\uae30\uc11c\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc0ac\uc804\uc5d0 \uc815\uc758\ub41c compute resource\uc778 cpu, memory\ub97c \ub2e4\ub8ec\ub2e4. resource type\uc5d0\ub294 \uce21\uc815 \uac00\ub2a5\ud55c \uc218\ub7c9 \ubc0f \ub2e8\uc704\uac00 \uc788\ub2e4. Resources specifications kubernetes\uc5d0\uc11c \uc0ac\uc804 \uc815\uc758\ub41c resources spec.containers[].resources.limits.cpu spec.containers[].resources.limits.memory spec.containers[].resources.requests.cpu spec.containers[].resources.requests.memory Info \uc774 \uc678\uc5d0\ub3c4 \uc0ac\uc804 \uc815\uc758\ub41c resources\ub294 ephemeral-storage , hugepages- <hugepagesize > \uc774 \uc788\ub2e4. pod\uc5d0\uc11c container\uac00 \ud544\uc694\ud55c resource\ub97c requests\uc5d0 \uba85\uc2dc\ud558\uba74 \uc9c0\uc815\ub41c \ub9ac\uc18c\uc2a4\ub97c \uac00\uc9c0\uace0 kube-scheduler\uac00 pod\uac00 \uc2e4\ud589\ub420 \ub178\ub4dc\ub97c \uc120\ud0dd \ud55c\ub2e4. \uadf8\ub9ac\uace0 container\uac00 \ud544\uc694\ud55c resource\ub97c limits\uc5d0 \uba85\uc2dc\ud558\uba74 kubelet\uc740 \uc2e4\ud589\uc911\uc778 container\uac00 \uba85\uc2dc\ud55c resource\ub97c \ub118\uc5b4\uc124\uc218 \uc5c6\ub3c4\ub85d \uc81c\ud55c\ud55c\ub2e4. Pod\ub294 \uac01 container\uc5d0 \uc704 resource\ub97c \ud558\ub098 \uc774\uc0c1 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4. apiVersion: v1 kind: Pod meatadata: name: hello-world spec: containers: - name: my-container image: busybox resources: requests: cpu: \"500m\" memory: \"500Mi\" limits: cpu: \"1\" memory: \"1Gi\" Requests Pod\uc758 container\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud55c \ucd5c\uc18c resource\uc758 \uc591 - \ub178\ub4dc \uc2a4\ucf00\uc904\ub9c1\uc758 \uae30\uc900\uc774 \ub41c\ub2e4. Pod\uc774 \uc694\uccad\ud55c resource\uc758 \ucd5c\uc18c \uc218\ub7c9 \ub610\ub294 \uc694\uccad\ub418\uc5b4 \ud560\ub2f9\ud560 \ub9ac\uc18c\uc2a4\uc758 \uc218\ub7c9. scheduler \uc54c\uace0\ub9ac\uc998\uc774 \uc774 \uc218\ub7c9\uc744 \uc0ac\uc6a9\ud558\uc5ec \u201cfeasibility\u201d \ub97c \ud655\uc778\ud568(pod\uc774 \ub178\ub4dc\uc5d0 \uc801\ud569\ud55c\uc9c0 \uc544\ub2cc\uc9c0-\uc2a4\ucf00\uc904\ub9c1\uc758 \uae30\uc900) \ub9cc\uc57d \ucee8\ud14c\uc774\ub108\uac00 \uc694\uccad\ud55c resource\ubcf4\ub2e4 \ub9ce\uc740 resource\ub97c \uc0ac\uc6a9\ud558\ub824\uace0 \uc2dc\ub3c4\ud55c\ub2e4\uba74, \uadf8 \ud504\ub85c\uadf8\ub7a8\uc758 \uc2e4\ud589\uc740 compressble resource type\uc774\uba74 throttling\ub418\uace0, incompressble\uc774\uba74 \ud560\ub2f9 \uc2dc\ub3c4\ub294 \uac70\ubd80\ub420 \uac83\uc774\ub2e4. Limits Pod\uc758 container\uc5d0\uc11c \uc0ac\uc6a9\uac00\ub2a5\ud55c \ucd5c\ub300 resource\uc758 \ub7c9 \uc774 \uac12\ubcf4\ub2e4 \ub354 \ub9ce\uc740 resource\ub97c \uc0ac\uc6a9\ud558\uac8c \ub418\uba74 \uc885\ub8cc(\ud639\uc740 \uba48\ucd98\ub2e4)\ub41c\ub2e4. \uc774\uac83\uc740 \ud3ec\ud568\ub41c container, pod, node\uc758 \uc6a9\ub7c9\uc744 \uc758\ubbf8\ud55c\ub2e4. limit\uc758 \uae30\ubcf8\uc740 unbounded\uc774\ub2e4. \uc774\uac83\uc740 \ud3ec\ud568\ub41c container, pod, node\uc758 \uc6a9\ub7c9\uc744 \uc758\ubbf8\ud55c\ub2e4. Pod QoS Pod\uc740 \uc0dd\uc131\ud560\ub54c resource\uc758 \uba85\uc138\uc5d0 \ub530\ub77c 3\uac00\uc9c0 QoS(Quality of Service) class\ub97c \uac00\uc9c4\ub2e4. Best-Effort Lowest priority resource requests/limits\uac00 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0. \ub178\ub4dc\uc758 resource\uac00 \ubd80\uc871\ud55c \uacbd\uc6b0 \uc81c\uc77c \uba3c\uc800 \uc8fd\uc74c lowest priority, \uc774 container\ub294 \ub178\ub4dc\uc758 \uc5ec\uc720\uba54\ubaa8\ub9ac \ub9cc \uc0ac\uc6a9\ud560\uc218 \uc788\uc74c Burstable Middle priority resource requests\ub294 \uc9c0\uc815\ub418\uc5b4 \uc788\uc73c\ub098(not equal to 0) limit\uac00 \uc5c6\ub294\uacbd\uc6b0, \ud639\uc740 \uac19\uc9c0\uac00 \uc54a\uc740\uacbd\uc6b0. limit\ub97c \uc9c0\uc815\uc548\ud558\uba74 node capacity\uac00 \uc9c0\uc815\ub428. Guaranteed Highest priority resource requests/limits\ub97c \ubaa8\ub450 \uc9c0\uc815(no equalt to 0)\ud558\uace0, \uadf8\uac83\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0. \ub178\ub4dc\uc758 resource\uac00 \ubd80\uc871\ud560 \uacbd\uc6b0, guaranteed pod\uc774 \uc790\uc2e0\uc758 resource limits\ub97c \ub118\uc9c0 \uc54a\uc744\uacbd\uc6b0, \ub2e4\ub978 priority\ub97c \uac00\uc9c4 qos\uc758 pod\uc744 \uba3c\uc800 \uc885\ub8cc\ud558\uc5ec pod qos\ub97c \ubcf4\uc7a5\ud55c\ub2e4. Pod\uc5d0 cpu limits\uac00 \uc815\uc758\ub418\uc5b4 \uc788\uace0 \uc774\ub97c \ucd08\uacfc\ud558\ub824\uace0 \ud558\uba74 throttle\ub41c\ub2e4. Pod\uc5d0 memory limits\uac00 \uc788\uace0 \uc774\ub97c \ucd08\uacfc\ud558\ub824\uace0 \ud558\uba74, \ub2e4\ub978 Pod\uc5d0 \uba54\ubaa8\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 OOMkilled\ub420 \uc218 \uc788\ub2e4. \uc804\uccb4 Pod\uc774 \uc544\ub2c8\ub77c \uac00\uc7a5 \ub9ce\uc740 memory\ub97c \uc0ac\uc6a9\ud558\ub294 container\uac00 \uc885\ub8cc\ub41c\ub2e4.(Linux \uc2dc\uc2a4\ud15c\uc758 OOM killer\uac00 \ub3d9\uc791\ud558\uace0, \ud6c4\ubcf4\uc758 \uc21c\uc11c\ub97c \uacb0\uc815\ud558\ub294 OOM score \uacc4\uc0b0\uc744 \ud55c\ub2e4.) \uc21c\uc11c\ub294 Best-effort\uc778 pod\uc744 \uba3c\uc800 \uc8fd\uc778 \ub2e4\uc74c Burstable, Guaranteed \uc21c\uc73c\ub85c \uc8fd\uc778\ub2e4. \uc774\ub7f0 \ucf00\uc774\uc2a4\ub294 memory limits\ub97c \ucd08\uacfc\ud558\uac70\ub098 \ub178\ub4dc\uac00 \uacfc\ub3c4\ud55c \uba54\ubaa8\ub9ac \uc555\ub825\uc744 \ubc1b\uace0 \uc788\ub294 \uacbd\uc6b0\uc5d0 \ub3d9\uc791\ud55c\ub2e4. Pod \uc0dd\uc131\ud558\uace0 QoS \ud655\uc778\ud558\uae30 pod yaml apiVersion: v1 kind: Pod metadata: name: qos-demo namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"200Mi\" cpu: \"700m\" pod status \ud655\uc778 kubectl get pod qos-demo --namespace=qos-example --output=yaml ... spec: containers: ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 700m memory: 200Mi ... status: qosClass: Guaranteed Info \uc704\uc758 yaml\uc744 \uac00\uc9c0\uace0 limits\ub97c \uc81c\uac70\ud558\uac70\ub098, requests\ub97c limits\ubcf4\ub2e4 \uc791\uac8c \uc218\uc815\ud558\uba74 status.qosClass: Bustable\uc774 \ub41c\ub2e4. \uadf8\ub9ac\uace0 limits\uc640 requests\ub97c \ubaa8\ub450 \uc81c\uac70\ud558\uba74 status.qosClass: BestEffort\uac00 \ub41c\ub2e4.","title":"2.2 Resources & QoS"},{"location":"hello-kubernetes/section02/pod-requests-limits/#22-resources-qos","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\uc790 application\uc758 Pod\uc744 \uc815\uc758\ud560\ub54c, container\uac00 \uc0ac\uc6a9\ud558\ub294 resource \uc591\uc744 \uc9c0\uc815\ud560\uc218 \uc788\ub2e4. \ub300\ud45c\uc801\uc778 \uc0ac\uc804 \uc815\uc758\ub41c resource\ub294 cpu, memory\uac00 \uc788\ub2e4. \uadf8\ub9ac\uace0 \uc774 resource\ub294 pod(\ud639\uc740 container)\uc5d0 \uc758\ud574 \uc694\uccad/\ud560\ub2f9/\uc18c\ube44\uac00 \uac00\ub2a5\ud558\ub2e4. \uc9c0\uc815\ud560\uc218 \uc788\ub294 resource\ub294 type\uc744 \uac00\uc9c0\uace0 type name(e.g cpu, memory)\uc744 \uac00\uc9c0\uace0 \uad6c\ubd84\ud560\uc218 \uc788\ub2e4. \uc5ec\uae30\uc11c\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc0ac\uc804\uc5d0 \uc815\uc758\ub41c compute resource\uc778 cpu, memory\ub97c \ub2e4\ub8ec\ub2e4. resource type\uc5d0\ub294 \uce21\uc815 \uac00\ub2a5\ud55c \uc218\ub7c9 \ubc0f \ub2e8\uc704\uac00 \uc788\ub2e4.","title":"2.2 Resources &amp; QoS"},{"location":"hello-kubernetes/section02/pod-requests-limits/#resources-specifications","text":"","title":"Resources specifications"},{"location":"hello-kubernetes/section02/pod-requests-limits/#kubernetes-resources","text":"spec.containers[].resources.limits.cpu spec.containers[].resources.limits.memory spec.containers[].resources.requests.cpu spec.containers[].resources.requests.memory Info \uc774 \uc678\uc5d0\ub3c4 \uc0ac\uc804 \uc815\uc758\ub41c resources\ub294 ephemeral-storage , hugepages- <hugepagesize > \uc774 \uc788\ub2e4. pod\uc5d0\uc11c container\uac00 \ud544\uc694\ud55c resource\ub97c requests\uc5d0 \uba85\uc2dc\ud558\uba74 \uc9c0\uc815\ub41c \ub9ac\uc18c\uc2a4\ub97c \uac00\uc9c0\uace0 kube-scheduler\uac00 pod\uac00 \uc2e4\ud589\ub420 \ub178\ub4dc\ub97c \uc120\ud0dd \ud55c\ub2e4. \uadf8\ub9ac\uace0 container\uac00 \ud544\uc694\ud55c resource\ub97c limits\uc5d0 \uba85\uc2dc\ud558\uba74 kubelet\uc740 \uc2e4\ud589\uc911\uc778 container\uac00 \uba85\uc2dc\ud55c resource\ub97c \ub118\uc5b4\uc124\uc218 \uc5c6\ub3c4\ub85d \uc81c\ud55c\ud55c\ub2e4.","title":"kubernetes\uc5d0\uc11c \uc0ac\uc804 \uc815\uc758\ub41c resources"},{"location":"hello-kubernetes/section02/pod-requests-limits/#pod-container-resource","text":"apiVersion: v1 kind: Pod meatadata: name: hello-world spec: containers: - name: my-container image: busybox resources: requests: cpu: \"500m\" memory: \"500Mi\" limits: cpu: \"1\" memory: \"1Gi\"","title":"Pod\ub294 \uac01 container\uc5d0 \uc704 resource\ub97c \ud558\ub098 \uc774\uc0c1 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4."},{"location":"hello-kubernetes/section02/pod-requests-limits/#requests","text":"Pod\uc758 container\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud55c \ucd5c\uc18c resource\uc758 \uc591 - \ub178\ub4dc \uc2a4\ucf00\uc904\ub9c1\uc758 \uae30\uc900\uc774 \ub41c\ub2e4. Pod\uc774 \uc694\uccad\ud55c resource\uc758 \ucd5c\uc18c \uc218\ub7c9 \ub610\ub294 \uc694\uccad\ub418\uc5b4 \ud560\ub2f9\ud560 \ub9ac\uc18c\uc2a4\uc758 \uc218\ub7c9. scheduler \uc54c\uace0\ub9ac\uc998\uc774 \uc774 \uc218\ub7c9\uc744 \uc0ac\uc6a9\ud558\uc5ec \u201cfeasibility\u201d \ub97c \ud655\uc778\ud568(pod\uc774 \ub178\ub4dc\uc5d0 \uc801\ud569\ud55c\uc9c0 \uc544\ub2cc\uc9c0-\uc2a4\ucf00\uc904\ub9c1\uc758 \uae30\uc900) \ub9cc\uc57d \ucee8\ud14c\uc774\ub108\uac00 \uc694\uccad\ud55c resource\ubcf4\ub2e4 \ub9ce\uc740 resource\ub97c \uc0ac\uc6a9\ud558\ub824\uace0 \uc2dc\ub3c4\ud55c\ub2e4\uba74, \uadf8 \ud504\ub85c\uadf8\ub7a8\uc758 \uc2e4\ud589\uc740 compressble resource type\uc774\uba74 throttling\ub418\uace0, incompressble\uc774\uba74 \ud560\ub2f9 \uc2dc\ub3c4\ub294 \uac70\ubd80\ub420 \uac83\uc774\ub2e4.","title":"Requests"},{"location":"hello-kubernetes/section02/pod-requests-limits/#limits","text":"Pod\uc758 container\uc5d0\uc11c \uc0ac\uc6a9\uac00\ub2a5\ud55c \ucd5c\ub300 resource\uc758 \ub7c9 \uc774 \uac12\ubcf4\ub2e4 \ub354 \ub9ce\uc740 resource\ub97c \uc0ac\uc6a9\ud558\uac8c \ub418\uba74 \uc885\ub8cc(\ud639\uc740 \uba48\ucd98\ub2e4)\ub41c\ub2e4. \uc774\uac83\uc740 \ud3ec\ud568\ub41c container, pod, node\uc758 \uc6a9\ub7c9\uc744 \uc758\ubbf8\ud55c\ub2e4. limit\uc758 \uae30\ubcf8\uc740 unbounded\uc774\ub2e4. \uc774\uac83\uc740 \ud3ec\ud568\ub41c container, pod, node\uc758 \uc6a9\ub7c9\uc744 \uc758\ubbf8\ud55c\ub2e4.","title":"Limits"},{"location":"hello-kubernetes/section02/pod-requests-limits/#pod-qos","text":"Pod\uc740 \uc0dd\uc131\ud560\ub54c resource\uc758 \uba85\uc138\uc5d0 \ub530\ub77c 3\uac00\uc9c0 QoS(Quality of Service) class\ub97c \uac00\uc9c4\ub2e4.","title":"Pod QoS"},{"location":"hello-kubernetes/section02/pod-requests-limits/#best-effort","text":"Lowest priority resource requests/limits\uac00 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0. \ub178\ub4dc\uc758 resource\uac00 \ubd80\uc871\ud55c \uacbd\uc6b0 \uc81c\uc77c \uba3c\uc800 \uc8fd\uc74c lowest priority, \uc774 container\ub294 \ub178\ub4dc\uc758 \uc5ec\uc720\uba54\ubaa8\ub9ac \ub9cc \uc0ac\uc6a9\ud560\uc218 \uc788\uc74c","title":"Best-Effort"},{"location":"hello-kubernetes/section02/pod-requests-limits/#burstable","text":"Middle priority resource requests\ub294 \uc9c0\uc815\ub418\uc5b4 \uc788\uc73c\ub098(not equal to 0) limit\uac00 \uc5c6\ub294\uacbd\uc6b0, \ud639\uc740 \uac19\uc9c0\uac00 \uc54a\uc740\uacbd\uc6b0. limit\ub97c \uc9c0\uc815\uc548\ud558\uba74 node capacity\uac00 \uc9c0\uc815\ub428.","title":"Burstable"},{"location":"hello-kubernetes/section02/pod-requests-limits/#guaranteed","text":"Highest priority resource requests/limits\ub97c \ubaa8\ub450 \uc9c0\uc815(no equalt to 0)\ud558\uace0, \uadf8\uac83\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0. \ub178\ub4dc\uc758 resource\uac00 \ubd80\uc871\ud560 \uacbd\uc6b0, guaranteed pod\uc774 \uc790\uc2e0\uc758 resource limits\ub97c \ub118\uc9c0 \uc54a\uc744\uacbd\uc6b0, \ub2e4\ub978 priority\ub97c \uac00\uc9c4 qos\uc758 pod\uc744 \uba3c\uc800 \uc885\ub8cc\ud558\uc5ec pod qos\ub97c \ubcf4\uc7a5\ud55c\ub2e4. Pod\uc5d0 cpu limits\uac00 \uc815\uc758\ub418\uc5b4 \uc788\uace0 \uc774\ub97c \ucd08\uacfc\ud558\ub824\uace0 \ud558\uba74 throttle\ub41c\ub2e4. Pod\uc5d0 memory limits\uac00 \uc788\uace0 \uc774\ub97c \ucd08\uacfc\ud558\ub824\uace0 \ud558\uba74, \ub2e4\ub978 Pod\uc5d0 \uba54\ubaa8\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 OOMkilled\ub420 \uc218 \uc788\ub2e4. \uc804\uccb4 Pod\uc774 \uc544\ub2c8\ub77c \uac00\uc7a5 \ub9ce\uc740 memory\ub97c \uc0ac\uc6a9\ud558\ub294 container\uac00 \uc885\ub8cc\ub41c\ub2e4.(Linux \uc2dc\uc2a4\ud15c\uc758 OOM killer\uac00 \ub3d9\uc791\ud558\uace0, \ud6c4\ubcf4\uc758 \uc21c\uc11c\ub97c \uacb0\uc815\ud558\ub294 OOM score \uacc4\uc0b0\uc744 \ud55c\ub2e4.) \uc21c\uc11c\ub294 Best-effort\uc778 pod\uc744 \uba3c\uc800 \uc8fd\uc778 \ub2e4\uc74c Burstable, Guaranteed \uc21c\uc73c\ub85c \uc8fd\uc778\ub2e4. \uc774\ub7f0 \ucf00\uc774\uc2a4\ub294 memory limits\ub97c \ucd08\uacfc\ud558\uac70\ub098 \ub178\ub4dc\uac00 \uacfc\ub3c4\ud55c \uba54\ubaa8\ub9ac \uc555\ub825\uc744 \ubc1b\uace0 \uc788\ub294 \uacbd\uc6b0\uc5d0 \ub3d9\uc791\ud55c\ub2e4.","title":"Guaranteed"},{"location":"hello-kubernetes/section02/pod-requests-limits/#pod-qos_1","text":"pod yaml apiVersion: v1 kind: Pod metadata: name: qos-demo namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"200Mi\" cpu: \"700m\" pod status \ud655\uc778 kubectl get pod qos-demo --namespace=qos-example --output=yaml ... spec: containers: ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 700m memory: 200Mi ... status: qosClass: Guaranteed Info \uc704\uc758 yaml\uc744 \uac00\uc9c0\uace0 limits\ub97c \uc81c\uac70\ud558\uac70\ub098, requests\ub97c limits\ubcf4\ub2e4 \uc791\uac8c \uc218\uc815\ud558\uba74 status.qosClass: Bustable\uc774 \ub41c\ub2e4. \uadf8\ub9ac\uace0 limits\uc640 requests\ub97c \ubaa8\ub450 \uc81c\uac70\ud558\uba74 status.qosClass: BestEffort\uac00 \ub41c\ub2e4.","title":"Pod \uc0dd\uc131\ud558\uace0 QoS \ud655\uc778\ud558\uae30"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/","text":"Liveness, Readiness and Startup Probes Liveness kubelet\uc740 liveness probes \ub97c \ucee8\ud14c\uc774\ub108\uc758 \uc7ac\uc2dc\uc791\ud560 \uc2dc\uc810(application\uc758 deadlock\ub4f1)\uc744 \uc54c\uae30 \uc704\ud574 \uc0ac\uc6a9 \ud55c\ub2e4. application\uc774 \uc2e4\ud589\uc911\uc774\uc9c0\ub9cc \uc9c4\ud589 \ubd88\uac00\ub2a5 \ud560\ub54c, \ucee8\ud14c\uc774\ub108\ub97c \uc7ac\uc2dc\uc791 \ud558\ub294\uac83\uc73c\ub85c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uac00\uc6a9\uc131\uc744 \ub192\ud790\uc218 \uc788\ub2e4. kubelet\uc740 liveness probe handler\ub97c \uc774\uc6a9\ud558\uc5ec \uc8fc\uae30\uc801\uc73c\ub85c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uba70, \uc2e4\ud328\ud560 \uacbd\uc6b0 pod\ub97c \uc885\ub8cc\ud55c\ub2e4(SIGTERM). liveness probe\ub294 application\uc774 \uc798\ubabb\ub41c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uace0 \ubcf5\uc6d0\ud55c\ub2e4. liveness example # ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/ apiVersion: v1 kind: Pod metadata: labels: test: liveness name: liveness-http spec: containers: - name: liveness image: k8s.gcr.io/liveness args: - /server livenessProbe: httpGet: path: /healthz port: 8080 httpHeaders: - name: Custom-Header value: Awesome initialDelaySeconds: 3 periodSeconds: 3 Info \uc704 yaml\uc740 \ub2e8\ub3c5 \ucee8\ud14c\uc774\ub108\ub97c \uac16\ub294 pod\uc5d0\uc11c livenessProbe\ub97c \uc124\uc815\ud55c \ub0b4\uc6a9 periodSeconds\ub294 kubelet\uc774 \ub9e4 3\ucd08\ub9c8\ub2e4 liveness probe\uac00 \uc2e4\ud589\ub418\ub294\uac83\uc744 \uc815\uc758\ud55c\ub2e4. initialDelaySeconds\ub294 kubelet\uc774 \uccab probe \uc2e4\ud589\uc804\uc5d0 \ub300\uae30\ud558\uae30 \uc704\ud55c \uc2dc\uac04(\ub2e8\uc704: sec)\uc744 \uba85\uc2dc\ud55c\ub2e4. kubelet\uc774 probe\ub97c \uc2e4\ud589\ud558\uba74, kubelet\uc740 http handler\ub97c \uc0ac\uc6a9\ud558\uc5ec GET request\ub97c \uc11c\ubc84\ub85c \ubcf4\ub0b4\uace0, \uc9c0\uc815\ud55c path\ub97c \ud1b5\ud574 success\uac00 \ub3cc\uc544\uc624\uba74 healthy. failure\uac00 \ub3cc\uc544\uc624\uba74 \ucee8\ud14c\uc774\ub108\ub97c \uc885\ub8cc\ud558\uace0 \uc7ac\uc2dc\uc791\ud55c\ub2e4. Readiness kubelet\uc740 readiness probe \uc73c\ub85c \ucee8\ud14c\uc774\ub108\uac00 \ud2b8\ub798\ud53d\uc744 \ubc1b\uc744\uc218 \uc788\ub294 \uc900\ube44\uac00 \ub41c \uc2dc\uc810 \uc744 \ud655\uc778\ud55c\ub2e4. pod\uc740 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc900\ube44\ub418\uba74 \ud2b8\ub798\ud53d\uc744 \ubc1b\uc744 \uc900\ube44\uac00 \ub41c\uac83\uc73c\ub85c \uc0dd\uac01\ud55c\ub2e4. \uc774 \uc2e0\ud638\uc758 \uc6a9\ub3c4\ub294 \uc5b4\ub5a4 pod\uc774 \uc11c\ube44\uc2a4\uc758 \ubc31\uc5d4\ub4dc\ub85c \uc0ac\uc6a9\ub420\uc9c0 \uc81c\uc5b4\ud558\ub294\uac83\uc774\ub2e4. pod\uc774 \uc900\ube44\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc73c\uba74 service loadbalancer\uc5d0\uc11c \uc81c\uac70\ud55c\ub2e4.(endpoint \uc81c\uac70) readiness probe\ub294 pod\uc758 \uc804\uccb4 life cycle\ub3d9\uc548 \uc2e4\ud589\ub41c\ub2e4. \uc774\uac83\uc740 readiness probe\uac00 pod\uac00 \uc2e4\ud589\ub418\ub294 \ub3d9\uc548 \ubc18\ubcf5\uc801\uc73c\ub85c \uc2e4\ud589\ub418\ub294\uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. \uc774 \ud2b9\uc9d5\uc73c\ub85c application\uc774 \uc77c\uc2dc\uc801\uc73c\ub85c \ud2b8\ub798\ud53d\uc744 \ubc1b\uc9c0 \ubabb\ud558\ub294 \uc0c1\ud669\uc758 \ucc98\ub9ac\ub3c4 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4. \uc774\ub7ec\ud55c \uacbd\uc6b0 application\uc744 \uc885\ub8cc\ud558\ub294\uac83\uc774 \uc544\ub2c8\uace0, \ubcf5\uad6c(\uc870\uac74\uc774 \ub9cc\uc871\ub420\ub54c)\ub420\ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9b0\ub2e4. readiness example # ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/ apiVersion: v1 kind: Pod metadata: name: goproxy labels: app: goproxy spec: containers: - name: goproxy image: k8s.gcr.io/goproxy:0.1 ports: - containerPort: 8080 readinessProbe: tcpSocket: port: 8080 initialDelaySeconds: 5 periodSeconds: 10 livenessProbe: tcpSocket: port: 8080 initialDelaySeconds: 15 periodSeconds: 20 Info kubelet\uc740 readinessProbe.initialDelaySeconds\uc5d0 \uba85\uc2dc\ub41c 5\ucd08 \ub4a4\uc5d0 \uccab\ubc88\uc9f8 readiness\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4. probe\uac00 \uc131\uacf5\ud558\uba74 pod\uc774 ready\ub41c \uac83\uc73c\ub85c status\uac00 \ubcc0\uacbd\ub429\ub2c8\ub2e4. kubelet\uc740 periodSeconds\uc5d0 \uba85\uc2dc\ub41c 10\ucd08 \ub9c8\ub2e4 \uac80\uc0ac\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4. livenessProbe\ub3c4 \uba85\uc2dc\ub41c \ub0b4\uc6a9\ub300\ub85c \uc9c4\ud589\ub429\ub2c8\ub2e4. Startup kubelet\uc740 startup probe \ub97c \ucee8\ud14c\uc774\ub108 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc2dc\uc791\ub41c \uc2dc\uc810 \uc744 \uc54c\uae30 \uc704\ud574 \uc0ac\uc6a9\ud55c\ub2e4. \ub9cc\uc57d \uc774 probe\uac00 \uc124\uc815\ub418\uc5b4\uc788\uace0, \uadf8\uac83\uc758 liveness, readiness \uac00 startup probe\uac00 \uc131\uacf5\ud560\ub54c\uae4c\uc9c0 disable \uc774\ub77c\uba74, \uc774 \ub450 probe\uac00 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc2dc\uc791\uc2dc \uac04\uc12d\ud558\uc9c0 \uc54a\ub294\uac83\uc744 \ud655\uc778 \ud55c\ub2e4. \uc774\uac83\uc740 \ucee8\ud14c\uc774\ub108 \uc2dc\uc791\uc774 \ub290\ub824\uc11c kubelet\uc5d0 \uc758\ud574 \uc62c\ub77c\uc624\uace0 \uc2e4\ud589\ub418\uae30\uc804\uc5d0 \uc8fd\ub294\uac83\uc744 \ud53c\ud558\uae30 \uc704\ud574 liveness check \uc801\uc6a9\uc2dc \uc0ac\uc6a9\ub41c\ub2e4. startup probe\ub294 \uc2dc\uc791\uc774 \ub290\ub9b0 \ucee8\ud14c\uc774\ub108 \ub610\ub294 \uc608\uce21\ud560\uc218 \uc5c6\ub294 \ucd08\uae30\ud654 \ud504\ub85c\uc138\uc2a4\uac00 \uc788\ub294 application\uc5d0 \ucd5c\uc801\ud654\ub418\uc5b4 \uc788\ub2e4. failureThreshold * periodSeconds \ub9cc\ud07c liveness/readiness probe\ub97c \uae30\ub2e4\ub838\ub2e4\uac00 startup probe\uac00 \uc131\uacf5\ud558\uba74 \uc774\ud6c4\uc5d0 \uc2e4\ud589\ub41c\ub2e4. startup example apiVersion: v1 kind: Pod metadata: labels: test: startup name: startup-probe-test spec: containers: - name: liveness image: k8s.gcr.io/liveness args: - /server startupProbe: httpGet: path: /healthz port: liveness-port failureThreshold: 30 periodSeconds: 10 livenessProbe: httpGet: path: /healthz port: liveness-port failureThreshold: 1 periodSeconds: 10 Info startupProbe\uc5d0 \uba85\uc2dc\ub418\uc5b4 \uc788\ub294 failureThreshold * periodSeconds(300\ucd08) \ucd5c\ub300 \uc2dc\uac04\uae4c\uc9c0 application\uc774 \uc2dc\uc791\ub420 \uc2dc\uac04\uc744 \ud655\ubcf4\ud560\uc218 \uc788\ub2e4. startupProbe\uac00 \uc131\uacf5\ud558\uba74, livenessProbe\uac00 \ubc14\ub85c \ub3d9\uc791\ud558\uc5ec deadlock\uc0c1\ud0dc\ub97c \ud655\uc778\ud55c\ub2e4. startupProbe\uac00 \uc8fc\uc5b4\uc9c4 \ucd5c\ub300 \uc2dc\uac04\ub3d9\uc548 \uc131\uacf5\ud558\uc9c0 \ubabb\ud558\uba74 \ucee8\ud14c\uc774\ub108\ub294 \uc885\ub8cc\ub418\uace0, restartPolicy\uc5d0 \ub9de\uac8c \ub3d9\uc791\ud55c\ub2e4. PodSpec\uc5d0 \ud3ec\ud568\ub418\uc5b4 \uc788\ub294 Probe spec.containers[].livenessProbe spec.containers[].readinessProbe spec.containers[].startupProbe Probe handler type api document reference \uc704\uc5d0\uc11c \uc774\uc57c\uae30\ud55c probe\ub294 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c kubelet\uc5d0 \uc758\ud574 \uc8fc\uae30\uc801\uc73c\ub85c \uc218\ud589\ub418\ub294 \uc9c4\ub2e8\uc774\ub2e4. \uc774 \uc9c4\ub2e8\uc744 \uc218\ud589\ud558\uae30 \uc704\ud574\uc11c \uac01 \uc0c1\ud669\uc5d0 \ub9de\ucdb0 \uc544\ub798\uc758 handler\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \uc544\ub798\uc758 \uac01 \ud578\ub4e4\ub7ec\uc5d0\uc11c \ud544\uc694\ud55c \uc124\uc815\uc740 \uc704 api doc\uc5d0\uc11c \ucc38\uace0 \uac00\ub2a5\ud558\ub2e4. exec - ExecAction \uc9c0\uc815\ud55c \ucee4\ub9e8\ub4dc\ub97c \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0\uc11c \uc2e4\ud589\ud558\uc5ec \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568. \ucee8\ud14c\uc774\ub108 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc758 root(\u201c/\u201d)\uc5d0\uc11c \uc2e4\ud589\ud568 exit 0\uc774\uba74 healthy no-zero\uba74 unhealthy tcp - TCPSocketAction \uc9c0\uc815\ud55c tcp socket \ud3ec\ud2b8\ub97c \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc5f4\ub824\uace0 \uc2dc\ub3c4\ud558\uc5ec \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568. \ucee4\ub125\uc158\uc774 \uc0dd\uc131\ub418\uba74 healty, \uc2e4\ud328\ud558\uba74 unhealthy httpget - HTTPGetAction \uc9c0\uc815\ud55c \ud3ec\ud2b8, \ud638\uc2a4\ud2b8\uc640 path\ub97c \uac00\uc9c0\uace0 http get \uc2e4\ud589\uc744 \ud1b5\ud574 \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568. \uc751\ub2f5\uc758 status code\uac00 200\ud06c\uace0 400\ubbf8\ub9cc\uc774\uba74 healthy, \uadf8\uc678\ub294 unhealthy grpc - GRPCAction alpha feature on v1.23 - feature gate\uc5d0\uc11c GRPC\ucee8\ud14c\uc774\ub108Probe enable\ud574\uc57c \ud568 \uc9c0\uc815\ud55c \ud3ec\ud2b8, \uc11c\ube44\uc2a4 \uc774\ub984\uc744 \uac00\uc9c0\uace0 rpc check \uc694\uccad\uc744 \ubcf4\ub0b4\uc11c \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568 \uc751\ub2f5\uc774 SERVING(OK)\uc774\uba74 healthy, \uadf8 \uc678\ub294 unhealthy Configure Probes probe\ub294 liveness/readiness\uc758 \ud655\uc778 \ub3d9\uc791\uc744 \ubcf4\ub2e4 \uc815\ud655\ud558\uac8c \uc81c\uc5b4\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud560\uc218 \uc788\ub294 \uc5ec\ub7ec \ud544\ub4dc\uac00 \uc788\ub2e4. initialDelaySeconds: probe\ub97c \uc2dc\uc791\ud558\uae30 \uc804\uc5d0 \ucee8\ud14c\uc774\ub108\uac00 \uc2dc\uc791\ud560\ub54c \ud544\uc694\ud55c \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 0 periodSeconds: probe\ub97c \uc2e4\ud589\ud558\ub294 \ube48\ub3c4\uc758 \uae30\uac04 \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 10\ucd08, min 1\ucd08 timeoutSeconds: probe\ub97c \uc2e4\ud589\ud55c \ud6c4\uc5d0 timeout \ub418\ub294 \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 1\ucd08, min 1\ucd08 successThreshold: probe\uac00 \uc2e4\ud328\ud55c \ud6c4\uc5d0 \uc131\uacf5\ud55c\uac83\uc73c\ub85c \uac04\uc8fc\ud558\ub294 \ucd5c\uc18c\uc758 \uc5f0\uc18d\ub41c \uc131\uacf5\uc758 \uc218. default 1, min 1 failureThreshold: probe\uac00 \uc2e4\ud328\ud558\uba74 kubernete\uac00 \uc774 \ud68c\uc218\ub9cc\ud07c \uc2dc\ub3c4\ud55c \ud6c4\uc5d0 \ud3ec\uae30\ud568. livenessprobe\uc758 \uacbd\uc6b0, conatiner\ub97c \uc7ac\uc2dc\uc791\ud558\ub294\uac83\uc744 \uc758\ubbf8\ud558\uace0, readiness probe\uc758 \uacbd\uc6b0 Unready\ub85c \ud45c\uae30\ud568. default 3, min 1 \uc704 probe \ub294 \uc544\ub798\uc758 status\ub97c \uac00\uc9c4\ub2e4. Success: \ucee8\ud14c\uc774\ub108\uac00 probe \ub97c \ud1b5\uacfc\ud568 Failure: \ucee8\ud14c\uc774\ub108\uac00 probe \ub97c \uc2e4\ud328\ud568 Unknown: probe\uac00 \uc2e4\ud328\ud558\uc600\ub2e4. (\uc5b4\ub5a4 \uc561\uc158\ub3c4 \ud574\uc11c\ub294 \uc548\ub41c\ub2e4. \uadf8\ub9ac\uace0 kubelet\uc774 \ucd94\uac00 \ud655\uc778\uc744 \ud560\uac83\uc774\ub2e4.)","title":"2.5 Readiness & Liveness Probe"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#liveness-readiness-and-startup-probes","text":"","title":"Liveness, Readiness and Startup Probes"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#liveness","text":"kubelet\uc740 liveness probes \ub97c \ucee8\ud14c\uc774\ub108\uc758 \uc7ac\uc2dc\uc791\ud560 \uc2dc\uc810(application\uc758 deadlock\ub4f1)\uc744 \uc54c\uae30 \uc704\ud574 \uc0ac\uc6a9 \ud55c\ub2e4. application\uc774 \uc2e4\ud589\uc911\uc774\uc9c0\ub9cc \uc9c4\ud589 \ubd88\uac00\ub2a5 \ud560\ub54c, \ucee8\ud14c\uc774\ub108\ub97c \uc7ac\uc2dc\uc791 \ud558\ub294\uac83\uc73c\ub85c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uac00\uc6a9\uc131\uc744 \ub192\ud790\uc218 \uc788\ub2e4. kubelet\uc740 liveness probe handler\ub97c \uc774\uc6a9\ud558\uc5ec \uc8fc\uae30\uc801\uc73c\ub85c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uba70, \uc2e4\ud328\ud560 \uacbd\uc6b0 pod\ub97c \uc885\ub8cc\ud55c\ub2e4(SIGTERM). liveness probe\ub294 application\uc774 \uc798\ubabb\ub41c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uace0 \ubcf5\uc6d0\ud55c\ub2e4. liveness example # ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/ apiVersion: v1 kind: Pod metadata: labels: test: liveness name: liveness-http spec: containers: - name: liveness image: k8s.gcr.io/liveness args: - /server livenessProbe: httpGet: path: /healthz port: 8080 httpHeaders: - name: Custom-Header value: Awesome initialDelaySeconds: 3 periodSeconds: 3 Info \uc704 yaml\uc740 \ub2e8\ub3c5 \ucee8\ud14c\uc774\ub108\ub97c \uac16\ub294 pod\uc5d0\uc11c livenessProbe\ub97c \uc124\uc815\ud55c \ub0b4\uc6a9 periodSeconds\ub294 kubelet\uc774 \ub9e4 3\ucd08\ub9c8\ub2e4 liveness probe\uac00 \uc2e4\ud589\ub418\ub294\uac83\uc744 \uc815\uc758\ud55c\ub2e4. initialDelaySeconds\ub294 kubelet\uc774 \uccab probe \uc2e4\ud589\uc804\uc5d0 \ub300\uae30\ud558\uae30 \uc704\ud55c \uc2dc\uac04(\ub2e8\uc704: sec)\uc744 \uba85\uc2dc\ud55c\ub2e4. kubelet\uc774 probe\ub97c \uc2e4\ud589\ud558\uba74, kubelet\uc740 http handler\ub97c \uc0ac\uc6a9\ud558\uc5ec GET request\ub97c \uc11c\ubc84\ub85c \ubcf4\ub0b4\uace0, \uc9c0\uc815\ud55c path\ub97c \ud1b5\ud574 success\uac00 \ub3cc\uc544\uc624\uba74 healthy. failure\uac00 \ub3cc\uc544\uc624\uba74 \ucee8\ud14c\uc774\ub108\ub97c \uc885\ub8cc\ud558\uace0 \uc7ac\uc2dc\uc791\ud55c\ub2e4.","title":"Liveness"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#readiness","text":"kubelet\uc740 readiness probe \uc73c\ub85c \ucee8\ud14c\uc774\ub108\uac00 \ud2b8\ub798\ud53d\uc744 \ubc1b\uc744\uc218 \uc788\ub294 \uc900\ube44\uac00 \ub41c \uc2dc\uc810 \uc744 \ud655\uc778\ud55c\ub2e4. pod\uc740 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc900\ube44\ub418\uba74 \ud2b8\ub798\ud53d\uc744 \ubc1b\uc744 \uc900\ube44\uac00 \ub41c\uac83\uc73c\ub85c \uc0dd\uac01\ud55c\ub2e4. \uc774 \uc2e0\ud638\uc758 \uc6a9\ub3c4\ub294 \uc5b4\ub5a4 pod\uc774 \uc11c\ube44\uc2a4\uc758 \ubc31\uc5d4\ub4dc\ub85c \uc0ac\uc6a9\ub420\uc9c0 \uc81c\uc5b4\ud558\ub294\uac83\uc774\ub2e4. pod\uc774 \uc900\ube44\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc73c\uba74 service loadbalancer\uc5d0\uc11c \uc81c\uac70\ud55c\ub2e4.(endpoint \uc81c\uac70) readiness probe\ub294 pod\uc758 \uc804\uccb4 life cycle\ub3d9\uc548 \uc2e4\ud589\ub41c\ub2e4. \uc774\uac83\uc740 readiness probe\uac00 pod\uac00 \uc2e4\ud589\ub418\ub294 \ub3d9\uc548 \ubc18\ubcf5\uc801\uc73c\ub85c \uc2e4\ud589\ub418\ub294\uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. \uc774 \ud2b9\uc9d5\uc73c\ub85c application\uc774 \uc77c\uc2dc\uc801\uc73c\ub85c \ud2b8\ub798\ud53d\uc744 \ubc1b\uc9c0 \ubabb\ud558\ub294 \uc0c1\ud669\uc758 \ucc98\ub9ac\ub3c4 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4. \uc774\ub7ec\ud55c \uacbd\uc6b0 application\uc744 \uc885\ub8cc\ud558\ub294\uac83\uc774 \uc544\ub2c8\uace0, \ubcf5\uad6c(\uc870\uac74\uc774 \ub9cc\uc871\ub420\ub54c)\ub420\ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9b0\ub2e4. readiness example # ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/ apiVersion: v1 kind: Pod metadata: name: goproxy labels: app: goproxy spec: containers: - name: goproxy image: k8s.gcr.io/goproxy:0.1 ports: - containerPort: 8080 readinessProbe: tcpSocket: port: 8080 initialDelaySeconds: 5 periodSeconds: 10 livenessProbe: tcpSocket: port: 8080 initialDelaySeconds: 15 periodSeconds: 20 Info kubelet\uc740 readinessProbe.initialDelaySeconds\uc5d0 \uba85\uc2dc\ub41c 5\ucd08 \ub4a4\uc5d0 \uccab\ubc88\uc9f8 readiness\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4. probe\uac00 \uc131\uacf5\ud558\uba74 pod\uc774 ready\ub41c \uac83\uc73c\ub85c status\uac00 \ubcc0\uacbd\ub429\ub2c8\ub2e4. kubelet\uc740 periodSeconds\uc5d0 \uba85\uc2dc\ub41c 10\ucd08 \ub9c8\ub2e4 \uac80\uc0ac\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4. livenessProbe\ub3c4 \uba85\uc2dc\ub41c \ub0b4\uc6a9\ub300\ub85c \uc9c4\ud589\ub429\ub2c8\ub2e4.","title":"Readiness"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#startup","text":"kubelet\uc740 startup probe \ub97c \ucee8\ud14c\uc774\ub108 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc2dc\uc791\ub41c \uc2dc\uc810 \uc744 \uc54c\uae30 \uc704\ud574 \uc0ac\uc6a9\ud55c\ub2e4. \ub9cc\uc57d \uc774 probe\uac00 \uc124\uc815\ub418\uc5b4\uc788\uace0, \uadf8\uac83\uc758 liveness, readiness \uac00 startup probe\uac00 \uc131\uacf5\ud560\ub54c\uae4c\uc9c0 disable \uc774\ub77c\uba74, \uc774 \ub450 probe\uac00 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc2dc\uc791\uc2dc \uac04\uc12d\ud558\uc9c0 \uc54a\ub294\uac83\uc744 \ud655\uc778 \ud55c\ub2e4. \uc774\uac83\uc740 \ucee8\ud14c\uc774\ub108 \uc2dc\uc791\uc774 \ub290\ub824\uc11c kubelet\uc5d0 \uc758\ud574 \uc62c\ub77c\uc624\uace0 \uc2e4\ud589\ub418\uae30\uc804\uc5d0 \uc8fd\ub294\uac83\uc744 \ud53c\ud558\uae30 \uc704\ud574 liveness check \uc801\uc6a9\uc2dc \uc0ac\uc6a9\ub41c\ub2e4. startup probe\ub294 \uc2dc\uc791\uc774 \ub290\ub9b0 \ucee8\ud14c\uc774\ub108 \ub610\ub294 \uc608\uce21\ud560\uc218 \uc5c6\ub294 \ucd08\uae30\ud654 \ud504\ub85c\uc138\uc2a4\uac00 \uc788\ub294 application\uc5d0 \ucd5c\uc801\ud654\ub418\uc5b4 \uc788\ub2e4. failureThreshold * periodSeconds \ub9cc\ud07c liveness/readiness probe\ub97c \uae30\ub2e4\ub838\ub2e4\uac00 startup probe\uac00 \uc131\uacf5\ud558\uba74 \uc774\ud6c4\uc5d0 \uc2e4\ud589\ub41c\ub2e4. startup example apiVersion: v1 kind: Pod metadata: labels: test: startup name: startup-probe-test spec: containers: - name: liveness image: k8s.gcr.io/liveness args: - /server startupProbe: httpGet: path: /healthz port: liveness-port failureThreshold: 30 periodSeconds: 10 livenessProbe: httpGet: path: /healthz port: liveness-port failureThreshold: 1 periodSeconds: 10 Info startupProbe\uc5d0 \uba85\uc2dc\ub418\uc5b4 \uc788\ub294 failureThreshold * periodSeconds(300\ucd08) \ucd5c\ub300 \uc2dc\uac04\uae4c\uc9c0 application\uc774 \uc2dc\uc791\ub420 \uc2dc\uac04\uc744 \ud655\ubcf4\ud560\uc218 \uc788\ub2e4. startupProbe\uac00 \uc131\uacf5\ud558\uba74, livenessProbe\uac00 \ubc14\ub85c \ub3d9\uc791\ud558\uc5ec deadlock\uc0c1\ud0dc\ub97c \ud655\uc778\ud55c\ub2e4. startupProbe\uac00 \uc8fc\uc5b4\uc9c4 \ucd5c\ub300 \uc2dc\uac04\ub3d9\uc548 \uc131\uacf5\ud558\uc9c0 \ubabb\ud558\uba74 \ucee8\ud14c\uc774\ub108\ub294 \uc885\ub8cc\ub418\uace0, restartPolicy\uc5d0 \ub9de\uac8c \ub3d9\uc791\ud55c\ub2e4.","title":"Startup"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#podspec-probe","text":"spec.containers[].livenessProbe spec.containers[].readinessProbe spec.containers[].startupProbe","title":"PodSpec\uc5d0 \ud3ec\ud568\ub418\uc5b4 \uc788\ub294 Probe"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#probe-handler-type","text":"api document reference \uc704\uc5d0\uc11c \uc774\uc57c\uae30\ud55c probe\ub294 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c kubelet\uc5d0 \uc758\ud574 \uc8fc\uae30\uc801\uc73c\ub85c \uc218\ud589\ub418\ub294 \uc9c4\ub2e8\uc774\ub2e4. \uc774 \uc9c4\ub2e8\uc744 \uc218\ud589\ud558\uae30 \uc704\ud574\uc11c \uac01 \uc0c1\ud669\uc5d0 \ub9de\ucdb0 \uc544\ub798\uc758 handler\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \uc544\ub798\uc758 \uac01 \ud578\ub4e4\ub7ec\uc5d0\uc11c \ud544\uc694\ud55c \uc124\uc815\uc740 \uc704 api doc\uc5d0\uc11c \ucc38\uace0 \uac00\ub2a5\ud558\ub2e4.","title":"Probe handler type"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#exec-execaction","text":"\uc9c0\uc815\ud55c \ucee4\ub9e8\ub4dc\ub97c \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0\uc11c \uc2e4\ud589\ud558\uc5ec \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568. \ucee8\ud14c\uc774\ub108 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc758 root(\u201c/\u201d)\uc5d0\uc11c \uc2e4\ud589\ud568 exit 0\uc774\uba74 healthy no-zero\uba74 unhealthy","title":"exec - ExecAction"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#tcp-tcpsocketaction","text":"\uc9c0\uc815\ud55c tcp socket \ud3ec\ud2b8\ub97c \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc5f4\ub824\uace0 \uc2dc\ub3c4\ud558\uc5ec \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568. \ucee4\ub125\uc158\uc774 \uc0dd\uc131\ub418\uba74 healty, \uc2e4\ud328\ud558\uba74 unhealthy","title":"tcp - TCPSocketAction"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#httpget-httpgetaction","text":"\uc9c0\uc815\ud55c \ud3ec\ud2b8, \ud638\uc2a4\ud2b8\uc640 path\ub97c \uac00\uc9c0\uace0 http get \uc2e4\ud589\uc744 \ud1b5\ud574 \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568. \uc751\ub2f5\uc758 status code\uac00 200\ud06c\uace0 400\ubbf8\ub9cc\uc774\uba74 healthy, \uadf8\uc678\ub294 unhealthy","title":"httpget - HTTPGetAction"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#grpc-grpcaction","text":"alpha feature on v1.23 - feature gate\uc5d0\uc11c GRPC\ucee8\ud14c\uc774\ub108Probe enable\ud574\uc57c \ud568 \uc9c0\uc815\ud55c \ud3ec\ud2b8, \uc11c\ube44\uc2a4 \uc774\ub984\uc744 \uac00\uc9c0\uace0 rpc check \uc694\uccad\uc744 \ubcf4\ub0b4\uc11c \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568 \uc751\ub2f5\uc774 SERVING(OK)\uc774\uba74 healthy, \uadf8 \uc678\ub294 unhealthy","title":"grpc - GRPCAction"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#configure-probes","text":"probe\ub294 liveness/readiness\uc758 \ud655\uc778 \ub3d9\uc791\uc744 \ubcf4\ub2e4 \uc815\ud655\ud558\uac8c \uc81c\uc5b4\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud560\uc218 \uc788\ub294 \uc5ec\ub7ec \ud544\ub4dc\uac00 \uc788\ub2e4. initialDelaySeconds: probe\ub97c \uc2dc\uc791\ud558\uae30 \uc804\uc5d0 \ucee8\ud14c\uc774\ub108\uac00 \uc2dc\uc791\ud560\ub54c \ud544\uc694\ud55c \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 0 periodSeconds: probe\ub97c \uc2e4\ud589\ud558\ub294 \ube48\ub3c4\uc758 \uae30\uac04 \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 10\ucd08, min 1\ucd08 timeoutSeconds: probe\ub97c \uc2e4\ud589\ud55c \ud6c4\uc5d0 timeout \ub418\ub294 \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 1\ucd08, min 1\ucd08 successThreshold: probe\uac00 \uc2e4\ud328\ud55c \ud6c4\uc5d0 \uc131\uacf5\ud55c\uac83\uc73c\ub85c \uac04\uc8fc\ud558\ub294 \ucd5c\uc18c\uc758 \uc5f0\uc18d\ub41c \uc131\uacf5\uc758 \uc218. default 1, min 1 failureThreshold: probe\uac00 \uc2e4\ud328\ud558\uba74 kubernete\uac00 \uc774 \ud68c\uc218\ub9cc\ud07c \uc2dc\ub3c4\ud55c \ud6c4\uc5d0 \ud3ec\uae30\ud568. livenessprobe\uc758 \uacbd\uc6b0, conatiner\ub97c \uc7ac\uc2dc\uc791\ud558\ub294\uac83\uc744 \uc758\ubbf8\ud558\uace0, readiness probe\uc758 \uacbd\uc6b0 Unready\ub85c \ud45c\uae30\ud568. default 3, min 1 \uc704 probe \ub294 \uc544\ub798\uc758 status\ub97c \uac00\uc9c4\ub2e4. Success: \ucee8\ud14c\uc774\ub108\uac00 probe \ub97c \ud1b5\uacfc\ud568 Failure: \ucee8\ud14c\uc774\ub108\uac00 probe \ub97c \uc2e4\ud328\ud568 Unknown: probe\uac00 \uc2e4\ud328\ud558\uc600\ub2e4. (\uc5b4\ub5a4 \uc561\uc158\ub3c4 \ud574\uc11c\ub294 \uc548\ub41c\ub2e4. \uadf8\ub9ac\uace0 kubelet\uc774 \ucd94\uac00 \ud655\uc778\uc744 \ud560\uac83\uc774\ub2e4.)","title":"Configure Probes"},{"location":"hello-kubernetes/section02/service-ingress/","text":"2.3 Service & Ingress Service\ub780 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc11c\ube44\uc2a4\ub294 \uc5ec\ub7ec \uac1c\uc758 \ubd84\uc0b0\ub41c \ud615\ud0dc\ub85c \ubc30\ud3ec\ub41c Pod \ub4e4\uc744 \ud558\ub098\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub85c \uc811\uadfc\ud560 \uc218 \uc788\uac8c \ud55c \ub9ac\uc18c\uc2a4\uc774\ub2e4. \uc11c\ube44\uc2a4\ub97c \ud1b5\ud574 pod\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\uc73c\uba70 \uc11c\ube44\uc2a4\uc758 \uc885\ub958\ub294 ClusterIP, NodePort, LoadBalancer, \uadf8\ub9ac\uace0 Headless \ud0c0\uc785\uc774 \uc874\uc7ac\ud55c\ub2e4. \uc11c\ube44\uc2a4 \ud0c0\uc785\uc5d0 \ub530\uc11c \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \ud639\uc740 \uc678\ubd80 IP \uc8fc\uc18c\uac00 \ud560\ub2f9\ub418\uba70 \uc11c\ube44\uc2a4\uc5d0 \uc5f0\ub3d9\ub41c(label\uc774 \ub9e4\uce6d\ub41c) \ud30c\ub4dc \uc911 \ud558\ub098\ub85c \ub77c\uc6b0\ud305\uc774 \ub41c\ub2e4. \ud0c0\uc785\uc774 headless\uc778 \uacbd\uc6b0\ub294 \ubcc4\ub3c4\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc758 \uc8fc\uc18c\uac00 \ub098\uc624\ub294 \uac83\uc774 \uc544\ub2cc \uc11c\ube44\uc2a4\uc5d0 \uc5f0\uacb0\ub41c \uc804\uccb4 Pod\uc758 IP \ubaa9\ub85d\uc774 \ud638\ucd9c\ub41c\ub2e4. \uc11c\ube44\uc2a4\ub294 \uae30\ubcf8\uc73c\ub85c \ub178\ub4dc\uc5d0 \uc788\ub294 iptables \ud504\ub85d\uc2dc \ubaa8\ub4dc \ub85c \ub3d9\uc791\ud558\uba70 iptables \uc124\uc815\uac12\uc73c\ub85c \uad00\ub9ac\uac00 \ub418\uba70 \uc815\uc0c1\uc801\uc73c\ub85c \uc218\ud589\ub418\uace0 \uc788\ub294 \ubc31\uc5d4\ub4dc \ud30c\ub4dc\ub85c\ub9cc \uc5f0\uacb0\ub41c\ub2e4. \ub610\ud55c \uc11c\ube44\uc2a4\ub294 namespace\uc5d0 \uadc0\uc18d\uc774 \ub418\ubbc0\ub85c \ub2e4\ub978 namespace\uc5d0 \uc788\ub294 \uc571\uc774 \uc811\uadfc\ud574\uc57c \ud558\ub294 \uacbd\uc6b0 <service>.<namespace>.svc \ub85c \uc811\uadfc\ud560 \uc218 \uc788\uc73c\uba70 \uc11c\ube44\uc2a4\ub97c \uc678\ubd80\ub85c \ub178\ucd9c\ud558\uace0\uc790 \ud560 \ub54c\ub294 NodePort, LoadBalancer, \uadf8\ub9ac\uace0 \uc544\ub798\uc11c \ub530\ub85c \uc124\uba85\ud558\ub294 Ingress\ub97c \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4. Service Type Type Description ClusterIP \uae30\ubcf8\uac12\uc774\uba70 \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \uc8fc\uc18c\ub97c \ud560\ub2f9 \ubc1b\uc544 \uc11c\ube44\uc2a4 NodePort Node\uc758 Port \ubc94\uc704(30000-32767)\uc911 \ud558\ub098\uac00 \ud560\ub2f9\uc774 \ub418\uba70 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ud574\ub2f9 \ub178\ub4dc\uc758 IP \uc8fc\uc18c\uc640 \ud560\ub2f9\ub41c Port\ub85c \uc11c\ube44\uc2a4 LoadBalancer \ud074\ub7ec\uc2a4\ud130\uc5d0 \uad6c\uc131\ub41c \ub124\ud2b8\uc6cc\ud06c \ubd80\ud558 \ubd84\uc0b0\uae30\uc758 IP \ud639\uc740 \ud074\ub77c\uc6b0\ub4dc\uc758 \uacbd\uc6b0 \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc5f0\ub3d9\ub41c Cloud-Native LB\uc758 IP \uc8fc\uc18c\ub85c \uc11c\ube44\uc2a4 Headless \ud558\ub098\uc758 \ub300\ud45c IP \uc8fc\uc18c\uac00 \uc544\ub2cc \ubaa8\ub4e0 Pod\uc758 IP\uc744 \ub9ac\uc2a4\ud2b8\ub85c \uc81c\uacf5, Zookeeper\ucc98\ub7fc \uc11c\ubc84\uc758 \ubaa8\ub4e0 IP\ub97c \uc54c\uc544\uc57c\ud560 \uacbd\uc6b0 \uc801\ud569 ClusterIP type\uc758 \uae30\ubcf8\uac12\uc774\uba70 \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \uc8fc\uc18c\ub97c \ud560\ub2f9 \ubc1b\uc544 \uc11c\ube44\uc2a4\uac00 \ub41c\ub2e4. \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc758 \ub2e4\ub978 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c ClusterIP\ub85c\ub3c4 \uc811\uadfc \uac00\ub2a5\ud558\uba70 \uc790\ub3d9\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc5d0 \uc0dd\uc131\ub41c CNAME <service>.<namespace>.svc.<cluster_domain> DNS Records \ub85c\ub3c4 \uc811\uadfc \uac00\ub2a5\ud558\ub2e4. kubectl run http --image=busybox --port=80 NodePort Load Balancer \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 LoadBalancer\uac00 \uc874\uc7ac \ud55c\ub2e4\uba74 \ud574\ub2f9 LB class \uc774\ub984\uc744 Annotation\uc5d0 \uc785\ub825\ud558\uc5ec \ud574\ub2f9 \uc778\uadf8\ub798\uc2a4\uc5d0 \uc5f0\ub3d9 \ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS EKS\ud658\uacbd\uc5d0\uc11c External NLB\uac00 \uc544\ub2cc Internal NLB\ub85c \uc0ac\uc6a9 \ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815 \uac00\ub2a5\ud558\ub2e4 service: type: LoadBalancer nodePort: port: 3100 annotations: service.beta.kubernetes.io/aws-load-balancer-internal: \"true\" service.beta.kubernetes.io/aws-load-balancer-scheme: internal service.beta.kubernetes.io/aws-load-balancer-type: nlb Headless Ingress\ub780 Ingress\ub294 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \ud2b8\ub808\ud53d \uc815\ucc45\uc758 \uc9d1\ud569\uc774\uba70 Ingress Controller\ub294 Ingress\ub97c \uad6c\ud604, \uc6b4\uc601\ud558\uae30 \uc704\ud55c \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc774\ub2e4. \ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70, GCP\ub294 \uae30\ubcf8\uc73c\ub85c GCP HTTP(S) LoadBalancer\ub85c \uc5f0\ub3d9\uc774 \ub41c\ub2e4. \uc774\uac83\uc740 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9 \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140\ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \ub2e4\ub978 Ingress Controller\ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4. \uc624\ud508\uc18c\uc2a4\ub85c\ub294 Kubernetes\uc5d0\uc11c \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0\ud558\ub294 Ingress-Nginx \uac00 \uac00\uc7a5 \ub300\ud45c\uc801\uc774\uba70 \uc2e0\ub8b0 \ud560\uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc774\ub2e4. \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\uac00 \uc874\uc7ac \ud55c\ub2e4\uba74 \ud574\ub2f9 ingress class \uc774\ub984\uc744 Annotation\uc5d0 \uc785\ub825\ud558\uc5ec \ud574\ub2f9 \uc778\uadf8\ub798\uc2a4\uc5d0 \uc5f0\ub3d9 \ud560 \uc218 \uc788\uc73c\uba70 Target Group Rule, Sticky session\uacfc \uac19\uc740 ALB \uc124\uc815\ub3c4 annotation\uc5d0\uc11c \ucc98\ub9ac \uac00\ub2a5\ud558\ub2e4. ALB Ingress Annotation metadata: namespace: default name: ingress annotations: kubernetes.io/ingress.class: alb alb.ingress.kubernetes.io/scheme: internet-facing alb.ingress.kubernetes.io/target-group-attributes: stickiness.enabled=true,stickiness.lb_cookie.duration_seconds=60 alb.ingress.kubernetes.io/actions.forward-multiple-tg: > {\"type\":\"forward\",\"forwardConfig\":{\"targetGroups\":[{\"serviceName\":\"service-1\",\"servicePort\":\"http\",\"weight\":20},{\"serviceName\":\"service-2\",\"servicePort\":80,\"weight\":20},{\"targetGroupARN\":\"arn-of-your-non-k8s-target-group\",\"weight\":60}],\"targetGroupStickinessConfig\":{\"enabled\":true,\"durationSeconds\":200}}}","title":"2.3 Service & Ingress"},{"location":"hello-kubernetes/section02/service-ingress/#23-service-ingress","text":"","title":"2.3 Service &amp; Ingress"},{"location":"hello-kubernetes/section02/service-ingress/#service","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc11c\ube44\uc2a4\ub294 \uc5ec\ub7ec \uac1c\uc758 \ubd84\uc0b0\ub41c \ud615\ud0dc\ub85c \ubc30\ud3ec\ub41c Pod \ub4e4\uc744 \ud558\ub098\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub85c \uc811\uadfc\ud560 \uc218 \uc788\uac8c \ud55c \ub9ac\uc18c\uc2a4\uc774\ub2e4. \uc11c\ube44\uc2a4\ub97c \ud1b5\ud574 pod\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\uc73c\uba70 \uc11c\ube44\uc2a4\uc758 \uc885\ub958\ub294 ClusterIP, NodePort, LoadBalancer, \uadf8\ub9ac\uace0 Headless \ud0c0\uc785\uc774 \uc874\uc7ac\ud55c\ub2e4. \uc11c\ube44\uc2a4 \ud0c0\uc785\uc5d0 \ub530\uc11c \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \ud639\uc740 \uc678\ubd80 IP \uc8fc\uc18c\uac00 \ud560\ub2f9\ub418\uba70 \uc11c\ube44\uc2a4\uc5d0 \uc5f0\ub3d9\ub41c(label\uc774 \ub9e4\uce6d\ub41c) \ud30c\ub4dc \uc911 \ud558\ub098\ub85c \ub77c\uc6b0\ud305\uc774 \ub41c\ub2e4. \ud0c0\uc785\uc774 headless\uc778 \uacbd\uc6b0\ub294 \ubcc4\ub3c4\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc758 \uc8fc\uc18c\uac00 \ub098\uc624\ub294 \uac83\uc774 \uc544\ub2cc \uc11c\ube44\uc2a4\uc5d0 \uc5f0\uacb0\ub41c \uc804\uccb4 Pod\uc758 IP \ubaa9\ub85d\uc774 \ud638\ucd9c\ub41c\ub2e4. \uc11c\ube44\uc2a4\ub294 \uae30\ubcf8\uc73c\ub85c \ub178\ub4dc\uc5d0 \uc788\ub294 iptables \ud504\ub85d\uc2dc \ubaa8\ub4dc \ub85c \ub3d9\uc791\ud558\uba70 iptables \uc124\uc815\uac12\uc73c\ub85c \uad00\ub9ac\uac00 \ub418\uba70 \uc815\uc0c1\uc801\uc73c\ub85c \uc218\ud589\ub418\uace0 \uc788\ub294 \ubc31\uc5d4\ub4dc \ud30c\ub4dc\ub85c\ub9cc \uc5f0\uacb0\ub41c\ub2e4. \ub610\ud55c \uc11c\ube44\uc2a4\ub294 namespace\uc5d0 \uadc0\uc18d\uc774 \ub418\ubbc0\ub85c \ub2e4\ub978 namespace\uc5d0 \uc788\ub294 \uc571\uc774 \uc811\uadfc\ud574\uc57c \ud558\ub294 \uacbd\uc6b0 <service>.<namespace>.svc \ub85c \uc811\uadfc\ud560 \uc218 \uc788\uc73c\uba70 \uc11c\ube44\uc2a4\ub97c \uc678\ubd80\ub85c \ub178\ucd9c\ud558\uace0\uc790 \ud560 \ub54c\ub294 NodePort, LoadBalancer, \uadf8\ub9ac\uace0 \uc544\ub798\uc11c \ub530\ub85c \uc124\uba85\ud558\ub294 Ingress\ub97c \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.","title":"Service\ub780"},{"location":"hello-kubernetes/section02/service-ingress/#service-type","text":"Type Description ClusterIP \uae30\ubcf8\uac12\uc774\uba70 \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \uc8fc\uc18c\ub97c \ud560\ub2f9 \ubc1b\uc544 \uc11c\ube44\uc2a4 NodePort Node\uc758 Port \ubc94\uc704(30000-32767)\uc911 \ud558\ub098\uac00 \ud560\ub2f9\uc774 \ub418\uba70 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ud574\ub2f9 \ub178\ub4dc\uc758 IP \uc8fc\uc18c\uc640 \ud560\ub2f9\ub41c Port\ub85c \uc11c\ube44\uc2a4 LoadBalancer \ud074\ub7ec\uc2a4\ud130\uc5d0 \uad6c\uc131\ub41c \ub124\ud2b8\uc6cc\ud06c \ubd80\ud558 \ubd84\uc0b0\uae30\uc758 IP \ud639\uc740 \ud074\ub77c\uc6b0\ub4dc\uc758 \uacbd\uc6b0 \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc5f0\ub3d9\ub41c Cloud-Native LB\uc758 IP \uc8fc\uc18c\ub85c \uc11c\ube44\uc2a4 Headless \ud558\ub098\uc758 \ub300\ud45c IP \uc8fc\uc18c\uac00 \uc544\ub2cc \ubaa8\ub4e0 Pod\uc758 IP\uc744 \ub9ac\uc2a4\ud2b8\ub85c \uc81c\uacf5, Zookeeper\ucc98\ub7fc \uc11c\ubc84\uc758 \ubaa8\ub4e0 IP\ub97c \uc54c\uc544\uc57c\ud560 \uacbd\uc6b0 \uc801\ud569","title":"Service Type"},{"location":"hello-kubernetes/section02/service-ingress/#clusterip","text":"type\uc758 \uae30\ubcf8\uac12\uc774\uba70 \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \uc8fc\uc18c\ub97c \ud560\ub2f9 \ubc1b\uc544 \uc11c\ube44\uc2a4\uac00 \ub41c\ub2e4. \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc758 \ub2e4\ub978 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c ClusterIP\ub85c\ub3c4 \uc811\uadfc \uac00\ub2a5\ud558\uba70 \uc790\ub3d9\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc5d0 \uc0dd\uc131\ub41c CNAME <service>.<namespace>.svc.<cluster_domain> DNS Records \ub85c\ub3c4 \uc811\uadfc \uac00\ub2a5\ud558\ub2e4. kubectl run http --image=busybox --port=80","title":"ClusterIP"},{"location":"hello-kubernetes/section02/service-ingress/#nodeport","text":"","title":"NodePort"},{"location":"hello-kubernetes/section02/service-ingress/#load-balancer","text":"\ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 LoadBalancer\uac00 \uc874\uc7ac \ud55c\ub2e4\uba74 \ud574\ub2f9 LB class \uc774\ub984\uc744 Annotation\uc5d0 \uc785\ub825\ud558\uc5ec \ud574\ub2f9 \uc778\uadf8\ub798\uc2a4\uc5d0 \uc5f0\ub3d9 \ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS EKS\ud658\uacbd\uc5d0\uc11c External NLB\uac00 \uc544\ub2cc Internal NLB\ub85c \uc0ac\uc6a9 \ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815 \uac00\ub2a5\ud558\ub2e4 service: type: LoadBalancer nodePort: port: 3100 annotations: service.beta.kubernetes.io/aws-load-balancer-internal: \"true\" service.beta.kubernetes.io/aws-load-balancer-scheme: internal service.beta.kubernetes.io/aws-load-balancer-type: nlb","title":"Load Balancer"},{"location":"hello-kubernetes/section02/service-ingress/#headless","text":"","title":"Headless"},{"location":"hello-kubernetes/section02/service-ingress/#ingress","text":"Ingress\ub294 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \ud2b8\ub808\ud53d \uc815\ucc45\uc758 \uc9d1\ud569\uc774\uba70 Ingress Controller\ub294 Ingress\ub97c \uad6c\ud604, \uc6b4\uc601\ud558\uae30 \uc704\ud55c \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc774\ub2e4. \ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70, GCP\ub294 \uae30\ubcf8\uc73c\ub85c GCP HTTP(S) LoadBalancer\ub85c \uc5f0\ub3d9\uc774 \ub41c\ub2e4. \uc774\uac83\uc740 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9 \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140\ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \ub2e4\ub978 Ingress Controller\ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4. \uc624\ud508\uc18c\uc2a4\ub85c\ub294 Kubernetes\uc5d0\uc11c \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0\ud558\ub294 Ingress-Nginx \uac00 \uac00\uc7a5 \ub300\ud45c\uc801\uc774\uba70 \uc2e0\ub8b0 \ud560\uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc774\ub2e4. \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\uac00 \uc874\uc7ac \ud55c\ub2e4\uba74 \ud574\ub2f9 ingress class \uc774\ub984\uc744 Annotation\uc5d0 \uc785\ub825\ud558\uc5ec \ud574\ub2f9 \uc778\uadf8\ub798\uc2a4\uc5d0 \uc5f0\ub3d9 \ud560 \uc218 \uc788\uc73c\uba70 Target Group Rule, Sticky session\uacfc \uac19\uc740 ALB \uc124\uc815\ub3c4 annotation\uc5d0\uc11c \ucc98\ub9ac \uac00\ub2a5\ud558\ub2e4. ALB Ingress Annotation metadata: namespace: default name: ingress annotations: kubernetes.io/ingress.class: alb alb.ingress.kubernetes.io/scheme: internet-facing alb.ingress.kubernetes.io/target-group-attributes: stickiness.enabled=true,stickiness.lb_cookie.duration_seconds=60 alb.ingress.kubernetes.io/actions.forward-multiple-tg: > {\"type\":\"forward\",\"forwardConfig\":{\"targetGroups\":[{\"serviceName\":\"service-1\",\"servicePort\":\"http\",\"weight\":20},{\"serviceName\":\"service-2\",\"servicePort\":80,\"weight\":20},{\"targetGroupARN\":\"arn-of-your-non-k8s-target-group\",\"weight\":60}],\"targetGroupStickinessConfig\":{\"enabled\":true,\"durationSeconds\":200}}}","title":"Ingress\ub780"},{"location":"hello-kubernetes/section02/handson/configmap-secret/","text":"\ud578\uc988\uc628 2.6 Configmap & Secret \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uc124\uc815 \ud30c\uc77c\uc744 Configmap\ub85c \uad00\ub9ac \ubc0f \uc911\uc694\ud55c \ub370\uc774\ud130\ub97c Secrets\uc73c\ub85c \uc778\ucf54\ub529\ud558\uc5ec \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx \uc124\uc815 \ud30c\uc77c\uc744 Configmap\uc73c\ub85c \uad00\ub9ac\ud558\uace0 DB Password\ub97c Secret\ub97c \ud1b5\ud574 \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Configmap \uacfc Secret\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Architecture Nginx \uc124\uc815 \ud30c\uc77c\uc744 Configmap, DB Password\ub97c Secret\ub97c \ud1b5\ud574 \uc124\uc815 \uad00\ub9ac 1 ConfigMap 1.1 ConfigMap \uc791\uc131\ud558\uae30 \uc544\ub798\uc640 \uac19\uc774 nginx\uc758 \uc124\uc815\ud30c\uc77c \ud558\ub098\uc640, key-value \uc30d\uc73c\ub85c \uc774\ub8e8\ub294 \ubcc0\uc218 2\uac1c\ub97c \ud3ec\ud568\ud55c ConfigMap\uc744 \ub9cc\ub4e4\uc5b4\ubcf8\ub2e4. apiVersion: v1 kind: ConfigMap metadata: name: sample-configs data: default_ttl: \"30\" say_hello: \"Hi!\" sample-nginx.conf: | server { listen 80; index index.html; server_name cloudacode.com; location / { root /cloudacode/static/ } location /api { proxy_pass https://api.cloudacode.internal } } \uc704\uc5d0\uc11c \uc791\uc131\ud55c \ud30c\uc77c\uc744 sample-cm.yaml \uc774\ub77c\uace0 \uc800\uc7a5\ud55c \ub4a4, \ub2e4\uc74c\uacfc \uac19\uc774 ConfigMap \uc624\ube0c\uc81d\ud2b8\ub97c \uc0dd\uc131\ud55c\ub2e4. $ kubectl apply -f sample-cm.yaml configmap/sample-configs created $ kubectl get cm NAME DATA AGE sample-configs 3 27s 1.2 Pod\uc5d0 \ud658\uacbd\ubcc0\uc218(Environment Variable)\ub85c ConfigMap\uc758 \ub370\uc774\ud130\ub97c \uc77d\uc5b4\ubcf4\uae30 apiVersion: v1 kind: Pod metadata: name: sample-pod spec: containers: - name: demo image: busybox command: [\"tail\", \"-f\", \"/dev/null\"] env: - name: DEFAULT_TTL valueFrom: configMapKeyRef: name: sample-configs key: default_ttl \uc704\uc5d0\uc11c \uc791\uc131\ud55c \ud30c\uc77c\uc744 sample-pod.yaml \uc774\ub77c\uace0 \uc800\uc7a5\ud55c \ub4a4, \ub2e4\uc74c\uacfc \uac19\uc774 Pod\ub97c \uc0dd\uc131\ud55c\ub2e4. $ kubectl apply -f sample-pod.yaml pod/sample-pod created $ kubectl get po --watch NAME READY STATUS RESTARTS AGE sample-pod 0/1 ContainerCreating 0 4s sample-pod 1/1 Running 0 6s sample-pod \uc0dd\uc131\uc774 \uc131\uacf5\ud558\uc600\ub2e4\uba74, \uc544\ub798\uc640 \uac19\uc774 pod \ub0b4\ubd80\uc758 \ud658\uacbd\ubcc0\uc218 \uc815\ubcf4\ub97c \uc870\ud68c\ud574\ubcf8\ub2e4. $ k exec sample-pod -- env PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin HOSTNAME=sample-pod # \uc544\ub798\uc640 \uac19\uc774 ConfigMap\uc5d0\uc11c \uc0dd\uc131\ud55c \uac12\uc774 \ud658\uacbd\ubcc0\uc218\ub85c \uc8fc\uc785\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. DEFAULT_TTL=30 ... ... # ConfigMap\uc5d0\uc11c \uc124\uc815\ud55c \uac12 \uc774\uc678\uc5d0\ub3c4 \ub2e4\uc591\ud55c \ud658\uacbd\ubcc0\uc218\uac00 \ucd9c\ub825\ub420 \uc218 \uc788\ub2e4. ... 1.3 Pod\uc5d0 ConfigMap\uc758 \ub370\uc774\ud130\ub97c Volume\uc73c\ub85c Mount\ud558\uc5ec \uc77d\uc5b4\ubcf4\uae30 2.6.1 \ub2e8\uacc4\uc5d0\uc11c \uc0dd\uc131\ud55c, sample-configs \uc758 \ub0b4\uc6a9 \uc911, sample-nginx.conf \ud30c\uc77c\uc744 Volume \ud615\uc2dd\uc73c\ub85c Pod\uc5d0 Mount \ud55c \ub4a4 \uc77d\ub3c4\ub85d \ud55c\ub2e4. \uc544\ub798\uc640 \uac19\uc774 Pod\ub97c \uc0dd\uc131\ud574 \ubcf8\ub2e4. apiVersion: v1 kind: Pod metadata: name: nginx spec: containers: - name: nginx image: nginx ports: - containerPort: 80 volumeMounts: - name: nginx-vhost-config mountPath: /etc/nginx/vhosts.d readOnly: true volumes: - name: nginx-vhost-config configMap: name: sample-configs items: - key: \"sample-nginx.conf\" path: \"sample-nginx.conf\" nginx Pod \uc758 container \ub0b4\ubd80\uc5d0 sample-nginx.conf \uac00 \uc5b4\ub5bb\uac8c mount \ub418\uc5c8\ub294\uc9c0 \uccb4\ud06c\ud574 \ubcf4\ub3c4\ub85d \ud55c\ub2e4. $ k exec nginx -- ls -al /etc/nginx/vhosts.d total 16 drwxrwxrwx 3 root root 4096 Jul 5 12:56 . drwxr-xr-x 1 root root 4096 Jul 5 12:56 .. drwxr-xr-x 2 root root 4096 Jul 5 12:56 ..2022_07_05_12_56_37.2444435617 lrwxrwxrwx 1 root root 32 Jul 5 12:56 ..data -> ..2022_07_05_12_56_37.2444435617 lrwxrwxrwx 1 root root 24 Jul 5 12:56 sample-nginx.conf -> ..data/sample-nginx.conf 2 Secret 2.1 Secret \uc791\uc131\ud558\uae30 Database\uc5d0 \uc811\uadfc\ud560 \ub54c \uc0ac\uc6a9\ud560 ID/PW\ub97c Secret\uc73c\ub85c \ub9cc\ub4e4\uc5b4\ubcf4\ub3c4\ub85d \ud55c\ub2e4. ID\ub294 helloworld , Password\ub294 thisispassword \ub85c \uac00\uc815\ud558\uc5ec \ub9cc\ub4dc\ub294 \uacfc\uc815\uc774\ub2e4. \uc6b0\uc120 plantext \uac12\uc744 base64 encoding \ud558\ub294 \uacfc\uc815\uc774 \ud544\uc694\ud558\ub2e4. $ echo -n \"helloworld\" | base64 -w0 aGVsbG93b3JsZA== $ echo -n \"thisispassword\" | base64 -w0 dGhpc2lzcGFzc3dvcmQ= Info base64 \uc778\ucf54\ub529 \uc2dc newline\uc744 \ud3ec\ud568\ud558\uc9c0 \uc54a\uace0 \uc778\ucf54\ub529 \ud558\ub3c4\ub85d base64 -w0 \uc640 \uac19\uc774 \ud30c\ub77c\ubbf8\ud130\ub97c \ucd94\uac00\ud55c\ub2e4. (\ub2e8, MacOS \ud658\uacbd\uc5d0\uc11c\ub294 base64 -b 0 \uc640 \uac19\uc774 \ub300\uccb4\ud560 \uc218 \uc788\ub2e4.) \ub9cc\uc57d \uc704\uc640 \uac19\uc774 \uc0dd\uc131\ud558\uc9c0 \uc54a\uace0 COLS \ubb38\uc790\uc5f4\uae4c\uc9c0 \ud3ec\ud568\ud55c\ub2e4\uba74, \ucd94\ud6c4\uc5d0 \uc774 \uac12\uc740 \ud658\uacbd\ubcc0\uc218 \ub4f1\uc5d0\ub3c4 \ub611\uac19\uc774 \ud3ec\ud568\ub418\uc5b4 \uc77d\ud600\uc9c8 \uc218 \uc788\ub2e4. \uc774\ub807\uac8c \uc5bb\uc5b4\ub0b8 \uac12\uc744 Secret \uc758 data \ud544\ub4dc\uc5d0 DB_ACCESS_ID \uc640 DB_ACCESS_PW \ub85c \uc791\uc131\ud55c\ub2e4. apiVersion: v1 kind: Secret metadata: name: db-account type: Opaque data: DB_ACCESS_ID: aGVsbG93b3JsZA== DB_ACCESS_PW: dGhpc2lzcGFzc3dvcmQ= \uc704\uc5d0\uc11c \uc791\uc131\ud55c \ub0b4\uc6a9\uc744 sample-secret.yaml \ud30c\uc77c\uba85\uc73c\ub85c \uc800\uc7a5\ud55c\ub2e4. \uadf8\ub9ac\uace0 kubectl \uba85\ub839\uc5b4\ub85c secret\uc744 \uc0dd\uc131\ud55c\ub2e4. $ kubectl apply -f sample-secret.yaml secret/db-account created \uc774\ub807\uac8c \uc0dd\uc131\ud55c secret \uc744 kubectl describe \uba85\ub839\uc73c\ub85c \uc870\ud68c\ud558\ub354\ub77c\ub3c4 \uc2e4\uc81c value \ubd80\ubd84\uc740 \ubc14\ub85c \ub178\ucd9c\ub418\uc9c0 \uc54a\ub294\ub2e4. $ kubectl describe secret db-account Name: db-account Namespace: default Labels: <none> Annotations: <none> Type: Opaque Data ==== DB_ACCESS_ID: 11 bytes DB_ACCESS_PW: 15 bytes \uc774\ubbf8 \uc0dd\uc131\ub41c secret \uc758 base64 decoded \ub41c \uac12\uc744 \ubcf4\uace0 \uc2f6\ub2e4\uba74, \uc544\ub798\uc640 \uac19\uc774 \uc2dc\ub3c4\ud574\ubcfc \uc218 \uc788\ub2e4. $ kubectl get secret db-account -o json | jq '.data | map_values(@base64d)' { \"DB_ACCESS_ID\": \"helloworld\", \"DB_ACCESS_PW\": \"thisispassword\" } 2.1 Secret \uc744 Pod\uc758 \ud658\uacbd\ubcc0\uc218\ub85c Mount \ud558\uae30 2.6.2 \uc5d0\uc11c \uc0dd\uc131\ud55c sample-pod.yaml \ub97c \uc544\ub798\uc640 \uac19\uc774 \uc218\uc815\ud574\ubcf8\ub2e4. apiVersion: v1 kind: Pod metadata: name: sample-pod spec: containers: - name: demo image: busybox command: [\"tail\", \"-f\", \"/dev/null\"] env: - name: DEFAULT_TTL valueFrom: configMapKeyRef: name: sample-configs key: default_ttl envFrom: - secretRef: name: db-account \uc0dd\uc131\ud55c Pod\uc5d0 env \uba85\ub839\uc744 \uc218\ud589\ud574 \ud658\uacbd\ubcc0\uc218\ub97c \uc870\ud68c\ud574\ubcf8\ub2e4. k exec sample-pod -- env PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin HOSTNAME=sample-pod DB_ACCESS_ID=helloworld DB_ACCESS_PW=thisispassword DEFAULT_TTL=30 3 Clean Up \uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"\ud578\uc988\uc628 2.6 Configmap & Secret"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#26-configmap-secret","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uc124\uc815 \ud30c\uc77c\uc744 Configmap\ub85c \uad00\ub9ac \ubc0f \uc911\uc694\ud55c \ub370\uc774\ud130\ub97c Secrets\uc73c\ub85c \uc778\ucf54\ub529\ud558\uc5ec \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx \uc124\uc815 \ud30c\uc77c\uc744 Configmap\uc73c\ub85c \uad00\ub9ac\ud558\uace0 DB Password\ub97c Secret\ub97c \ud1b5\ud574 \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5","title":"\ud578\uc988\uc628 2.6 Configmap &amp; Secret"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Configmap \uacfc Secret\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#architecture","text":"Nginx \uc124\uc815 \ud30c\uc77c\uc744 Configmap, DB Password\ub97c Secret\ub97c \ud1b5\ud574 \uc124\uc815 \uad00\ub9ac","title":"Architecture"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#1-configmap","text":"","title":"1 ConfigMap"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#11-configmap","text":"\uc544\ub798\uc640 \uac19\uc774 nginx\uc758 \uc124\uc815\ud30c\uc77c \ud558\ub098\uc640, key-value \uc30d\uc73c\ub85c \uc774\ub8e8\ub294 \ubcc0\uc218 2\uac1c\ub97c \ud3ec\ud568\ud55c ConfigMap\uc744 \ub9cc\ub4e4\uc5b4\ubcf8\ub2e4. apiVersion: v1 kind: ConfigMap metadata: name: sample-configs data: default_ttl: \"30\" say_hello: \"Hi!\" sample-nginx.conf: | server { listen 80; index index.html; server_name cloudacode.com; location / { root /cloudacode/static/ } location /api { proxy_pass https://api.cloudacode.internal } } \uc704\uc5d0\uc11c \uc791\uc131\ud55c \ud30c\uc77c\uc744 sample-cm.yaml \uc774\ub77c\uace0 \uc800\uc7a5\ud55c \ub4a4, \ub2e4\uc74c\uacfc \uac19\uc774 ConfigMap \uc624\ube0c\uc81d\ud2b8\ub97c \uc0dd\uc131\ud55c\ub2e4. $ kubectl apply -f sample-cm.yaml configmap/sample-configs created $ kubectl get cm NAME DATA AGE sample-configs 3 27s","title":"1.1 ConfigMap \uc791\uc131\ud558\uae30"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#12-pod-environment-variable-configmap","text":"apiVersion: v1 kind: Pod metadata: name: sample-pod spec: containers: - name: demo image: busybox command: [\"tail\", \"-f\", \"/dev/null\"] env: - name: DEFAULT_TTL valueFrom: configMapKeyRef: name: sample-configs key: default_ttl \uc704\uc5d0\uc11c \uc791\uc131\ud55c \ud30c\uc77c\uc744 sample-pod.yaml \uc774\ub77c\uace0 \uc800\uc7a5\ud55c \ub4a4, \ub2e4\uc74c\uacfc \uac19\uc774 Pod\ub97c \uc0dd\uc131\ud55c\ub2e4. $ kubectl apply -f sample-pod.yaml pod/sample-pod created $ kubectl get po --watch NAME READY STATUS RESTARTS AGE sample-pod 0/1 ContainerCreating 0 4s sample-pod 1/1 Running 0 6s sample-pod \uc0dd\uc131\uc774 \uc131\uacf5\ud558\uc600\ub2e4\uba74, \uc544\ub798\uc640 \uac19\uc774 pod \ub0b4\ubd80\uc758 \ud658\uacbd\ubcc0\uc218 \uc815\ubcf4\ub97c \uc870\ud68c\ud574\ubcf8\ub2e4. $ k exec sample-pod -- env PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin HOSTNAME=sample-pod # \uc544\ub798\uc640 \uac19\uc774 ConfigMap\uc5d0\uc11c \uc0dd\uc131\ud55c \uac12\uc774 \ud658\uacbd\ubcc0\uc218\ub85c \uc8fc\uc785\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. DEFAULT_TTL=30 ... ... # ConfigMap\uc5d0\uc11c \uc124\uc815\ud55c \uac12 \uc774\uc678\uc5d0\ub3c4 \ub2e4\uc591\ud55c \ud658\uacbd\ubcc0\uc218\uac00 \ucd9c\ub825\ub420 \uc218 \uc788\ub2e4. ...","title":"1.2 Pod\uc5d0 \ud658\uacbd\ubcc0\uc218(Environment Variable)\ub85c ConfigMap\uc758 \ub370\uc774\ud130\ub97c \uc77d\uc5b4\ubcf4\uae30"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#13-pod-configmap-volume-mount","text":"2.6.1 \ub2e8\uacc4\uc5d0\uc11c \uc0dd\uc131\ud55c, sample-configs \uc758 \ub0b4\uc6a9 \uc911, sample-nginx.conf \ud30c\uc77c\uc744 Volume \ud615\uc2dd\uc73c\ub85c Pod\uc5d0 Mount \ud55c \ub4a4 \uc77d\ub3c4\ub85d \ud55c\ub2e4. \uc544\ub798\uc640 \uac19\uc774 Pod\ub97c \uc0dd\uc131\ud574 \ubcf8\ub2e4. apiVersion: v1 kind: Pod metadata: name: nginx spec: containers: - name: nginx image: nginx ports: - containerPort: 80 volumeMounts: - name: nginx-vhost-config mountPath: /etc/nginx/vhosts.d readOnly: true volumes: - name: nginx-vhost-config configMap: name: sample-configs items: - key: \"sample-nginx.conf\" path: \"sample-nginx.conf\" nginx Pod \uc758 container \ub0b4\ubd80\uc5d0 sample-nginx.conf \uac00 \uc5b4\ub5bb\uac8c mount \ub418\uc5c8\ub294\uc9c0 \uccb4\ud06c\ud574 \ubcf4\ub3c4\ub85d \ud55c\ub2e4. $ k exec nginx -- ls -al /etc/nginx/vhosts.d total 16 drwxrwxrwx 3 root root 4096 Jul 5 12:56 . drwxr-xr-x 1 root root 4096 Jul 5 12:56 .. drwxr-xr-x 2 root root 4096 Jul 5 12:56 ..2022_07_05_12_56_37.2444435617 lrwxrwxrwx 1 root root 32 Jul 5 12:56 ..data -> ..2022_07_05_12_56_37.2444435617 lrwxrwxrwx 1 root root 24 Jul 5 12:56 sample-nginx.conf -> ..data/sample-nginx.conf","title":"1.3 Pod\uc5d0 ConfigMap\uc758 \ub370\uc774\ud130\ub97c Volume\uc73c\ub85c Mount\ud558\uc5ec \uc77d\uc5b4\ubcf4\uae30"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#2-secret","text":"","title":"2 Secret"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#21-secret","text":"Database\uc5d0 \uc811\uadfc\ud560 \ub54c \uc0ac\uc6a9\ud560 ID/PW\ub97c Secret\uc73c\ub85c \ub9cc\ub4e4\uc5b4\ubcf4\ub3c4\ub85d \ud55c\ub2e4. ID\ub294 helloworld , Password\ub294 thisispassword \ub85c \uac00\uc815\ud558\uc5ec \ub9cc\ub4dc\ub294 \uacfc\uc815\uc774\ub2e4. \uc6b0\uc120 plantext \uac12\uc744 base64 encoding \ud558\ub294 \uacfc\uc815\uc774 \ud544\uc694\ud558\ub2e4. $ echo -n \"helloworld\" | base64 -w0 aGVsbG93b3JsZA== $ echo -n \"thisispassword\" | base64 -w0 dGhpc2lzcGFzc3dvcmQ= Info base64 \uc778\ucf54\ub529 \uc2dc newline\uc744 \ud3ec\ud568\ud558\uc9c0 \uc54a\uace0 \uc778\ucf54\ub529 \ud558\ub3c4\ub85d base64 -w0 \uc640 \uac19\uc774 \ud30c\ub77c\ubbf8\ud130\ub97c \ucd94\uac00\ud55c\ub2e4. (\ub2e8, MacOS \ud658\uacbd\uc5d0\uc11c\ub294 base64 -b 0 \uc640 \uac19\uc774 \ub300\uccb4\ud560 \uc218 \uc788\ub2e4.) \ub9cc\uc57d \uc704\uc640 \uac19\uc774 \uc0dd\uc131\ud558\uc9c0 \uc54a\uace0 COLS \ubb38\uc790\uc5f4\uae4c\uc9c0 \ud3ec\ud568\ud55c\ub2e4\uba74, \ucd94\ud6c4\uc5d0 \uc774 \uac12\uc740 \ud658\uacbd\ubcc0\uc218 \ub4f1\uc5d0\ub3c4 \ub611\uac19\uc774 \ud3ec\ud568\ub418\uc5b4 \uc77d\ud600\uc9c8 \uc218 \uc788\ub2e4. \uc774\ub807\uac8c \uc5bb\uc5b4\ub0b8 \uac12\uc744 Secret \uc758 data \ud544\ub4dc\uc5d0 DB_ACCESS_ID \uc640 DB_ACCESS_PW \ub85c \uc791\uc131\ud55c\ub2e4. apiVersion: v1 kind: Secret metadata: name: db-account type: Opaque data: DB_ACCESS_ID: aGVsbG93b3JsZA== DB_ACCESS_PW: dGhpc2lzcGFzc3dvcmQ= \uc704\uc5d0\uc11c \uc791\uc131\ud55c \ub0b4\uc6a9\uc744 sample-secret.yaml \ud30c\uc77c\uba85\uc73c\ub85c \uc800\uc7a5\ud55c\ub2e4. \uadf8\ub9ac\uace0 kubectl \uba85\ub839\uc5b4\ub85c secret\uc744 \uc0dd\uc131\ud55c\ub2e4. $ kubectl apply -f sample-secret.yaml secret/db-account created \uc774\ub807\uac8c \uc0dd\uc131\ud55c secret \uc744 kubectl describe \uba85\ub839\uc73c\ub85c \uc870\ud68c\ud558\ub354\ub77c\ub3c4 \uc2e4\uc81c value \ubd80\ubd84\uc740 \ubc14\ub85c \ub178\ucd9c\ub418\uc9c0 \uc54a\ub294\ub2e4. $ kubectl describe secret db-account Name: db-account Namespace: default Labels: <none> Annotations: <none> Type: Opaque Data ==== DB_ACCESS_ID: 11 bytes DB_ACCESS_PW: 15 bytes \uc774\ubbf8 \uc0dd\uc131\ub41c secret \uc758 base64 decoded \ub41c \uac12\uc744 \ubcf4\uace0 \uc2f6\ub2e4\uba74, \uc544\ub798\uc640 \uac19\uc774 \uc2dc\ub3c4\ud574\ubcfc \uc218 \uc788\ub2e4. $ kubectl get secret db-account -o json | jq '.data | map_values(@base64d)' { \"DB_ACCESS_ID\": \"helloworld\", \"DB_ACCESS_PW\": \"thisispassword\" }","title":"2.1 Secret \uc791\uc131\ud558\uae30"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#21-secret-pod-mount","text":"2.6.2 \uc5d0\uc11c \uc0dd\uc131\ud55c sample-pod.yaml \ub97c \uc544\ub798\uc640 \uac19\uc774 \uc218\uc815\ud574\ubcf8\ub2e4. apiVersion: v1 kind: Pod metadata: name: sample-pod spec: containers: - name: demo image: busybox command: [\"tail\", \"-f\", \"/dev/null\"] env: - name: DEFAULT_TTL valueFrom: configMapKeyRef: name: sample-configs key: default_ttl envFrom: - secretRef: name: db-account \uc0dd\uc131\ud55c Pod\uc5d0 env \uba85\ub839\uc744 \uc218\ud589\ud574 \ud658\uacbd\ubcc0\uc218\ub97c \uc870\ud68c\ud574\ubcf8\ub2e4. k exec sample-pod -- env PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin HOSTNAME=sample-pod DB_ACCESS_ID=helloworld DB_ACCESS_PW=thisispassword DEFAULT_TTL=30","title":"2.1 Secret \uc744 Pod\uc758 \ud658\uacbd\ubcc0\uc218\ub85c Mount \ud558\uae30"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#3-clean-up","text":"\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"3 Clean Up"},{"location":"hello-kubernetes/section02/handson/deployment/","text":"\ud578\uc988\uc628 2.4 Deployment \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Pod \ub9ac\uc18c\uc2a4\ub97c Deployment\ub97c \ud1b5\ud574 \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Deployment \uad6c\uc131 \ud6c4 Pod\ub97c \ubc30\ud3ec\ud574 \ubcf4\uace0 Replica \uac1c\uc218\ub97c \uc870\uc815\ud574 \ubcf4\uba74\uc11c Pod \ub9ac\uc18c\uc2a4\ub97c \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Deployment\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Architecture Deployment\ub97c \ud1b5\ud574 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec \ubc0f \uad00\ub9ac 1 Deployment 2 Replicaset \uc870\uc815 3 Clean Up","title":"\ud578\uc988\uc628 2.4 Deployment"},{"location":"hello-kubernetes/section02/handson/deployment/#24-deployment","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Pod \ub9ac\uc18c\uc2a4\ub97c Deployment\ub97c \ud1b5\ud574 \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Deployment \uad6c\uc131 \ud6c4 Pod\ub97c \ubc30\ud3ec\ud574 \ubcf4\uace0 Replica \uac1c\uc218\ub97c \uc870\uc815\ud574 \ubcf4\uba74\uc11c Pod \ub9ac\uc18c\uc2a4\ub97c \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5","title":"\ud578\uc988\uc628 2.4 Deployment"},{"location":"hello-kubernetes/section02/handson/deployment/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Deployment\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section02/handson/deployment/#architecture","text":"Deployment\ub97c \ud1b5\ud574 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec \ubc0f \uad00\ub9ac","title":"Architecture"},{"location":"hello-kubernetes/section02/handson/deployment/#1-deployment","text":"","title":"1 Deployment"},{"location":"hello-kubernetes/section02/handson/deployment/#2-replicaset","text":"","title":"2 Replicaset \uc870\uc815"},{"location":"hello-kubernetes/section02/handson/deployment/#3-clean-up","text":"","title":"3 Clean Up"},{"location":"hello-kubernetes/section02/handson/pod/","text":"\ud578\uc988\uc628 2.1 Pod \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uac00\uc7a5 \uae30\ubcf8\uc774 \ub418\ub294 Pod \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec\ud574 \ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c Pod \ub9ac\uc18c\uc2a4\ub85c \uc120\uc5b8\ud615(declarative)\uc73c\ub85c \ubc30\ud3ec \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Pod\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Architecture Pod\ub97c \ud1b5\ud574 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec \ubc0f \uad00\ub9ac 1 Pod 2 Resource \uc870\uc815 3 Clean Up","title":"\ud578\uc988\uc628 2.1 Pod"},{"location":"hello-kubernetes/section02/handson/pod/#21-pod","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uac00\uc7a5 \uae30\ubcf8\uc774 \ub418\ub294 Pod \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec\ud574 \ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c Pod \ub9ac\uc18c\uc2a4\ub85c \uc120\uc5b8\ud615(declarative)\uc73c\ub85c \ubc30\ud3ec \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5","title":"\ud578\uc988\uc628 2.1 Pod"},{"location":"hello-kubernetes/section02/handson/pod/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Pod\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section02/handson/pod/#architecture","text":"Pod\ub97c \ud1b5\ud574 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec \ubc0f \uad00\ub9ac","title":"Architecture"},{"location":"hello-kubernetes/section02/handson/pod/#1-pod","text":"","title":"1 Pod"},{"location":"hello-kubernetes/section02/handson/pod/#2-resource","text":"","title":"2 Resource \uc870\uc815"},{"location":"hello-kubernetes/section02/handson/pod/#3-clean-up","text":"","title":"3 Clean Up"},{"location":"hello-kubernetes/section02/handson/resource-qos/","text":"\ud578\uc988\uc628 2.2 Resources & QoS Pod\uc758 resource(cpu, mem)\ub97c \uc9c0\uc815\ud558\uc5ec QoS\uc124\uc815\ud558\ub294 \uc2e4\uc2b5 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Helm\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Helm \uc124\uce58 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \ubc29\ubc95: \uc2e4\uc2b5 \ub9c1\ud06c 1.Pod spec\uc5d0 Requests\uc640 Limits \uc9c0\uc815\ud558\uc5ec QoS\ubcc4 Pod\uc744 \uc0dd\uc131 1.1 Best-Effort Pod \uc0dd\uc131\ud558\uae30 resource requests/limits\uac00 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0\uc5d0 Best-Effort\ub85c \uc0dd\uc131\ub418\uae30 \ub54c\ubb38\uc5d0 \uc9c0\uc815\ud558\uae30 \uc54a\uace0 \uc0dd\uc131\ud55c\ub2e4. Pod specification yaml \uc791\uc131 # namespace \uc0dd\uc131 kubectl create ns qos-example # yaml \uc0dd\uc131 cat <<EOF > qos-demo-besteffort.yaml apiVersion: v1 kind: Pod metadata: name: qos-demo-besteffort namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: {} requests: {} EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-besteffort.yaml pod/qos-demo-besteffort created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-besteffort 1/1 Running 0 26s # QoS \ud655\uc778 kubectl get po -n qos-example qos-demo-besteffort -o yaml apiVersion: v1 kind: Pod metadata: ... spec: containers: ... resources: {} # BestEffort \ud655\uc778 status: qosClass: BestEffort Info \ud14c\uc2a4\ud2b8 \ud560\ub54c, \ud639\uc740 \uc11c\ube44\uc2a4\ub97c \ubc30\ud3ec\ud560\ub54c, application\uc774 \uc0ac\uc6a9\ud558\ub294 namespace\ub97c \uad6c\ubd84\ud558\uba74 \ubc30\ud3ec\uc2dc \ubc1c\uc0dd\ud558\ub294 human error\ub97c \ud53c\ud560\uc218 \uc788\ub2e4. 1.2 Burstable Pod \uc0dd\uc131\ud558\uae30 resource requests\ub294 \uc9c0\uc815\ub418\uc5b4 \uc788\uc73c\ub098(not equal to 0) limit\uac00 \uc5c6\ub294\uacbd\uc6b0, \ud639\uc740 \uac19\uc9c0\uac00 \uc54a\uc744\uacbd\uc6b0 Burstable QoS Pod\uc774 \uc0dd\uc131\ub41c\ub2e4. Pod specification yaml \uc791\uc131 # yaml \uc0dd\uc131 cat <<EOF > qos-demo-bustable.yaml apiVersion: v1 kind: Pod metadata: name: qos-demo-bustable namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"100Mi\" cpu: \"350m\" EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-bustable.yaml pod/qos-demo-bustable created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-bestefforts 1/1 Running 0 89s qos-demo-bustable 1/1 Running 0 39s # QoS \ud655\uc778 kubectl get po -n qos-example qos-demo-bustable -o yaml apiVersion: v1 kind: Pod metadata: ... spec: containers: ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 350m memory: 100Mi ... status: # Burstable \ud655\uc778 qosClass: Burstable 1.3 Guaranteed Pod \uc0dd\uc131\ud558\uae30 resource requests/limits\ub97c \ubaa8\ub450 \uc9c0\uc815(no equalt to 0)\ud558\uace0, \uadf8\uac83\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0 Guaranteed QoS Pod\uc774 \uc0dd\uc131\ub41c\ub2e4. Pod specification yaml \uc791\uc131 # yaml \uc0dd\uc131 cat <<EOF > qos-demo-guaranteed.yaml apiVersion: v1 kind: Pod metadata: name: qos-demo-guaranteed namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"200Mi\" cpu: \"700m\" EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-guaranteed.yaml pod/qos-demo-guaranteed created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-bestefforts 1/1 Running 0 5m28s qos-demo-bustable 1/1 Running 0 4m38s qos-demo-guaranteed 1/1 Running 0 11s # QoS \ud655\uc778 kubectl get po -n qos-example qos-demo-guaranteed -o yaml apiVersion: v1 kind: Pod metadata: ... spec: containers: ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 700m memory: 200Mi ... status: # Guaranteed \ud655\uc778 qosClass: Guaranteed 1.4 cleanup kubectl delete -f qos-demo-besteffort.yaml kubectl delete -f qos-demo-bustable.yaml kubectl delete -f qos-demo-guaranteed.yaml 2.Deployment spec\uc5d0 Requests\uc640 Limits \uc9c0\uc815\ud558\uc5ec QoS\ubcc4 Pod\uc744 \uc0dd\uc131 deployment spec\uc5d0 request\ub97c \uc9c0\uc815\ud558\ub294 \ubd80\ubd84\uc740 \uc704\uc640 \ub3d9\uc77c\ud568 deployment spec\uc5d0 2\uac1c\uc758 nginx container\ub97c \uc774\uc6a9\ud55c request\uc640 limits\ub97c \uc9c0\uc815\ud558\uc5ec qos\ub97c \uc9c0\uc815\ud55c\ub2e4. 2.1 QoS\uac00 \uc9c0\uc815\ub41c Deployment \uc0dd\uc131\ud558\uae30 deployment specification yaml \uc791\uc131 cat <<EOF > qos-demo-deploy.yaml apiVersion: apps/v1 kind: Deployment metadata: name: qos-demo-deploy namespace: qos-example spec: replicas: 3 selector: matchLabels: app: qos-demo template: metadata: labels: app: qos-demo spec: containers: - name: qos-demo-ctr-one image: nginx ports: - containerPort: 80 resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"200Mi\" cpu: \"700m\" - name: qos-demo-ctr-sidecar image: nginx # \ud558\ub098\uc758 pod\uc5d0 \ub3d9\uc77c \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\uae30 \uc704\ud574 port \ubcc0\uacbd command: [\"/bin/sh\",\"-c\"] args: [\"sed -i 's/listen .*/listen 8000;/g' /etc/nginx/conf.d/default.conf && exec nginx -g 'daemon off;'\"] ports: - containerPort: 8000 resources: limits: memory: \"300Mi\" cpu: \"500m\" requests: memory: \"300Mi\" cpu: \"500m\" EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-deploy.yaml deployment.apps/qos-demo-deploy created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-deploy-8476d469b7-7mw5b 2/2 Running 0 61s qos-demo-deploy-8476d469b7-fjxp8 2/2 Running 0 50s qos-demo-deploy-8476d469b7-l4nc6 2/2 Running 0 55s $ kubectl get po -n qos-example qos-demo-deploy-8476d469b7-7mw5b -o yaml apiVersion: v1 kind: Pod ... spec: containers: ... name: qos-demo-ctr-one ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 700m memory: 200Mi ... name: qos-demo-ctr-sidecar ... resources: limits: cpu: 500m memory: 300Mi requests: cpu: 500m memory: 300Mi status: ... qosClass: Guaranteed Info \ud558\ub098\uc758 pod\uc5d0 2\uac1c \uc774\uc0c1\uc758 container\ub97c \uc2e4\ud589\ud560\ub54c(sidecar pattern) Pod\uc758 QoS\ub97c Guaranteed\ub97c \ud558\ub824\uba74 \ubaa8\ub4e0 container\uc758 resources\ub97c Guaranteed\uc758 \uc870\uac74\uc774 \ub9cc\uc871\ud574\uc57c \ud55c\ub2e4. \uc608\ub97c\ub4e4\uba74 \ud558\ub098\uc758 Pod\uc758 \ucee8\ud14c\uc774\ub108 2\uac1c\uc911 \ud558\ub098\ub294 Guranteed \uc870\uac74\uc744 \ub9cc\uc871\ud558\uc9c0\ub9cc \ub2e4\ub978 \ud558\ub098\uc758 container\uac00 Bustable\uc774\uba74 \ud574\ub2f9 Pod\uc758 QoS\ub294 Bustable\uc774 \ub41c\ub2e4. \uc774\uc640 \ub3d9\uc77c\ud558\uac8c 2\uac1c \uc774\uc0c1\uc758 container Pod\uc744 Besteffort\ub85c \uc9c0\uc815\ud558\uace0 \uc2f6\ub2e4\uba74 \ubaa8\ub4e0 container\uc758 resource\ub97c Besteffort \uc870\uac74\uc5d0 \ub9de\uac8c \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4. 2.2 Cleanup kubectl delete -f qos-demo-deploy.yaml","title":"\ud578\uc988\uc628 2.2 Resources & QoS"},{"location":"hello-kubernetes/section02/handson/resource-qos/#22-resources-qos","text":"Pod\uc758 resource(cpu, mem)\ub97c \uc9c0\uc815\ud558\uc5ec QoS\uc124\uc815\ud558\ub294 \uc2e4\uc2b5","title":"\ud578\uc988\uc628 2.2 Resources &amp; QoS"},{"location":"hello-kubernetes/section02/handson/resource-qos/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Helm\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Helm \uc124\uce58 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \ubc29\ubc95: \uc2e4\uc2b5 \ub9c1\ud06c","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section02/handson/resource-qos/#1pod-spec-requests-limits-qos-pod","text":"","title":"1.Pod spec\uc5d0 Requests\uc640 Limits \uc9c0\uc815\ud558\uc5ec QoS\ubcc4 Pod\uc744 \uc0dd\uc131"},{"location":"hello-kubernetes/section02/handson/resource-qos/#11-best-effort-pod","text":"resource requests/limits\uac00 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0\uc5d0 Best-Effort\ub85c \uc0dd\uc131\ub418\uae30 \ub54c\ubb38\uc5d0 \uc9c0\uc815\ud558\uae30 \uc54a\uace0 \uc0dd\uc131\ud55c\ub2e4. Pod specification yaml \uc791\uc131 # namespace \uc0dd\uc131 kubectl create ns qos-example # yaml \uc0dd\uc131 cat <<EOF > qos-demo-besteffort.yaml apiVersion: v1 kind: Pod metadata: name: qos-demo-besteffort namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: {} requests: {} EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-besteffort.yaml pod/qos-demo-besteffort created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-besteffort 1/1 Running 0 26s # QoS \ud655\uc778 kubectl get po -n qos-example qos-demo-besteffort -o yaml apiVersion: v1 kind: Pod metadata: ... spec: containers: ... resources: {} # BestEffort \ud655\uc778 status: qosClass: BestEffort Info \ud14c\uc2a4\ud2b8 \ud560\ub54c, \ud639\uc740 \uc11c\ube44\uc2a4\ub97c \ubc30\ud3ec\ud560\ub54c, application\uc774 \uc0ac\uc6a9\ud558\ub294 namespace\ub97c \uad6c\ubd84\ud558\uba74 \ubc30\ud3ec\uc2dc \ubc1c\uc0dd\ud558\ub294 human error\ub97c \ud53c\ud560\uc218 \uc788\ub2e4.","title":"1.1 Best-Effort Pod \uc0dd\uc131\ud558\uae30"},{"location":"hello-kubernetes/section02/handson/resource-qos/#12-burstable-pod","text":"resource requests\ub294 \uc9c0\uc815\ub418\uc5b4 \uc788\uc73c\ub098(not equal to 0) limit\uac00 \uc5c6\ub294\uacbd\uc6b0, \ud639\uc740 \uac19\uc9c0\uac00 \uc54a\uc744\uacbd\uc6b0 Burstable QoS Pod\uc774 \uc0dd\uc131\ub41c\ub2e4. Pod specification yaml \uc791\uc131 # yaml \uc0dd\uc131 cat <<EOF > qos-demo-bustable.yaml apiVersion: v1 kind: Pod metadata: name: qos-demo-bustable namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"100Mi\" cpu: \"350m\" EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-bustable.yaml pod/qos-demo-bustable created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-bestefforts 1/1 Running 0 89s qos-demo-bustable 1/1 Running 0 39s # QoS \ud655\uc778 kubectl get po -n qos-example qos-demo-bustable -o yaml apiVersion: v1 kind: Pod metadata: ... spec: containers: ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 350m memory: 100Mi ... status: # Burstable \ud655\uc778 qosClass: Burstable","title":"1.2 Burstable Pod \uc0dd\uc131\ud558\uae30"},{"location":"hello-kubernetes/section02/handson/resource-qos/#13-guaranteed-pod","text":"resource requests/limits\ub97c \ubaa8\ub450 \uc9c0\uc815(no equalt to 0)\ud558\uace0, \uadf8\uac83\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0 Guaranteed QoS Pod\uc774 \uc0dd\uc131\ub41c\ub2e4. Pod specification yaml \uc791\uc131 # yaml \uc0dd\uc131 cat <<EOF > qos-demo-guaranteed.yaml apiVersion: v1 kind: Pod metadata: name: qos-demo-guaranteed namespace: qos-example spec: containers: - name: qos-demo-ctr image: nginx resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"200Mi\" cpu: \"700m\" EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-guaranteed.yaml pod/qos-demo-guaranteed created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-bestefforts 1/1 Running 0 5m28s qos-demo-bustable 1/1 Running 0 4m38s qos-demo-guaranteed 1/1 Running 0 11s # QoS \ud655\uc778 kubectl get po -n qos-example qos-demo-guaranteed -o yaml apiVersion: v1 kind: Pod metadata: ... spec: containers: ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 700m memory: 200Mi ... status: # Guaranteed \ud655\uc778 qosClass: Guaranteed","title":"1.3 Guaranteed Pod \uc0dd\uc131\ud558\uae30"},{"location":"hello-kubernetes/section02/handson/resource-qos/#14-cleanup","text":"kubectl delete -f qos-demo-besteffort.yaml kubectl delete -f qos-demo-bustable.yaml kubectl delete -f qos-demo-guaranteed.yaml","title":"1.4 cleanup"},{"location":"hello-kubernetes/section02/handson/resource-qos/#2deployment-spec-requests-limits-qos-pod","text":"deployment spec\uc5d0 request\ub97c \uc9c0\uc815\ud558\ub294 \ubd80\ubd84\uc740 \uc704\uc640 \ub3d9\uc77c\ud568 deployment spec\uc5d0 2\uac1c\uc758 nginx container\ub97c \uc774\uc6a9\ud55c request\uc640 limits\ub97c \uc9c0\uc815\ud558\uc5ec qos\ub97c \uc9c0\uc815\ud55c\ub2e4.","title":"2.Deployment spec\uc5d0 Requests\uc640 Limits \uc9c0\uc815\ud558\uc5ec QoS\ubcc4 Pod\uc744 \uc0dd\uc131"},{"location":"hello-kubernetes/section02/handson/resource-qos/#21-qos-deployment","text":"deployment specification yaml \uc791\uc131 cat <<EOF > qos-demo-deploy.yaml apiVersion: apps/v1 kind: Deployment metadata: name: qos-demo-deploy namespace: qos-example spec: replicas: 3 selector: matchLabels: app: qos-demo template: metadata: labels: app: qos-demo spec: containers: - name: qos-demo-ctr-one image: nginx ports: - containerPort: 80 resources: limits: memory: \"200Mi\" cpu: \"700m\" requests: memory: \"200Mi\" cpu: \"700m\" - name: qos-demo-ctr-sidecar image: nginx # \ud558\ub098\uc758 pod\uc5d0 \ub3d9\uc77c \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\uae30 \uc704\ud574 port \ubcc0\uacbd command: [\"/bin/sh\",\"-c\"] args: [\"sed -i 's/listen .*/listen 8000;/g' /etc/nginx/conf.d/default.conf && exec nginx -g 'daemon off;'\"] ports: - containerPort: 8000 resources: limits: memory: \"300Mi\" cpu: \"500m\" requests: memory: \"300Mi\" cpu: \"500m\" EOF pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778 kubectl apply -f qos-demo-deploy.yaml deployment.apps/qos-demo-deploy created kubectl get po -n qos-example NAME READY STATUS RESTARTS AGE qos-demo-deploy-8476d469b7-7mw5b 2/2 Running 0 61s qos-demo-deploy-8476d469b7-fjxp8 2/2 Running 0 50s qos-demo-deploy-8476d469b7-l4nc6 2/2 Running 0 55s $ kubectl get po -n qos-example qos-demo-deploy-8476d469b7-7mw5b -o yaml apiVersion: v1 kind: Pod ... spec: containers: ... name: qos-demo-ctr-one ... resources: limits: cpu: 700m memory: 200Mi requests: cpu: 700m memory: 200Mi ... name: qos-demo-ctr-sidecar ... resources: limits: cpu: 500m memory: 300Mi requests: cpu: 500m memory: 300Mi status: ... qosClass: Guaranteed Info \ud558\ub098\uc758 pod\uc5d0 2\uac1c \uc774\uc0c1\uc758 container\ub97c \uc2e4\ud589\ud560\ub54c(sidecar pattern) Pod\uc758 QoS\ub97c Guaranteed\ub97c \ud558\ub824\uba74 \ubaa8\ub4e0 container\uc758 resources\ub97c Guaranteed\uc758 \uc870\uac74\uc774 \ub9cc\uc871\ud574\uc57c \ud55c\ub2e4. \uc608\ub97c\ub4e4\uba74 \ud558\ub098\uc758 Pod\uc758 \ucee8\ud14c\uc774\ub108 2\uac1c\uc911 \ud558\ub098\ub294 Guranteed \uc870\uac74\uc744 \ub9cc\uc871\ud558\uc9c0\ub9cc \ub2e4\ub978 \ud558\ub098\uc758 container\uac00 Bustable\uc774\uba74 \ud574\ub2f9 Pod\uc758 QoS\ub294 Bustable\uc774 \ub41c\ub2e4. \uc774\uc640 \ub3d9\uc77c\ud558\uac8c 2\uac1c \uc774\uc0c1\uc758 container Pod\uc744 Besteffort\ub85c \uc9c0\uc815\ud558\uace0 \uc2f6\ub2e4\uba74 \ubaa8\ub4e0 container\uc758 resource\ub97c Besteffort \uc870\uac74\uc5d0 \ub9de\uac8c \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4.","title":"2.1 QoS\uac00 \uc9c0\uc815\ub41c Deployment \uc0dd\uc131\ud558\uae30"},{"location":"hello-kubernetes/section02/handson/resource-qos/#22-cleanup","text":"kubectl delete -f qos-demo-deploy.yaml","title":"2.2 Cleanup"},{"location":"hello-kubernetes/section02/handson/service-ingress/","text":"\ud578\uc988\uc628 2.3 Service & Ingress Ingress-nginx \uad6c\uc131 \ubc0f Ingress\ub97c \ud1b5\ud574 Service \uc811\uadfc \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c ingress-nginx controller\ub97c \uad6c\uc131\ud558\uace0 Ingress\ub97c \ud1b5\ud574 \uc5ec\ub7ec \uac1c\uc758 \uc11c\ube44\uc2a4\uc5d0 \uc5b4\ub5bb\uac8c \uc811\uadfc\uc744 \ud560 \uc218 \uc788\ub294\uc9c0 \uc54c\uc544\ubcf4\ub294 \uc2e4\uc2b5 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Helm\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Helm \uc124\uce58 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \ubc29\ubc95: \uc2e4\uc2b5 \ub9c1\ud06c Architecture \ud558\ub098\uc758 Ingress\uc5d0 \uc5ec\ub7ec \ubc84\uc804\uc758 Backends\ub97c \uad6c\uc131\ud558\uace0 URL Path\ub97c \uae30\uc900\uc73c\ub85c \ud2b8\ub808\ud53d\uc744 \ub77c\uc6b0\ud305 /v2\ub97c \uc81c\uc678\ud55c \ubaa8\ub4e0 path( /* )\ub294 \uccab \ubc88\uc9f8 \ubc84\uc804\uc758 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec, /v2 \ub9cc \ub450 \ubc88\uc9f8 \ubc84\uc804\uc758 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec 1 Ingress Nginx \uad6c\uc131 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc790\uccb4\ub294 \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\ub294 \uc560\uadf8\ub178\uc2a4\ud2f1 \ud55c \ub3c4\uad6c\uc774\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c Ingress Controller\uac00 \uc788\uc73c\uba70 \ub300\ud45c\uc801\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 ingress \uc911\uc5d0\uc11c\ub294 Ingress-Nginx \uac00 \uc720\uba85\ud558\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0 \uc744 \ud558\ub294 \ucee8\ud2b8\ub864\ub7ec \uc774\ub2e4 1.1 Helm Value \uc124\uc815 Helm\uc744 \ud1b5\ud574\uc11c \uc124\uce58\ud558\uae30 \uc704\ud574 \uae30\uc874 ingress nginx\uc758 helm value \uac12\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815 ingress-nginx-values.md controller: replicaCount: 1 nodeSelector: ingress-ready: \"true\" tolerations: - effect: NoSchedule key: node-role.kubernetes.io/master operator: Equal - effect: NoSchedule key: node-role.kubernetes.io/control-plane operator: Equal watchIngressWithoutClass: true hostPort: enabled: true service: type: NodePort Info \ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130\ub294 extraPortMappings\uc774 kind \ucee8\ud14c\uc774\ub108\uc758 hostport 80, 443\uc73c\ub85c \ub9e4\ud551\uc774 \ub418\uae30 \ub54c\ubb38\uc5d0 hostPort\ub85c Ingress Controller\ub97c \ud65c\uc131\ud654\ud574\uc8fc\uc5b4\uc57c \ud55c\ub2e4. 1.2 Ingress-Nginx \ucef4\ud3ec\ub10c\ud2b8 \uc124\uce58 helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace -f ingress-nginx-values.yaml \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec\uac00 \uc644\ub8cc \ub418\uc5c8\ub2e4\uba74 IngressClass\ub294 nginx \ub85c \uad6c\uc131\uc774 \ub418\uba70 \ub2e4\uc74c\uacfc \uac19\uc774 \ud655\uc778 \uac00\ub2a5\ud558\ub2e4 kubectl get ingressclasses.networking.k8s.io NAME CONTROLLER PARAMETERS AGE nginx k8s.io/ingress-nginx <none> 5m 2 \ub370\ubaa8 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \ub370\ubaa8 Stateless \uc560\ud50c\ub9ac\ucf00\uc774\uc158 v1\uacfc v2\ub97c demo \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ubc30\ud3ec\ud558\uace0 \uc11c\ube44\uc2a4 \ubc0f \uc778\uadf8\ub808\uc2a4\uae4c\uc9c0 \uc5f0\ub3d9\ud558\uc5ec \uc811\uadfc \ud655\uc778\uc744 \ud574 \ubcf8\ub2e4 \ub370\ubaa8\uc6a9 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0dd\uc131 kubectl create ns demo 2.1 \ub370\ubaa8\uc571 v1 \ubc30\ud3ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158 v1 \ubc30\ud3ec \ubc0f \ubaa8\ub4e0 URL Path\uac00 v1 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \ud3ec\uc6cc\ub529 \ub418\ub3c4\ub85d Ingress \uc124\uc815 kubectl create deployment demo01 \\ --image=cloudacode/hello-go-app:v1.0.0 --port=8080 -n demo kubectl expose deployment demo01 --port=80 --target-port=8080 -n demo kubectl create ingress demo01 --class=nginx --rule=\"/*=demo01:80\" -n demo \ud639\uc740 \uc120\uc5b8\ud615(Declarative) \uc608\uc2dc ingress-service-demo-app.yaml Info \uc704\uc758 helm value \uac12\uc5d0\uc11c watchIngressWithoutClass: true \uc635\uc158\uc744 \uc8fc\uc5c8\uae30 \ub54c\ubb38\uc5d0 \ub530\ub85c class \uc635\uc158\uc744 \uc8fc\uc9c0 \uc54a\uc544\ub3c4 \uc790\ub3d9\uc73c\ub85c nginx ingress\ub97c \uc0ac\uc6a9\ud558\uac8c \ub41c\ub2e4. $ kubectl get ing NAME CLASS HOSTS ADDRESS PORTS AGE demo01 nginx * 10.96.119.252 80 112s 2.2 \ub370\ubaa8\uc571 v2 \ubc30\ud3ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158 v2 \ubc30\ud3ec \ubc0f /v2 URL Path\uac00 v2 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \ud3ec\uc6cc\ub529 \ub418\ub3c4\ub85d Ingress \uc124\uc815 kubectl create deployment demo02 \\ --image=cloudacode/hello-go-app:v2.0.0 --port=8080 -n demo kubectl expose deployment demo02 --port=80 --target-port=8080 -n demo kubectl create ingress demo02 --class=nginx --rule=\"/v2=demo02:80\" -n demo \ud639\uc740 \uc120\uc5b8\ud615(Declarative) \uc608\uc2dc ingress-service-demo-app.yaml Tip \ub9cc\uc57d \uc560\ud50c\ub9ac\ucf00\uc774\uc158 url\uc774 / \ub85c \ub3d9\uc791\ud558\ub294 \uacbd\uc6b0\ub294 --annotation=\"nginx.ingress.kubernetes.io/rewrite-target=/ \uc744 \ucd94\uac00 \ud574\uc900\ub2e4 3. \uc811\uadfc \ud655\uc778 \uac00\uc7a5 \uba3c\uc800 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc6cc\ud06c\ub85c\ub4dc\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uae30\ub3d9 \uc911\uc778\uc9c0 \ud655\uc778 kubectl get pods -n demo NAME READY STATUS RESTARTS AGE demo01-5dff6fb4d4-b4rch 1/1 Running 0 2m demo02-d57799f78-phs4r 1/1 Running 0 1m kubectl get svc -n demo NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE demo01 ClusterIP 10.96.144.58 <none> 80/TCP 7m demo02 ClusterIP 10.96.69.13 <none> 80/TCP 5m \uc704\uc5d0\uc11c \uad6c\uc131\ud55c Ingress \uc124\uc815 \ub3d9\uc791 \ud655\uc778: /v2\ub97c \uc81c\uc678\ud55c \ubaa8\ub4e0 path\ub294 \uccab \ubc88\uc9f8 demo01 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec\ub418\uba70 /v2\ub9cc demo02 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec curl 127.0.0.1 Hello, world! Version: 1.0.0 Hostname: demo01-5dff6fb4d4-b4rch curl 127.0.0.1/v2 Hello, world! Version: 2.0.0 Hostname: demo02-d57799f78-phs4r 4 Clean Up \uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"\ud578\uc988\uc628 2.3 Service & Ingress"},{"location":"hello-kubernetes/section02/handson/service-ingress/#23-service-ingress","text":"Ingress-nginx \uad6c\uc131 \ubc0f Ingress\ub97c \ud1b5\ud574 Service \uc811\uadfc \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c ingress-nginx controller\ub97c \uad6c\uc131\ud558\uace0 Ingress\ub97c \ud1b5\ud574 \uc5ec\ub7ec \uac1c\uc758 \uc11c\ube44\uc2a4\uc5d0 \uc5b4\ub5bb\uac8c \uc811\uadfc\uc744 \ud560 \uc218 \uc788\ub294\uc9c0 \uc54c\uc544\ubcf4\ub294 \uc2e4\uc2b5","title":"\ud578\uc988\uc628 2.3 Service &amp; Ingress"},{"location":"hello-kubernetes/section02/handson/service-ingress/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Helm\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Helm \uc124\uce58 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \ubc29\ubc95: \uc2e4\uc2b5 \ub9c1\ud06c","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section02/handson/service-ingress/#architecture","text":"\ud558\ub098\uc758 Ingress\uc5d0 \uc5ec\ub7ec \ubc84\uc804\uc758 Backends\ub97c \uad6c\uc131\ud558\uace0 URL Path\ub97c \uae30\uc900\uc73c\ub85c \ud2b8\ub808\ud53d\uc744 \ub77c\uc6b0\ud305 /v2\ub97c \uc81c\uc678\ud55c \ubaa8\ub4e0 path( /* )\ub294 \uccab \ubc88\uc9f8 \ubc84\uc804\uc758 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec, /v2 \ub9cc \ub450 \ubc88\uc9f8 \ubc84\uc804\uc758 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec","title":"Architecture"},{"location":"hello-kubernetes/section02/handson/service-ingress/#1-ingress-nginx","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc790\uccb4\ub294 \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\ub294 \uc560\uadf8\ub178\uc2a4\ud2f1 \ud55c \ub3c4\uad6c\uc774\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c Ingress Controller\uac00 \uc788\uc73c\uba70 \ub300\ud45c\uc801\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 ingress \uc911\uc5d0\uc11c\ub294 Ingress-Nginx \uac00 \uc720\uba85\ud558\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0 \uc744 \ud558\ub294 \ucee8\ud2b8\ub864\ub7ec \uc774\ub2e4","title":"1 Ingress Nginx \uad6c\uc131"},{"location":"hello-kubernetes/section02/handson/service-ingress/#11-helm-value","text":"Helm\uc744 \ud1b5\ud574\uc11c \uc124\uce58\ud558\uae30 \uc704\ud574 \uae30\uc874 ingress nginx\uc758 helm value \uac12\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815 ingress-nginx-values.md controller: replicaCount: 1 nodeSelector: ingress-ready: \"true\" tolerations: - effect: NoSchedule key: node-role.kubernetes.io/master operator: Equal - effect: NoSchedule key: node-role.kubernetes.io/control-plane operator: Equal watchIngressWithoutClass: true hostPort: enabled: true service: type: NodePort Info \ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130\ub294 extraPortMappings\uc774 kind \ucee8\ud14c\uc774\ub108\uc758 hostport 80, 443\uc73c\ub85c \ub9e4\ud551\uc774 \ub418\uae30 \ub54c\ubb38\uc5d0 hostPort\ub85c Ingress Controller\ub97c \ud65c\uc131\ud654\ud574\uc8fc\uc5b4\uc57c \ud55c\ub2e4.","title":"1.1 Helm Value \uc124\uc815"},{"location":"hello-kubernetes/section02/handson/service-ingress/#12-ingress-nginx","text":"helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace -f ingress-nginx-values.yaml \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec\uac00 \uc644\ub8cc \ub418\uc5c8\ub2e4\uba74 IngressClass\ub294 nginx \ub85c \uad6c\uc131\uc774 \ub418\uba70 \ub2e4\uc74c\uacfc \uac19\uc774 \ud655\uc778 \uac00\ub2a5\ud558\ub2e4 kubectl get ingressclasses.networking.k8s.io NAME CONTROLLER PARAMETERS AGE nginx k8s.io/ingress-nginx <none> 5m","title":"1.2 Ingress-Nginx \ucef4\ud3ec\ub10c\ud2b8 \uc124\uce58"},{"location":"hello-kubernetes/section02/handson/service-ingress/#2","text":"\ub370\ubaa8 Stateless \uc560\ud50c\ub9ac\ucf00\uc774\uc158 v1\uacfc v2\ub97c demo \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ubc30\ud3ec\ud558\uace0 \uc11c\ube44\uc2a4 \ubc0f \uc778\uadf8\ub808\uc2a4\uae4c\uc9c0 \uc5f0\ub3d9\ud558\uc5ec \uc811\uadfc \ud655\uc778\uc744 \ud574 \ubcf8\ub2e4 \ub370\ubaa8\uc6a9 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0dd\uc131 kubectl create ns demo","title":"2 \ub370\ubaa8 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec"},{"location":"hello-kubernetes/section02/handson/service-ingress/#21-v1","text":"\uc560\ud50c\ub9ac\ucf00\uc774\uc158 v1 \ubc30\ud3ec \ubc0f \ubaa8\ub4e0 URL Path\uac00 v1 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \ud3ec\uc6cc\ub529 \ub418\ub3c4\ub85d Ingress \uc124\uc815 kubectl create deployment demo01 \\ --image=cloudacode/hello-go-app:v1.0.0 --port=8080 -n demo kubectl expose deployment demo01 --port=80 --target-port=8080 -n demo kubectl create ingress demo01 --class=nginx --rule=\"/*=demo01:80\" -n demo \ud639\uc740 \uc120\uc5b8\ud615(Declarative) \uc608\uc2dc ingress-service-demo-app.yaml Info \uc704\uc758 helm value \uac12\uc5d0\uc11c watchIngressWithoutClass: true \uc635\uc158\uc744 \uc8fc\uc5c8\uae30 \ub54c\ubb38\uc5d0 \ub530\ub85c class \uc635\uc158\uc744 \uc8fc\uc9c0 \uc54a\uc544\ub3c4 \uc790\ub3d9\uc73c\ub85c nginx ingress\ub97c \uc0ac\uc6a9\ud558\uac8c \ub41c\ub2e4. $ kubectl get ing NAME CLASS HOSTS ADDRESS PORTS AGE demo01 nginx * 10.96.119.252 80 112s","title":"2.1 \ub370\ubaa8\uc571 v1 \ubc30\ud3ec"},{"location":"hello-kubernetes/section02/handson/service-ingress/#22-v2","text":"\uc560\ud50c\ub9ac\ucf00\uc774\uc158 v2 \ubc30\ud3ec \ubc0f /v2 URL Path\uac00 v2 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \ud3ec\uc6cc\ub529 \ub418\ub3c4\ub85d Ingress \uc124\uc815 kubectl create deployment demo02 \\ --image=cloudacode/hello-go-app:v2.0.0 --port=8080 -n demo kubectl expose deployment demo02 --port=80 --target-port=8080 -n demo kubectl create ingress demo02 --class=nginx --rule=\"/v2=demo02:80\" -n demo \ud639\uc740 \uc120\uc5b8\ud615(Declarative) \uc608\uc2dc ingress-service-demo-app.yaml Tip \ub9cc\uc57d \uc560\ud50c\ub9ac\ucf00\uc774\uc158 url\uc774 / \ub85c \ub3d9\uc791\ud558\ub294 \uacbd\uc6b0\ub294 --annotation=\"nginx.ingress.kubernetes.io/rewrite-target=/ \uc744 \ucd94\uac00 \ud574\uc900\ub2e4","title":"2.2 \ub370\ubaa8\uc571 v2 \ubc30\ud3ec"},{"location":"hello-kubernetes/section02/handson/service-ingress/#3","text":"\uac00\uc7a5 \uba3c\uc800 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc6cc\ud06c\ub85c\ub4dc\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uae30\ub3d9 \uc911\uc778\uc9c0 \ud655\uc778 kubectl get pods -n demo NAME READY STATUS RESTARTS AGE demo01-5dff6fb4d4-b4rch 1/1 Running 0 2m demo02-d57799f78-phs4r 1/1 Running 0 1m kubectl get svc -n demo NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE demo01 ClusterIP 10.96.144.58 <none> 80/TCP 7m demo02 ClusterIP 10.96.69.13 <none> 80/TCP 5m \uc704\uc5d0\uc11c \uad6c\uc131\ud55c Ingress \uc124\uc815 \ub3d9\uc791 \ud655\uc778: /v2\ub97c \uc81c\uc678\ud55c \ubaa8\ub4e0 path\ub294 \uccab \ubc88\uc9f8 demo01 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec\ub418\uba70 /v2\ub9cc demo02 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec curl 127.0.0.1 Hello, world! Version: 1.0.0 Hostname: demo01-5dff6fb4d4-b4rch curl 127.0.0.1/v2 Hello, world! Version: 2.0.0 Hostname: demo02-d57799f78-phs4r","title":"3. \uc811\uadfc \ud655\uc778"},{"location":"hello-kubernetes/section02/handson/service-ingress/#4-clean-up","text":"\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"4 Clean Up"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/","text":"3.1 HPA Horizontal Pod Autoscaling \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc790\ub3d9 \ud655\uc7a5\ud558\ub294 \ub370 \uc77c\ubc18\uc801\uc73c\ub85c HPA(Horizontal Pod Autoscaling)\uac00 \uae30\ubcf8\uc801\uc73c\ub85c \uc0ac\uc6a9\ub418\uba70 \ub300\ud45c\uc801\uc73c\ub85c CPU, \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \uba54\ud2b8\ub9ad \uae30\ubc18\uc73c\ub85c \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc815\ud574\uc9c4 \uc218\uce58\uc5d0 \ub9de\ub3c4\ub85d Deployment, StatefulSet\uc640 \uac19\uc740 \uc6cc\ud06c\ub85c\ub4dc \ub9ac\uc18c\uc2a4\uc758 \uaddc\ubaa8\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \uc870\uc815\ud55c\ub2e4. HPA controller\ub77c\ub294 \ucee8\ud2b8\ub864\ub7ec \ucef4\ud3ec\ub10c\ud2b8\uac00 Metric Server\uc5d0 \uc218\uc9d1\ub41c \uba54\ud2b8\ub9ad\uc744 \uae30\uc900\uc73c\ub85c HorizontalPodAutoscaler \ucfe0\ubc84\ub124\ud2f0\uc2a4 api \ub9ac\uc18c\uc2a4\ub97c \ud1b5\ud574 \uc2a4\ucf00\uc77c\ub9c1 \uc870\uc815\uc774 \uc774\ub8e8\uc5b4 \uc9c0\uba70 \ud574\ub2f9 HorizontalPodAutoscaler\ub294 Deployments \ubc0f ReplicaSet\uc758 \ud06c\uae30\ub97c \uc81c\uc5b4\ud55c\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 v1.23 \ubd80\ud130 \uc801\uc6a9\ub418\ub294 HPA v2 \uc5d0\uc11c\ub294 CPU, Memory \uc678\uc5d0\ub3c4 custom metric\uc744 \uc9c0\uc6d0\ud55c\ub2e4. \ub9cc\uc57d \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc601\uc5ed \ubc16\uc5d0 \uc788\ub294 \ub9ac\uc18c\uc2a4\uc758 metric\uc744 \uac00\uc9c0\uace0 auto scaling\uc744 \ud574\uc57c \ud55c\ub2e4\uba74 KEDA \ub97c \ud1b5\ud574\uc11c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4. Tip KEDA\ub97c \ud1b5\ud574 Prometheus\uc758 \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad(\ud2b9\uc815 URL Path)\uc744 \ubc14\ud0d5\uc73c\ub85c AutoScaling \uc124\uc815\ud558\ub294 \ubc29\ubc95: Autoscale Kubernetes pods based on ingress request \u2014 Prometheus, KEDA, and K6 HPA\ub294 DaemonSet\uacfc \uac19\uc740 \ud06c\uae30 \uc870\uc808\uc774 \ubd88\uac00\ub2a5\ud55c \uc624\ube0c\uc81d\ud2b8\uc5d0\ub294 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc73c\uba70 \uc218\ud3c9\uc801 \ud655\uc7a5\uc774\ubbc0\ub85c \ud560\ub2f9\ub41c CPU \ud639\uc740 Memory \ud06c\uae30\ub97c \ub298\ub824\uc57c \ud558\ub294 \uc218\uc9c1\uc801 \ud655\uc7a5\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\ub294 Vertical Pod Autoscaler CRD(custom resource definition)\ub97c \ud074\ub7ec\uc2a4\ud130\uc5d0 \ucd94\uac00\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \uc54c\uace0\ub9ac\uc998 HPA \ucee8\ud2b8\ub864\ub7ec\ub294 \uc6d0\ud558\ub294 \uba54\ud2b8\ub9ad \uac12(desired)\uacfc \ud604\uc7ac \uba54\ud2b8\ub9ad \uac12(current) \uac04\uc758 \ube44\uc728\uc744 \uacc4\uc0b0\ud558\uc5ec \ub3d9\uc791 \ud558\uac8c \ub41c\ub2e4. desired replicas = ceil ( current replicas * ( current metric / desired metric ) ) Info ceil() \ud568\uc218\ub294 \uc62c\ub9bc\ud558\uc5ec \uc8fc\uc5b4\uc9c4 \uc22b\uc790\ubcf4\ub2e4 \ud06c\uac70\ub098 \uac19\uc740 \uc815\uc218\ub97c \ubc18\ud658 \ud55c\ub2e4 podautoscaler/replica_calculator.go newReplicas := int32(math.Ceil(newUsageRatio * float64(len(metrics)))) if (newUsageRatio < 1.0 && newReplicas > currentReplicas) || (newUsageRatio > 1.0 && newReplicas < currentReplicas) { // return the current replicas if the change of metrics length would cause a change in scale direction return currentReplicas, utilization, rawUtilization, timestamp, nil } \uc608\ub97c \ub4e4\uc5b4 \ud604\uc7ac \uba54\ud2b8\ub9ad \uac12\uc774 200m\uc774\uace0 \uc6d0\ud558\ub294 \uac12\uc774 100m\uc774\uba74 \ubcf5\uc81c\ubcf8 \uc218\ub294 200.0 / 100.0 == 2.0\uc774\ubbc0\ub85c \ub450 \ubc30\uac00 \ud655\uc7a5\uc774 \ub418\uba70 \ud604\uc7ac \uac12\uc774 \ub300\uc2e0 50m\uc774\uba74 50.0 / 100.0 == 0.5\uac00 \ub418\ubbc0\ub85c \ubcf5\uc81c\ubcf8 \uc218\ub97c \uc808\ubc18\uc73c\ub85c \uc904\uc774\uace0 \ube44\uc728\uc774 1.0\uc5d0 \uac00\uae5d\uac8c \ub418\uba74 \ubaa8\ub4e0 \uc2a4\ucf00\uc77c\ub9c1\uc774 \ub354 \uc774\uc0c1 \uc77c\uc5b4\ub098\uc9c0 \uc54a\uac8c \ub41c\ub2e4. Scaling \ud2b8\ub798\ud53d\uc774 \uc99d\uac00\ud558\uc5ec Pod\uc758 CPU \uc0ac\uc6a9\ub7c9\uc774 50%\uc5d0 \ub3c4\ub2ec\ud558\uac8c \ub418\uba74 \ucd5c\ub300 10\uac1c \uae4c\uc9c0 \ud655\uc7a5\ud558\uace0 \ud2b8\ub798\ud53d\uc774 \uac10\uc18c\ud558\uba74 \ub9ac\uc18c\uc2a4\ub97c \ucd95\uc18c\ud560 \uc218 \uc788\ub3c4\ub85d HPA\ub97c \uad6c\uc131\ud55c\ub2e4. apiVersion: autoscaling/v1 kind: HorizontalPodAutoscaler ... spec: scaleTargetRef: apiVersion: apps/v1 kind: Deployment name: nginx minReplicas: 1 maxReplicas: 10 targetCPUUtilizationPercentage: 50 Scale Down \uc548\uc815\ud654 \ud558\uae30 Scale Down\uc774 \uc774\ub8e8\uc5b4\uc9c8 \ub54c \ubd80\ud558\uac00 \uac11\uc790\uae30 \ub2e4\uc2dc \uc77c\uc5b4\ub098\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \uc548\uc815\ud654\ub97c \uace0\ub824\ud558\uc5ec \ucfe8\ub2e4\uc6b4(\uc810\uc9c4\uc801\uc73c\ub85c \ucd95\uc18c)\ub97c \ud560 \ud544\uc694\uac00 \uc788\ub2e4. periodSeconds \uc2a4\ucf00\uc77c \ub2e4\uc6b4 \uc870\uac74\uc5d0 \ub9de\uc544\uc11c pod\ub97c \ucd95\uc18c \ud560\ub54c \ud2b9\uc815 \uc2dc\uac04(\ucd08, second) \uac04\uaca9\uc73c\ub85c \ucfe8\ub2e4\uc6b4 \ud560\uc218 \uc788\ub2e4. behavior: scaleDown: policies: - type: Pods value: 4 periodSeconds: 60 - type: Percent value: 10 periodSeconds: 60 \ud55c\ubc88 \uc904\uc5b4\ub4e4\uba74 60\ucd08 \ub3d9\uc548\uc740 \uc720\uc9c0\ub418\uba70 \ub9cc\uc57d \uc704 \uc124\uc815 \ucc98\ub7fc \ub3d9\uc2dc\uc5d0 2\uac1c\uc758 \uc815\ucc45\uc774 \uc788\ub2e4\uba74 \ub9ce\uc740 \ubcc0\uacbd\uc744 \ud5c8\uc6a9\ud558\ub294 \ucabd\uc774 \uba3c\uc800 \uc801\uc6a9\ub41c\ub2e4. \uc608\ub97c \ub4e4\uc5b4, pod\uac00 20\uac1c \ub77c\uace0 \uac00\uc815 \ud558\uba74 10%(2\uac1c) < 4\uac1c => 4\uac1c\uac00 \uc904\uc5b4\ub4e4\uba70 50\uac1c \ub77c\uace0 \uac00\uc815 \ud558\uba74 10%(5\uac1c) > 4\uac1c => 5\uac1c \uc904\uc5b4\ub4e4\uac8c \ub41c\ub2e4. stabilizationWindowSeconds \ub610\ud55c \uc548\uc815\ud654 \uc708\ub3c4\uc6b0 \uc2dc\uac04\uc744 \uc124\uc815\ud558\uc5ec \uc2a4\ucf00\uc77c \ub2e4\uc6b4\uc774 \uc870\uac74\uc774 \ub9cc\uc871 \ub418\uc5c8\ub354\ub77c\ub3c4 \ud2b9\uc815 \uc8fc\uae30 \ub3d9\uc548 \uba54\ud2b8\ub9ad\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uc5ec \ud574\ub2f9 \uc2dc\uac04 \uad6c\uac04\uc5d0\uc11c \uac00\uc7a5 \ub192\uc740 \uac12\uc774 \uc2a4\ucf00\uc77c\ub2e4\uc6b4 \uc870\uac74\uc5d0 \ub9de\uc558\uc744 \ub54c \ucd95\uc18c\ub97c \uc9c4\ud589\ud560 \uc218\ub3c4 \uc788\ub2e4. \uc544\ub798\uc758 \uc608\uc2dc\uc5d0\uc11c \ucd5c\uadfc 5\ubd84 \ub3d9\uc548\uc758 \ubaa8\ub4e0 \uc0c1\ud0dc\uac00 \uace0\ub824 \ub300\uc0c1\uc774 \ub41c\ub2e4. behavior: scaleDown: stabilizationWindowSeconds: 300","title":"3.1 HPA"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#31-hpa","text":"","title":"3.1 HPA"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#horizontal-pod-autoscaling","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc790\ub3d9 \ud655\uc7a5\ud558\ub294 \ub370 \uc77c\ubc18\uc801\uc73c\ub85c HPA(Horizontal Pod Autoscaling)\uac00 \uae30\ubcf8\uc801\uc73c\ub85c \uc0ac\uc6a9\ub418\uba70 \ub300\ud45c\uc801\uc73c\ub85c CPU, \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \uba54\ud2b8\ub9ad \uae30\ubc18\uc73c\ub85c \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc815\ud574\uc9c4 \uc218\uce58\uc5d0 \ub9de\ub3c4\ub85d Deployment, StatefulSet\uc640 \uac19\uc740 \uc6cc\ud06c\ub85c\ub4dc \ub9ac\uc18c\uc2a4\uc758 \uaddc\ubaa8\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \uc870\uc815\ud55c\ub2e4. HPA controller\ub77c\ub294 \ucee8\ud2b8\ub864\ub7ec \ucef4\ud3ec\ub10c\ud2b8\uac00 Metric Server\uc5d0 \uc218\uc9d1\ub41c \uba54\ud2b8\ub9ad\uc744 \uae30\uc900\uc73c\ub85c HorizontalPodAutoscaler \ucfe0\ubc84\ub124\ud2f0\uc2a4 api \ub9ac\uc18c\uc2a4\ub97c \ud1b5\ud574 \uc2a4\ucf00\uc77c\ub9c1 \uc870\uc815\uc774 \uc774\ub8e8\uc5b4 \uc9c0\uba70 \ud574\ub2f9 HorizontalPodAutoscaler\ub294 Deployments \ubc0f ReplicaSet\uc758 \ud06c\uae30\ub97c \uc81c\uc5b4\ud55c\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 v1.23 \ubd80\ud130 \uc801\uc6a9\ub418\ub294 HPA v2 \uc5d0\uc11c\ub294 CPU, Memory \uc678\uc5d0\ub3c4 custom metric\uc744 \uc9c0\uc6d0\ud55c\ub2e4. \ub9cc\uc57d \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc601\uc5ed \ubc16\uc5d0 \uc788\ub294 \ub9ac\uc18c\uc2a4\uc758 metric\uc744 \uac00\uc9c0\uace0 auto scaling\uc744 \ud574\uc57c \ud55c\ub2e4\uba74 KEDA \ub97c \ud1b5\ud574\uc11c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4. Tip KEDA\ub97c \ud1b5\ud574 Prometheus\uc758 \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad(\ud2b9\uc815 URL Path)\uc744 \ubc14\ud0d5\uc73c\ub85c AutoScaling \uc124\uc815\ud558\ub294 \ubc29\ubc95: Autoscale Kubernetes pods based on ingress request \u2014 Prometheus, KEDA, and K6 HPA\ub294 DaemonSet\uacfc \uac19\uc740 \ud06c\uae30 \uc870\uc808\uc774 \ubd88\uac00\ub2a5\ud55c \uc624\ube0c\uc81d\ud2b8\uc5d0\ub294 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc73c\uba70 \uc218\ud3c9\uc801 \ud655\uc7a5\uc774\ubbc0\ub85c \ud560\ub2f9\ub41c CPU \ud639\uc740 Memory \ud06c\uae30\ub97c \ub298\ub824\uc57c \ud558\ub294 \uc218\uc9c1\uc801 \ud655\uc7a5\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\ub294 Vertical Pod Autoscaler CRD(custom resource definition)\ub97c \ud074\ub7ec\uc2a4\ud130\uc5d0 \ucd94\uac00\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.","title":"Horizontal Pod Autoscaling"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#_1","text":"HPA \ucee8\ud2b8\ub864\ub7ec\ub294 \uc6d0\ud558\ub294 \uba54\ud2b8\ub9ad \uac12(desired)\uacfc \ud604\uc7ac \uba54\ud2b8\ub9ad \uac12(current) \uac04\uc758 \ube44\uc728\uc744 \uacc4\uc0b0\ud558\uc5ec \ub3d9\uc791 \ud558\uac8c \ub41c\ub2e4. desired replicas = ceil ( current replicas * ( current metric / desired metric ) ) Info ceil() \ud568\uc218\ub294 \uc62c\ub9bc\ud558\uc5ec \uc8fc\uc5b4\uc9c4 \uc22b\uc790\ubcf4\ub2e4 \ud06c\uac70\ub098 \uac19\uc740 \uc815\uc218\ub97c \ubc18\ud658 \ud55c\ub2e4 podautoscaler/replica_calculator.go newReplicas := int32(math.Ceil(newUsageRatio * float64(len(metrics)))) if (newUsageRatio < 1.0 && newReplicas > currentReplicas) || (newUsageRatio > 1.0 && newReplicas < currentReplicas) { // return the current replicas if the change of metrics length would cause a change in scale direction return currentReplicas, utilization, rawUtilization, timestamp, nil } \uc608\ub97c \ub4e4\uc5b4 \ud604\uc7ac \uba54\ud2b8\ub9ad \uac12\uc774 200m\uc774\uace0 \uc6d0\ud558\ub294 \uac12\uc774 100m\uc774\uba74 \ubcf5\uc81c\ubcf8 \uc218\ub294 200.0 / 100.0 == 2.0\uc774\ubbc0\ub85c \ub450 \ubc30\uac00 \ud655\uc7a5\uc774 \ub418\uba70 \ud604\uc7ac \uac12\uc774 \ub300\uc2e0 50m\uc774\uba74 50.0 / 100.0 == 0.5\uac00 \ub418\ubbc0\ub85c \ubcf5\uc81c\ubcf8 \uc218\ub97c \uc808\ubc18\uc73c\ub85c \uc904\uc774\uace0 \ube44\uc728\uc774 1.0\uc5d0 \uac00\uae5d\uac8c \ub418\uba74 \ubaa8\ub4e0 \uc2a4\ucf00\uc77c\ub9c1\uc774 \ub354 \uc774\uc0c1 \uc77c\uc5b4\ub098\uc9c0 \uc54a\uac8c \ub41c\ub2e4.","title":"\uc54c\uace0\ub9ac\uc998"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#scaling","text":"\ud2b8\ub798\ud53d\uc774 \uc99d\uac00\ud558\uc5ec Pod\uc758 CPU \uc0ac\uc6a9\ub7c9\uc774 50%\uc5d0 \ub3c4\ub2ec\ud558\uac8c \ub418\uba74 \ucd5c\ub300 10\uac1c \uae4c\uc9c0 \ud655\uc7a5\ud558\uace0 \ud2b8\ub798\ud53d\uc774 \uac10\uc18c\ud558\uba74 \ub9ac\uc18c\uc2a4\ub97c \ucd95\uc18c\ud560 \uc218 \uc788\ub3c4\ub85d HPA\ub97c \uad6c\uc131\ud55c\ub2e4. apiVersion: autoscaling/v1 kind: HorizontalPodAutoscaler ... spec: scaleTargetRef: apiVersion: apps/v1 kind: Deployment name: nginx minReplicas: 1 maxReplicas: 10 targetCPUUtilizationPercentage: 50","title":"Scaling"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#scale-down","text":"Scale Down\uc774 \uc774\ub8e8\uc5b4\uc9c8 \ub54c \ubd80\ud558\uac00 \uac11\uc790\uae30 \ub2e4\uc2dc \uc77c\uc5b4\ub098\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \uc548\uc815\ud654\ub97c \uace0\ub824\ud558\uc5ec \ucfe8\ub2e4\uc6b4(\uc810\uc9c4\uc801\uc73c\ub85c \ucd95\uc18c)\ub97c \ud560 \ud544\uc694\uac00 \uc788\ub2e4.","title":"Scale Down \uc548\uc815\ud654 \ud558\uae30"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#periodseconds","text":"\uc2a4\ucf00\uc77c \ub2e4\uc6b4 \uc870\uac74\uc5d0 \ub9de\uc544\uc11c pod\ub97c \ucd95\uc18c \ud560\ub54c \ud2b9\uc815 \uc2dc\uac04(\ucd08, second) \uac04\uaca9\uc73c\ub85c \ucfe8\ub2e4\uc6b4 \ud560\uc218 \uc788\ub2e4. behavior: scaleDown: policies: - type: Pods value: 4 periodSeconds: 60 - type: Percent value: 10 periodSeconds: 60 \ud55c\ubc88 \uc904\uc5b4\ub4e4\uba74 60\ucd08 \ub3d9\uc548\uc740 \uc720\uc9c0\ub418\uba70 \ub9cc\uc57d \uc704 \uc124\uc815 \ucc98\ub7fc \ub3d9\uc2dc\uc5d0 2\uac1c\uc758 \uc815\ucc45\uc774 \uc788\ub2e4\uba74 \ub9ce\uc740 \ubcc0\uacbd\uc744 \ud5c8\uc6a9\ud558\ub294 \ucabd\uc774 \uba3c\uc800 \uc801\uc6a9\ub41c\ub2e4. \uc608\ub97c \ub4e4\uc5b4, pod\uac00 20\uac1c \ub77c\uace0 \uac00\uc815 \ud558\uba74 10%(2\uac1c) < 4\uac1c => 4\uac1c\uac00 \uc904\uc5b4\ub4e4\uba70 50\uac1c \ub77c\uace0 \uac00\uc815 \ud558\uba74 10%(5\uac1c) > 4\uac1c => 5\uac1c \uc904\uc5b4\ub4e4\uac8c \ub41c\ub2e4.","title":"periodSeconds"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#stabilizationwindowseconds","text":"\ub610\ud55c \uc548\uc815\ud654 \uc708\ub3c4\uc6b0 \uc2dc\uac04\uc744 \uc124\uc815\ud558\uc5ec \uc2a4\ucf00\uc77c \ub2e4\uc6b4\uc774 \uc870\uac74\uc774 \ub9cc\uc871 \ub418\uc5c8\ub354\ub77c\ub3c4 \ud2b9\uc815 \uc8fc\uae30 \ub3d9\uc548 \uba54\ud2b8\ub9ad\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uc5ec \ud574\ub2f9 \uc2dc\uac04 \uad6c\uac04\uc5d0\uc11c \uac00\uc7a5 \ub192\uc740 \uac12\uc774 \uc2a4\ucf00\uc77c\ub2e4\uc6b4 \uc870\uac74\uc5d0 \ub9de\uc558\uc744 \ub54c \ucd95\uc18c\ub97c \uc9c4\ud589\ud560 \uc218\ub3c4 \uc788\ub2e4. \uc544\ub798\uc758 \uc608\uc2dc\uc5d0\uc11c \ucd5c\uadfc 5\ubd84 \ub3d9\uc548\uc758 \ubaa8\ub4e0 \uc0c1\ud0dc\uac00 \uace0\ub824 \ub300\uc0c1\uc774 \ub41c\ub2e4. behavior: scaleDown: stabilizationWindowSeconds: 300","title":"stabilizationWindowSeconds"},{"location":"hello-kubernetes/section03/s3-c4/","text":"3.4 Taints & Tolerations Taints Tolerations","title":"3.4 Taints & Tolerations"},{"location":"hello-kubernetes/section03/s3-c4/#34-taints-tolerations","text":"","title":"3.4 Taints &amp; Tolerations"},{"location":"hello-kubernetes/section03/s3-c4/#taints","text":"","title":"Taints"},{"location":"hello-kubernetes/section03/s3-c4/#tolerations","text":"","title":"Tolerations"},{"location":"hello-kubernetes/section03/s3-c5/","text":"3.5 Affinity Pod Affinity Node Affinity","title":"3.5 Affinity"},{"location":"hello-kubernetes/section03/s3-c5/#35-affinity","text":"","title":"3.5 Affinity"},{"location":"hello-kubernetes/section03/s3-c5/#pod-affinity","text":"","title":"Pod Affinity"},{"location":"hello-kubernetes/section03/s3-c5/#node-affinity","text":"","title":"Node Affinity"},{"location":"hello-kubernetes/section03/statefulset/","text":"3.3 StatefulSet StatefulSet \uc0c1\ud0dc\uac00 \uc788\ub294(stateful) \uc6cc\ud06c\ub85c\ub4dc\ub97c \ud2b9\uc815 \uc21c\uc11c\uc5d0 \ub9de\uac8c \ubc30\ud3ec\ud558\uace0 \ub3d9\uc77c\ud558\uac8c \uc6b4\uc601\ud558\uae30 \uc704\ud574\uc11c StatefulSet\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4. StatefulSet\uc744 \ud65c\uc6a9\ud558\uba74 Pod \uc774\ub984\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \ubd80\uc5ec \ud560 \uc218 \uc788\uc73c\uba70 PV\ub97c Pod\uc5d0 \uc9c0\uc18d\uc801\uc73c\ub85c \ub9e4\ud551\ud560 \uc218 \uc788\ub2e4. \ub2e4\uc218 Pod\uc758 \ud615\uc0c1\uc744 \ub3d9\uc77c\ud558\uac8c \uad00\ub9ac \ud55c\ub2e4\ub294 \uce21\uba74\uc5d0\uc11c\ub294 Deployment/ReplicaSet\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc, StatefulSet\uc740 network\ub098 storage\uc758 \ub9ac\uc18c\uc2a4\uac00 \uace0\uc815\ub418\uc5b4 \uc788\uace0 \uc21c\uc11c\uc5d0 \uc758\ud574\uc11c Pod\uac00 \uc2dc\uc791 \ud639\uc740 \uc911\uc9c0\uac00 \ub41c\ub2e4\ub294 \uc810\uc774 \ud070 \ucc28\uc774\uc810\uc774\ub2e4. \uacb0\ub860\uc801\uc73c\ub85c StatefulSet\uc740 \uc21c\ucc28\uc801\uc73c\ub85c \ubc30\ud3ec, \uc2dd\ubcc4\uc790 ID\uac00 \uc720\uc9c0 \ub418\uc5b4\uc57c \ud558\ub294 DB \ud639\uc740 leader/follower \uad6c\uc870\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc218\uc6a9\ud558\ub294\ub370 \uc801\ud569\ud558\ub2e4. \ud2b9\uc9d5 Pod \uc774\ub984\uc740 replica \uac1c\uc218\uc5d0 \ub9de\uac8c \uc5f0\uc18d\uc801\uc778 \uc22b\uc790\ub85c \uc0dd\uc131\ub428 \ub370\uc774\ud130\uc758 \uc720\uc2e4\uc744 \ub9c9\uae30 \uc704\ud574 StatefulSet\uc744 \uc0ad\uc81c\ub098 \uc2a4\ucf00\uc77c\ub2e4\uc6b4\ud574\ub3c4 \ub9e4\ud551\uc774 \ub418\uc5b4 \uc788\ub294 \ubcfc\ub968\uc740 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub418\uc9c0 \uc54a\ub294 \uac83\uc774 \uae30\ubcf8 \uac12 Info 1.23 \ubc84\uc804\ubd80\ud130 \uba85\uc2dc\uc801\uc73c\ub85c \uc218\ub3d9 scale\uc744 \ud560 \uacbd\uc6b0 volume\uc744 \uc790\ub3d9 \uc0ad\uc81c \uac00\ub2a5\ud55c PVC Retain \uae30\ub2a5\uc774 alpha\uc5d0 \ucd94\uac00\uac00 \ub418\uc5c8\ub2e4. spec: persistentVolumeClaimRetentionPolicy: whenDeleted: Retain # StatefulSet\uc774 \uc0ad\uc81c\ub420 \ub54c \ub3d9\uc791 whenScaled: Delete # replica \uc218 scale down \ub54c \ub3d9\uc791 \ud30c\ub4dc\uc758 \ubc88\ud638, \ud638\uc2a4\ud2b8\ub124\uc784, SRV \ub808\ucf54\ub4dc\uc640 A \ub808\ucf54\ub4dc\uc774\ub984\uc740 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc9c0\ub9cc \ud30c\ub4dc\uc758 IP \uc8fc\uc18c\ub294 \ubcc0\uacbd\ub420 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 IP\uac00 \uc544\ub2cc DNS\ub85c \uc9c8\uc758 \ud560 \uc218 \uc788\ub3c4\ub85d Headless \uc11c\ube44\uc2a4 \uac00 \ud544\uc694 (ex, web-0.nginx) kind: Service metadata: name: nginx spec: ports: - port: 80 name: web clusterIP: None selector: app: nginx \uc2a4\ucf00\uc77c\ub9c1\ud558\ub294 \uacbd\uc6b0 \ubaa8\ub4e0 \uc120\ud589 \ud30c\ub4dc\uac00 Running \ubc0f Ready \uc0c1\ud0dc\uc5ec\uc57c \ud558\uba70, \uc2a4\ucf00\uc77c\ub2e4\uc6b4 \ud558\ub294 \uacbd\uc6b0 \ud6c4\uc18d \ud30c\ub4dc\uac00 \uc644\uc804\ud788 \uc885\ub8cc\ub41c \ud6c4 \uc0ad\uc81c\uac00 \ub428","title":"3.3 StatefulSet"},{"location":"hello-kubernetes/section03/statefulset/#33-statefulset","text":"","title":"3.3 StatefulSet"},{"location":"hello-kubernetes/section03/statefulset/#statefulset","text":"\uc0c1\ud0dc\uac00 \uc788\ub294(stateful) \uc6cc\ud06c\ub85c\ub4dc\ub97c \ud2b9\uc815 \uc21c\uc11c\uc5d0 \ub9de\uac8c \ubc30\ud3ec\ud558\uace0 \ub3d9\uc77c\ud558\uac8c \uc6b4\uc601\ud558\uae30 \uc704\ud574\uc11c StatefulSet\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4. StatefulSet\uc744 \ud65c\uc6a9\ud558\uba74 Pod \uc774\ub984\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \ubd80\uc5ec \ud560 \uc218 \uc788\uc73c\uba70 PV\ub97c Pod\uc5d0 \uc9c0\uc18d\uc801\uc73c\ub85c \ub9e4\ud551\ud560 \uc218 \uc788\ub2e4. \ub2e4\uc218 Pod\uc758 \ud615\uc0c1\uc744 \ub3d9\uc77c\ud558\uac8c \uad00\ub9ac \ud55c\ub2e4\ub294 \uce21\uba74\uc5d0\uc11c\ub294 Deployment/ReplicaSet\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc, StatefulSet\uc740 network\ub098 storage\uc758 \ub9ac\uc18c\uc2a4\uac00 \uace0\uc815\ub418\uc5b4 \uc788\uace0 \uc21c\uc11c\uc5d0 \uc758\ud574\uc11c Pod\uac00 \uc2dc\uc791 \ud639\uc740 \uc911\uc9c0\uac00 \ub41c\ub2e4\ub294 \uc810\uc774 \ud070 \ucc28\uc774\uc810\uc774\ub2e4. \uacb0\ub860\uc801\uc73c\ub85c StatefulSet\uc740 \uc21c\ucc28\uc801\uc73c\ub85c \ubc30\ud3ec, \uc2dd\ubcc4\uc790 ID\uac00 \uc720\uc9c0 \ub418\uc5b4\uc57c \ud558\ub294 DB \ud639\uc740 leader/follower \uad6c\uc870\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc218\uc6a9\ud558\ub294\ub370 \uc801\ud569\ud558\ub2e4.","title":"StatefulSet"},{"location":"hello-kubernetes/section03/statefulset/#_1","text":"Pod \uc774\ub984\uc740 replica \uac1c\uc218\uc5d0 \ub9de\uac8c \uc5f0\uc18d\uc801\uc778 \uc22b\uc790\ub85c \uc0dd\uc131\ub428 \ub370\uc774\ud130\uc758 \uc720\uc2e4\uc744 \ub9c9\uae30 \uc704\ud574 StatefulSet\uc744 \uc0ad\uc81c\ub098 \uc2a4\ucf00\uc77c\ub2e4\uc6b4\ud574\ub3c4 \ub9e4\ud551\uc774 \ub418\uc5b4 \uc788\ub294 \ubcfc\ub968\uc740 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub418\uc9c0 \uc54a\ub294 \uac83\uc774 \uae30\ubcf8 \uac12 Info 1.23 \ubc84\uc804\ubd80\ud130 \uba85\uc2dc\uc801\uc73c\ub85c \uc218\ub3d9 scale\uc744 \ud560 \uacbd\uc6b0 volume\uc744 \uc790\ub3d9 \uc0ad\uc81c \uac00\ub2a5\ud55c PVC Retain \uae30\ub2a5\uc774 alpha\uc5d0 \ucd94\uac00\uac00 \ub418\uc5c8\ub2e4. spec: persistentVolumeClaimRetentionPolicy: whenDeleted: Retain # StatefulSet\uc774 \uc0ad\uc81c\ub420 \ub54c \ub3d9\uc791 whenScaled: Delete # replica \uc218 scale down \ub54c \ub3d9\uc791 \ud30c\ub4dc\uc758 \ubc88\ud638, \ud638\uc2a4\ud2b8\ub124\uc784, SRV \ub808\ucf54\ub4dc\uc640 A \ub808\ucf54\ub4dc\uc774\ub984\uc740 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc9c0\ub9cc \ud30c\ub4dc\uc758 IP \uc8fc\uc18c\ub294 \ubcc0\uacbd\ub420 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 IP\uac00 \uc544\ub2cc DNS\ub85c \uc9c8\uc758 \ud560 \uc218 \uc788\ub3c4\ub85d Headless \uc11c\ube44\uc2a4 \uac00 \ud544\uc694 (ex, web-0.nginx) kind: Service metadata: name: nginx spec: ports: - port: 80 name: web clusterIP: None selector: app: nginx \uc2a4\ucf00\uc77c\ub9c1\ud558\ub294 \uacbd\uc6b0 \ubaa8\ub4e0 \uc120\ud589 \ud30c\ub4dc\uac00 Running \ubc0f Ready \uc0c1\ud0dc\uc5ec\uc57c \ud558\uba70, \uc2a4\ucf00\uc77c\ub2e4\uc6b4 \ud558\ub294 \uacbd\uc6b0 \ud6c4\uc18d \ud30c\ub4dc\uac00 \uc644\uc804\ud788 \uc885\ub8cc\ub41c \ud6c4 \uc0ad\uc81c\uac00 \ub428","title":"\ud2b9\uc9d5"},{"location":"hello-kubernetes/section03/storage-persistent-volume/","text":"3.2 Storage Volumes \uc0c1\ud0dc\uac00 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc548\uc815\uc801\uc774\uace0 \uc601\uad6c\uc801\uc73c\ub85c \uc6b4\uc601\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ud544\uc694\ud558\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \uc784\uc2dc(Ephemeral) \ub370\uc774\ud130 \ubcfc\ub968\ubd80\ud130 \uc601\uad6c\uc801\uc778(Persistent) \ub370\uc774\ud130 \ubcfc\ub968\uae4c\uc9c0 \ub2e4\uc591\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \uc635\uc158\uc744 \uc81c\uacf5\ud558\uba70 CSI(Container Storage Interface)\ub97c \ud1b5\ud574\uc11c \ub2e4\uc591\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \ud504\ub85c\ubc14\uc774\ub354 \uc194\ub8e8\uc158\uacfc \uc5f0\ub3d9\ub41c\ub2e4. Ephemeral Volume \uc790\uccb4 \ud30c\uc77c\uc2dc\uc2a4\ud15c\uc744 \uc0ac\uc6a9\ud558\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4(Stateless \uc6cc\ud06c\ub85c\ub4dc \uc640 \uac19\uc774 \ubcc4\ub3c4\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \uc635\uc158\uc744 \uc8fc\uc9c0 \uc54a\uc740)\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uc784\uc2dc \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc0ac\uc6a9\ud558\uba70 \ucee8\ud14c\uc774\ub108\uac00 \uc7ac\uc2dc\uc791\uc774 \ub418\uba74 \uc2a4\ud1a0\ub9ac\uc9c0\uc758 \ub370\uc774\ud130\ub294 \uc720\uc2e4\uc774 \ub41c\ub2e4. \ub9cc\uc57d \ub370\uc774\ud130\uc758 \uc720\uc2e4\uc5d0 \uc601\ud5a5 \ubc1b\uc9c0 \uc54a\uc73c\uba74\uc11c Pod \uc7ac\uc2dc\uc791\uc774\ub098 \ud06c\ub798\uc26c\uc758 \uc601\ud5a5\uc740 \ubc1b\uc9c0 \uc54a\uace0 \uc9c1\uc811 \uc0ad\uc81c \ud558\uae30 \uc804\uae4c\uc9c0\ub9cc \uc720\uc9c0\ud558\uba74 \ub418\uba74 \ub418\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\ub77c\uba74 emptyDir \ubcfc\ub968 \ud0c0\uc785\uc744 \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4. \uc678\ubd80 \uc2a4\ud1a0\ub9ac\uc9c0\uc640 \uc5f0\ub3d9\ub418\uc5b4 \ubcfc\ub968\uc774 \uc0dd\uc131, \uad00\ub9ac \ub418\ub294 \uac83\uc774 \uc544\ub2cc \ub9ac\uc18c\uc2a4\uac00 \ub3d9\uc791 \uc911\uc778 \ub178\ub4dc\uc5d0\uc11c \uc0dd\uc131\ub41c \ubcfc\ub968\uc774\uba70 \ub178\ub4dc\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\ubfd0\ub9cc\uc774 \uc544\ub2cc \uba54\ubaa8\ub9ac\uc5d0 \ub9c8\uc6b4\ud2b8\ud558\uc5ec \uc0ac\uc6a9\ub3c4 \uac00\ub2a5\ud558\ub2e4. \uce90\uc2dc \uc601\uc5ed\uc774\ub098 \uc784\uc2dc\ub85c \ub370\uc774\ud130\ub97c \uc801\uc7ac\ud574\uc57c \ud558\ub294 \uacf5\uac04\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\uc5d0 \uc801\ud569\ud558\ub2e4. \ub178\ub4dc\uc5d0 \uc788\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc0ac\uc6a9\ud55c\ub2e4\ub294 \uad00\uc810\uc5d0\uc11c\ub294 HostPath \uc640 \ube44\uc2b7\ud558\ub098 \ub178\ub4dc\uc5d0 \uc788\ub294 \ud2b9\uc815 \ub370\uc774\ud130\uc5d0 \ubd88\uac00\ud53c\ud558\uac8c \uc811\uadfc\ud574\uc11c \uc77d\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \uc544\ub2c8\uace0\uc11c\ub294 emptyDir\uac00 \uc0ac\uc6a9\ub41c\ub2e4. volumeMounts: - mountPath: /data name: redis-data volumes: - name: redis-data emptyDir: {} Info \ub178\ub4dc\uc5d0\uc11c Pod\uc5d0 \ud560\ub2f9\ub41c emptyDir \ubcfc\ub968\uc758 \uc704\uce58\ub294 /var/lib/kubelet/pods/PODUID/volumes/kubernetes.io~empty-dir/VOLUMENAME \uc5d0\uc11c \ud655\uc778 \ud560 \uc218 \uc788\ub2e4 Persistant Volume & Claim PersistentVolume(PV)\ub294 \uc601\uad6c\uc801\uc778 \uc2a4\ud1a0\ub9ac\uc9c0 \ub9ac\uc18c\uc2a4\uc774\uba70 \uad00\ub9ac\uc790\uc5d0 \uc758\ud574\uc11c \uc0dd\uc131\ub418\uac70\ub098 StorageClasses\ub97c \ud1b5\ud574 \ub3d9\uc801\uc73c\ub85c \ud504\ub85c\ube44\uc800\ub2dd\ub41c \ud074\ub7ec\uc2a4\ud130\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\uc774\ub2e4. PersistentVolumeClaim(PVC)\ub294 \ub9ac\uc18c\uc2a4\uc5d0 PV\ub97c \ubc14\uc778\ub529\ud558\ub294 \ud558\ub098\uc758 \uc694\uccad(claim)\uc774\uba70 \uc0ac\uc6a9\uc790\uac00 \uc6a9\ub7c9\uacfc \uae30\ub2a5 \uadf8\ub9ac\uace0 \uc811\uadfc\ubaa8\ub4dc \ub4f1\uc744 \uc815\uc758\ud55c\ub2e4. \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc\uc5d0\uc11c EKS, GKE\uc640 \uac19\uc740 \ub9e4\ub2c8\uc9c0\ub4dc \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ub294 PVC\ub9cc \uc0dd\uc131\ud558\ub354\ub77c\ub3c4 \ub3d9\uc801\uc73c\ub85c CSI Provisioner\uac00 \uc694\uccad\ud55c \uc2a4\ud329\uc5d0 \ub9de\ucdb0\uc11c PV\ub97c \ub3d9\uc801\uc73c\ub85c \ud504\ub85c\ube44\uc800\ub2dd \ud574\uc900\ub2e4. \uc815\uc801\uc73c\ub85c \ubbf8\ub9ac PV\ub97c \ub9cc\ub4e4\uc5b4 \ub450\uace0 PVC\uc5d0 \ubc14\uc778\ub529 \ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \uac83\ub3c4 \uac00\ub2a5\ud558\ub2e4. kind: PersistentVolumeClaim metadata: name: redis-pvc spec: accessModes: - ReadWriteOnce resources: requests: storage: 5Gi High-level Kubernetes archetypes integrated with CSI Access Modes & Claim Lifecycle Access Modes PVC\uc5d0\ub294 \uc544\ub798\uc640 \uac19\uc740 AccessModes \uac00 \uc874\uc7ac \ud55c\ub2e4. AWS, Azure\uc640 \uac19\uc774 \ud558\ub098\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uc774 \ud558\ub098\uc758 \uc11c\ubc84 \ub178\ub4dc\uc5d0\ub9cc \ubd99\ub294 \uacbd\uc6b0\ub294 RWO\uc73c\ub85c\ub9cc \uc81c\ud55c\uc774 \ub418\uace0 GCP\ucc98\ub7fc \ud558\ub098\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uc774 \uc5ec\ub7ec \uc11c\ubc84 \ub178\ub4dc\uc5d0 \uc5f0\uacb0\ud560 \uc218 \uc788\ub294 \uacbd\uc6b0\ub294 RWO, ROX \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4. \uac01 \uc2a4\ud1a0\ub9ac\uc9c0 \ud504\ub85c\ubc14\uc774\ub354\ubcc4\ub85c \uc81c\uacf5\ud558\ub294 \ubc94\uc704\uac00 \ub2e4\ub974\ubbc0\ub85c \uacf5\uc2dd \ud398\uc774\uc9c0\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. ReadWriteOnce(RWO): \ub2e8\uc77c \ub178\ub4dc\uc5d0 \uc758\ud574 \uc77d\uae30 \uc4f0\uae30 \uad8c\ud55c\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\uc73c\uba70 \ub3d9\uc77c\ud55c \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589 \uc911\uc778 \uc5ec\ub7ec \ud30c\ub4dc\uac00 \ubcfc\ub968\uc5d0 \uc561\uc138\uc2a4\ud558\ub3c4\ub85d \ud5c8\uc6a9\ud560 \uc218 \uc788\ub2e4 ReadOnlyMany(ROX): \uc5ec\ub7ec \ub178\ub4dc\uc5d0\uc11c \uc77d\uae30 \uc804\uc6a9\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\ub2e4 ReadWriteMany(RWX): \uc5ec\ub7ec \ub178\ub4dc\uc5d0\uc11c \uc77d\uae30 \uc4f0\uae30\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\ub2e4 ReadWriteOncePod(RWOP): \ub2e8\uc77c \ud30c\ub4dc\uc5d0 \uc758\ud574 \uc77d\uae30 \uc4f0\uae30 \uad8c\ud55c\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\uc73c\uba70 \ud558\ub098\uc758 \ud30c\ub4dc\uc5d0\uc11c\ub9cc \uc77d\uace0 \uc4f0\ub3c4\ub85d \ud655\uc2e4\ud558\uac8c \uc81c\ud55c\uc744 \ub450\uace0 \uc2f6\uc740 \uacbd\uc6b0\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. CSI\uac00 \uc9c0\uc6d0\ud558\uace0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ubc84\uc804\uc774 1.22 \uc774\uc0c1\uc77c \ub54c\ub9cc \uac00\ub2a5\ud558\ub2e4 Info \ud074\ub77c\uc6b0\ub4dc \ub124\uc774\ud2f0\ube0c \ud658\uacbd\uc5d0\uc11c\ub294 RWO, RWOP\uac00 \uac00\uc7a5 \uc77c\ubc18\uc801\uc774\uba70 \uacf5\uc720\uac00 \ud544\uc694\ud55c \uc800\uc7a5\uc18c\uac00 \uaf2d \uc788\uc5b4\uc57c \ud55c\ub2e4\uba74 \ub2e4\uc591\ud55c \uc194\ub8e8\uc158\uc744 \ud1b5\ud574 \ub300\uccb4\ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \uc811\uadfc\ud574\uc57c \ud558\ub294 \uacbd\uc6b0 \ud30c\uc77c\uc774\ub77c\uba74 S3\uc640 \uac19\uc740 \uc624\ube0c\uc81d\ud2b8 \uc2a4\ud1a0\ub9ac\uc9c0, \ub370\uc774\ud130\ub77c\uba74 Database, \uba54\uc2dc\uc9c0 \ub77c\uba74 \uba54\uc2dc\uc9c0\ud050\ub97c \ub300\uccb4\uc81c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. Claim Lifecycle Binding: pvc\uc5d0 \ub9de\ub294 pv\uac00 controller\uc5d0 \uc758\ud574 binding\ub41c \uc0c1\ud0dc \uc774\uba70 \ub3d9\uc801 \ud504\ub85c\ube44\uc800\ub2dd\ub41c \uacbd\uc6b0 controller\ub294 \ud56d\uc0c1 pv\uac00 pvc\uc5d0 \ubc14\uc778\ub529\ub418\uc5b4 \uc788\ub2e4 Using: \ud074\ub7ec\uc2a4\ud130\ub294 \ud074\ub808\uc784\uc744 \uac80\uc0ac\ud558\uc5ec \ubc14\uc778\ub529\ub41c \ubcfc\ub968\uc744 \ucc3e\uace0 \ud574\ub2f9 \ubcfc\ub968\uc774 \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8\uac00 \ub418\uc5b4 pvc\uac00 \uc0ac\uc6a9\uc911\uc778 \uc0c1\ud0dc \uc774\uba70 pv\uc640 pvc\ub294 1:1\ub85c \ub9e4\ud551 \ub41c\ub2e4 Reclaiming: PV\uc758 \ubc18\ud658(\ud68c\uc218) \uc815\ucc45\uc740 persistentVolumeReclaimPolicy\uc73c\ub85c Retain, Delete, Recycle\uc911 \ud558\ub098\ub85c \uc9c0\uc815\ud560 \uc218 \uc788\uace0, \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131\ud560 \uacbd\uc6b0 StorageClass\uc5d0 \uc9c0\uc815\ub418\uc5b4 \uc788\ub294 ReclaimPolicy\uc5d0 \ub530\ub77c \uacb0\uc815\uc774 \ub41c\ub2e4","title":"3.2 Volumes"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#32-storage-volumes","text":"\uc0c1\ud0dc\uac00 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc548\uc815\uc801\uc774\uace0 \uc601\uad6c\uc801\uc73c\ub85c \uc6b4\uc601\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ud544\uc694\ud558\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \uc784\uc2dc(Ephemeral) \ub370\uc774\ud130 \ubcfc\ub968\ubd80\ud130 \uc601\uad6c\uc801\uc778(Persistent) \ub370\uc774\ud130 \ubcfc\ub968\uae4c\uc9c0 \ub2e4\uc591\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \uc635\uc158\uc744 \uc81c\uacf5\ud558\uba70 CSI(Container Storage Interface)\ub97c \ud1b5\ud574\uc11c \ub2e4\uc591\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \ud504\ub85c\ubc14\uc774\ub354 \uc194\ub8e8\uc158\uacfc \uc5f0\ub3d9\ub41c\ub2e4.","title":"3.2 Storage Volumes"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#ephemeral-volume","text":"\uc790\uccb4 \ud30c\uc77c\uc2dc\uc2a4\ud15c\uc744 \uc0ac\uc6a9\ud558\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4(Stateless \uc6cc\ud06c\ub85c\ub4dc \uc640 \uac19\uc774 \ubcc4\ub3c4\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \uc635\uc158\uc744 \uc8fc\uc9c0 \uc54a\uc740)\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uc784\uc2dc \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc0ac\uc6a9\ud558\uba70 \ucee8\ud14c\uc774\ub108\uac00 \uc7ac\uc2dc\uc791\uc774 \ub418\uba74 \uc2a4\ud1a0\ub9ac\uc9c0\uc758 \ub370\uc774\ud130\ub294 \uc720\uc2e4\uc774 \ub41c\ub2e4. \ub9cc\uc57d \ub370\uc774\ud130\uc758 \uc720\uc2e4\uc5d0 \uc601\ud5a5 \ubc1b\uc9c0 \uc54a\uc73c\uba74\uc11c Pod \uc7ac\uc2dc\uc791\uc774\ub098 \ud06c\ub798\uc26c\uc758 \uc601\ud5a5\uc740 \ubc1b\uc9c0 \uc54a\uace0 \uc9c1\uc811 \uc0ad\uc81c \ud558\uae30 \uc804\uae4c\uc9c0\ub9cc \uc720\uc9c0\ud558\uba74 \ub418\uba74 \ub418\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\ub77c\uba74 emptyDir \ubcfc\ub968 \ud0c0\uc785\uc744 \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4. \uc678\ubd80 \uc2a4\ud1a0\ub9ac\uc9c0\uc640 \uc5f0\ub3d9\ub418\uc5b4 \ubcfc\ub968\uc774 \uc0dd\uc131, \uad00\ub9ac \ub418\ub294 \uac83\uc774 \uc544\ub2cc \ub9ac\uc18c\uc2a4\uac00 \ub3d9\uc791 \uc911\uc778 \ub178\ub4dc\uc5d0\uc11c \uc0dd\uc131\ub41c \ubcfc\ub968\uc774\uba70 \ub178\ub4dc\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\ubfd0\ub9cc\uc774 \uc544\ub2cc \uba54\ubaa8\ub9ac\uc5d0 \ub9c8\uc6b4\ud2b8\ud558\uc5ec \uc0ac\uc6a9\ub3c4 \uac00\ub2a5\ud558\ub2e4. \uce90\uc2dc \uc601\uc5ed\uc774\ub098 \uc784\uc2dc\ub85c \ub370\uc774\ud130\ub97c \uc801\uc7ac\ud574\uc57c \ud558\ub294 \uacf5\uac04\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\uc5d0 \uc801\ud569\ud558\ub2e4. \ub178\ub4dc\uc5d0 \uc788\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc0ac\uc6a9\ud55c\ub2e4\ub294 \uad00\uc810\uc5d0\uc11c\ub294 HostPath \uc640 \ube44\uc2b7\ud558\ub098 \ub178\ub4dc\uc5d0 \uc788\ub294 \ud2b9\uc815 \ub370\uc774\ud130\uc5d0 \ubd88\uac00\ud53c\ud558\uac8c \uc811\uadfc\ud574\uc11c \uc77d\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \uc544\ub2c8\uace0\uc11c\ub294 emptyDir\uac00 \uc0ac\uc6a9\ub41c\ub2e4. volumeMounts: - mountPath: /data name: redis-data volumes: - name: redis-data emptyDir: {} Info \ub178\ub4dc\uc5d0\uc11c Pod\uc5d0 \ud560\ub2f9\ub41c emptyDir \ubcfc\ub968\uc758 \uc704\uce58\ub294 /var/lib/kubelet/pods/PODUID/volumes/kubernetes.io~empty-dir/VOLUMENAME \uc5d0\uc11c \ud655\uc778 \ud560 \uc218 \uc788\ub2e4","title":"Ephemeral Volume"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#persistant-volume-claim","text":"PersistentVolume(PV)\ub294 \uc601\uad6c\uc801\uc778 \uc2a4\ud1a0\ub9ac\uc9c0 \ub9ac\uc18c\uc2a4\uc774\uba70 \uad00\ub9ac\uc790\uc5d0 \uc758\ud574\uc11c \uc0dd\uc131\ub418\uac70\ub098 StorageClasses\ub97c \ud1b5\ud574 \ub3d9\uc801\uc73c\ub85c \ud504\ub85c\ube44\uc800\ub2dd\ub41c \ud074\ub7ec\uc2a4\ud130\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\uc774\ub2e4. PersistentVolumeClaim(PVC)\ub294 \ub9ac\uc18c\uc2a4\uc5d0 PV\ub97c \ubc14\uc778\ub529\ud558\ub294 \ud558\ub098\uc758 \uc694\uccad(claim)\uc774\uba70 \uc0ac\uc6a9\uc790\uac00 \uc6a9\ub7c9\uacfc \uae30\ub2a5 \uadf8\ub9ac\uace0 \uc811\uadfc\ubaa8\ub4dc \ub4f1\uc744 \uc815\uc758\ud55c\ub2e4. \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc\uc5d0\uc11c EKS, GKE\uc640 \uac19\uc740 \ub9e4\ub2c8\uc9c0\ub4dc \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ub294 PVC\ub9cc \uc0dd\uc131\ud558\ub354\ub77c\ub3c4 \ub3d9\uc801\uc73c\ub85c CSI Provisioner\uac00 \uc694\uccad\ud55c \uc2a4\ud329\uc5d0 \ub9de\ucdb0\uc11c PV\ub97c \ub3d9\uc801\uc73c\ub85c \ud504\ub85c\ube44\uc800\ub2dd \ud574\uc900\ub2e4. \uc815\uc801\uc73c\ub85c \ubbf8\ub9ac PV\ub97c \ub9cc\ub4e4\uc5b4 \ub450\uace0 PVC\uc5d0 \ubc14\uc778\ub529 \ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \uac83\ub3c4 \uac00\ub2a5\ud558\ub2e4. kind: PersistentVolumeClaim metadata: name: redis-pvc spec: accessModes: - ReadWriteOnce resources: requests: storage: 5Gi High-level Kubernetes archetypes integrated with CSI","title":"Persistant Volume &amp; Claim"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#access-modes-claim-lifecycle","text":"","title":"Access Modes &amp; Claim Lifecycle"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#access-modes","text":"PVC\uc5d0\ub294 \uc544\ub798\uc640 \uac19\uc740 AccessModes \uac00 \uc874\uc7ac \ud55c\ub2e4. AWS, Azure\uc640 \uac19\uc774 \ud558\ub098\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uc774 \ud558\ub098\uc758 \uc11c\ubc84 \ub178\ub4dc\uc5d0\ub9cc \ubd99\ub294 \uacbd\uc6b0\ub294 RWO\uc73c\ub85c\ub9cc \uc81c\ud55c\uc774 \ub418\uace0 GCP\ucc98\ub7fc \ud558\ub098\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uc774 \uc5ec\ub7ec \uc11c\ubc84 \ub178\ub4dc\uc5d0 \uc5f0\uacb0\ud560 \uc218 \uc788\ub294 \uacbd\uc6b0\ub294 RWO, ROX \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4. \uac01 \uc2a4\ud1a0\ub9ac\uc9c0 \ud504\ub85c\ubc14\uc774\ub354\ubcc4\ub85c \uc81c\uacf5\ud558\ub294 \ubc94\uc704\uac00 \ub2e4\ub974\ubbc0\ub85c \uacf5\uc2dd \ud398\uc774\uc9c0\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. ReadWriteOnce(RWO): \ub2e8\uc77c \ub178\ub4dc\uc5d0 \uc758\ud574 \uc77d\uae30 \uc4f0\uae30 \uad8c\ud55c\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\uc73c\uba70 \ub3d9\uc77c\ud55c \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589 \uc911\uc778 \uc5ec\ub7ec \ud30c\ub4dc\uac00 \ubcfc\ub968\uc5d0 \uc561\uc138\uc2a4\ud558\ub3c4\ub85d \ud5c8\uc6a9\ud560 \uc218 \uc788\ub2e4 ReadOnlyMany(ROX): \uc5ec\ub7ec \ub178\ub4dc\uc5d0\uc11c \uc77d\uae30 \uc804\uc6a9\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\ub2e4 ReadWriteMany(RWX): \uc5ec\ub7ec \ub178\ub4dc\uc5d0\uc11c \uc77d\uae30 \uc4f0\uae30\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\ub2e4 ReadWriteOncePod(RWOP): \ub2e8\uc77c \ud30c\ub4dc\uc5d0 \uc758\ud574 \uc77d\uae30 \uc4f0\uae30 \uad8c\ud55c\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\uc73c\uba70 \ud558\ub098\uc758 \ud30c\ub4dc\uc5d0\uc11c\ub9cc \uc77d\uace0 \uc4f0\ub3c4\ub85d \ud655\uc2e4\ud558\uac8c \uc81c\ud55c\uc744 \ub450\uace0 \uc2f6\uc740 \uacbd\uc6b0\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. CSI\uac00 \uc9c0\uc6d0\ud558\uace0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ubc84\uc804\uc774 1.22 \uc774\uc0c1\uc77c \ub54c\ub9cc \uac00\ub2a5\ud558\ub2e4 Info \ud074\ub77c\uc6b0\ub4dc \ub124\uc774\ud2f0\ube0c \ud658\uacbd\uc5d0\uc11c\ub294 RWO, RWOP\uac00 \uac00\uc7a5 \uc77c\ubc18\uc801\uc774\uba70 \uacf5\uc720\uac00 \ud544\uc694\ud55c \uc800\uc7a5\uc18c\uac00 \uaf2d \uc788\uc5b4\uc57c \ud55c\ub2e4\uba74 \ub2e4\uc591\ud55c \uc194\ub8e8\uc158\uc744 \ud1b5\ud574 \ub300\uccb4\ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \uc811\uadfc\ud574\uc57c \ud558\ub294 \uacbd\uc6b0 \ud30c\uc77c\uc774\ub77c\uba74 S3\uc640 \uac19\uc740 \uc624\ube0c\uc81d\ud2b8 \uc2a4\ud1a0\ub9ac\uc9c0, \ub370\uc774\ud130\ub77c\uba74 Database, \uba54\uc2dc\uc9c0 \ub77c\uba74 \uba54\uc2dc\uc9c0\ud050\ub97c \ub300\uccb4\uc81c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.","title":"Access Modes"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#claim-lifecycle","text":"Binding: pvc\uc5d0 \ub9de\ub294 pv\uac00 controller\uc5d0 \uc758\ud574 binding\ub41c \uc0c1\ud0dc \uc774\uba70 \ub3d9\uc801 \ud504\ub85c\ube44\uc800\ub2dd\ub41c \uacbd\uc6b0 controller\ub294 \ud56d\uc0c1 pv\uac00 pvc\uc5d0 \ubc14\uc778\ub529\ub418\uc5b4 \uc788\ub2e4 Using: \ud074\ub7ec\uc2a4\ud130\ub294 \ud074\ub808\uc784\uc744 \uac80\uc0ac\ud558\uc5ec \ubc14\uc778\ub529\ub41c \ubcfc\ub968\uc744 \ucc3e\uace0 \ud574\ub2f9 \ubcfc\ub968\uc774 \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8\uac00 \ub418\uc5b4 pvc\uac00 \uc0ac\uc6a9\uc911\uc778 \uc0c1\ud0dc \uc774\uba70 pv\uc640 pvc\ub294 1:1\ub85c \ub9e4\ud551 \ub41c\ub2e4 Reclaiming: PV\uc758 \ubc18\ud658(\ud68c\uc218) \uc815\ucc45\uc740 persistentVolumeReclaimPolicy\uc73c\ub85c Retain, Delete, Recycle\uc911 \ud558\ub098\ub85c \uc9c0\uc815\ud560 \uc218 \uc788\uace0, \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131\ud560 \uacbd\uc6b0 StorageClass\uc5d0 \uc9c0\uc815\ub418\uc5b4 \uc788\ub294 ReclaimPolicy\uc5d0 \ub530\ub77c \uacb0\uc815\uc774 \ub41c\ub2e4","title":"Claim Lifecycle"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/","text":"\ud578\uc988\uc628 3.1 HPA CPU Utilization\uc744 \uae30\ubc18\uc73c\ub85c Pod Autoscaling\uc744 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx Deployment\uc5d0 HPA\ub97c \uc124\uc815 \ud6c4 \ubd80\ud558\ub97c \uc77c\uc73c\ucf1c \uc790\ub3d9 \ud655\uc7a5\uc744 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c HPA\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Architecture Nginx \ub9ac\uc18c\uc2a4, HPA \uc124\uc815 \ubc0f \ubd80\ud558\ud14c\uc2a4\ud2b8\uc6a9 busybox \uad6c\uc131 1 Nginx \ub9ac\uc18c\uc2a4 \uad6c\uc131 Nginx deployment \ubc30\ud3ec \ubc0f DNS\ub85c \uc811\uadfc \ud560 \uc218 \uc788\ub3c4\ub85d service\ub97c \uad6c\uc131 Deployments \ubc0f Service \ubc30\ud3ec \uc694\uccad 100m \ubc0f \ucd5c\ub300 200m CPU \uc6a9\ub7c9\uc744 \uac00\uc9c4 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c Deployment\ub85c \ubc30\ud3ec \ubc0f service \uc124\uc815 nginx-deployment-service.yaml apiVersion: apps/v1 kind: Deployment metadata: labels: app: nginx name: nginx spec: replicas: 1 selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: containers: - image: nginx name: nginx ports: - containerPort: 80 resources: limits: cpu: 200m requests: cpu: 100m --- kind: Service apiVersion: v1 metadata: name: nginx-service spec: selector: app: nginx ports: - port: 80 kubectl apply -f nginx-deployment-service.yaml 2 Metric Server \uad6c\uc131 Metric server \ub294 \uae30\ubcf8\uc73c\ub85c \uc124\uce58\uac00 \ub418\uc5b4 \uc788\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 Pod \uba54\ud2b8\ub9ad \uc218\uc9d1\uc744 \uc704\ud55c metic server \uad6c\uc131 Info Public Cloud\uc758 Managed K8S\uc758 \uacbd\uc6b0\ub294 \uae30\ubcf8\uc73c\ub85c metric server\uac00 \uad6c\uc131\ub41c \uacbd\uc6b0\uac00 \uc788\uc73c\uba70 TOP \uc0ac\uc6a9\ub7c9 \uacb0\uacfc\uac00 \uc62c\ubc14\ub974\uac8c \ub098\uc628\ub2e4\uba74 \ud65c\uc131\ud654\uac00 \ub418\uc5b4 \uc788\ub294 \uc0c1\ud0dc\uc774\ub2e4. kubectl top pods -n kube-system \ub85c\uceec Kind \ud658\uacbd\uc5d0\uc11c\ub294 metric server deployment\uc5d0 \uc544\ub798\uc640 \uac19\uc774 TLS\ub97c bypass\ud558\uace0 kubelet\uc758 address type\uc744 Internal IP\ub85c \ucd94\uac00 \uc124\uc815\ud574\uc57c \ud55c\ub2e4. spec: containers: - args: ... - --kubelet-insecure-tls - --kubelet-preferred-address-types=InternalIP \uc544\ub798 \ud30c\uc77c\uc740 metric-server v0.6.1 \uc758 install components\uc5d0 \uc704\uc758 \ub450 argument\ub97c \ucd94\uac00 \uc644\ub8cc\ub41c \ubc84\uc804\uc774\ub2e4. kind-metrics-server.yaml kubectl apply -f kind-metrics-server.yaml 3 HPA \uc124\uc815 Nginx Deployment \ub9ac\uc18c\uc2a4\uc5d0 CPU averageUtilization \uae30\ubc18\uc73c\ub85c Autoscaling \uc124\uc815 nginx-hpa.yaml apiVersion: autoscaling/v2 kind: HorizontalPodAutoscaler metadata: name: nginx spec: maxReplicas: 5 metrics: - resource: name: cpu target: averageUtilization: 10 type: Utilization type: Resource minReplicas: 1 scaleTargetRef: apiVersion: apps/v1 kind: Deployment name: nginx kubectl apply -f nginx-hpa.yaml Tip \ub9cc\uc57d Imperative(\uba85\ub839\ud615)\ud558\uac8c nginx deployment\uc5d0 HPA\ub97c \uc801\uc6a9 \ud558\uace0\uc790 \ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uac00\ub2a5\ud558\ub2e4 bash kubectl autoscale deployment nginx --cpu-percent=10 --min=1 --max=5 HPA \uc124\uc815\uc774 \uc798 \uad6c\uc131 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \ud560 \uc218 \uc788\ub2e4. kubectl get hpa -w NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE nginx Deployment/nginx 0%/10% 1 5 1 16m Info HPA v2\ub85c custom metric\uc744 \uae30\uc900\uc73c\ub85c autoscaling\uc744 \uc218\ud589\ud558\uace0 \uc2f6\ub2e4\uba74 \ub2e4\uc74c \ud29c\ud1a0\ub9ac\uc5bc\uc744 \ucc38\uace0: autoscaling-on-multiple-metrics-and-custom-metrics 4 HPA \ub3d9\uc791 \uac80\uc99d \uad6c\uc131\ub41c HPA\ub97c \uac80\uc99d\ud558\uae30 \uc704\ud574 busybox\ub85c nginx\uc5d0 \ubd80\ud558\ub97c \uc77c\uc73c\ucf1c\uc11c \ub9ac\uc18c\uc2a4\uac00 \uc790\ub3d9\uc73c\ub85c \ud655\uc7a5\uc774 \ub418\ub294\uc9c0 \ud655\uc778\ud574 \ubcf8\ub2e4. 4.1 \ubd80\ud558 \uc0dd\uc131\uc6a9 Busybox \ubc30\ud3ec Busybox Pod\uc5d0\uc11c http request\ub97c \ubb34\uc81c\ud55c\uc73c\ub85c \ubc1c\uc0dd\uc2dc\ucf1c nginx\uc5d0 \ubd80\ud558\uac00 \uc77c\uc5b4\ub098\ub3c4\ub85d \ud55c\ub2e4. kubectl run -i --tty load-generator --rm --image=busybox:1.28 --restart=Never \\ -- /bin/sh -c \"while sleep 0.01; do wget -q -O- http://nginx-service; done\" Tip \uc9c0\uc18d\ud574\uc11c \ubd80\ud558\ub97c \uc8fc\uae30 \uc704\ud574 busybox \uc218\ud589\uc6a9 terminal \ucc3d\uc744 \ubcc4\ub3c4\ub85c \uc5f4\uc5b4\uc11c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub3c4\ub85d \ud55c\ub2e4. \ubd80\ud558\ub97c \uc911\ub2e8\ud558\uace0 \uc2f6\uc744 \ub54c\ub294 CTRL+C \ub97c \ud1b5\ud574\uc11c Pod\ub97c \uc885\ub8cc\ud558\uba74 \ub41c\ub2e4. 4.2 HPA \ub3d9\uc791 \ud655\uc778 Pod\uc758 CPU \uc0ac\uc6a9\ub7c9\uc774 10% \ub118\uc5b4\uac10\uc5d0 \ub530\ub77c\uc11c \uc815\uc0c1\uc801\uc73c\ub85c replica\uac00 \ub298\uc5b4\ub098\ub294\uc9c0 \ud655\uc778 kubectl get hpa -w NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE nginx Deployment/nginx 0%/10% 1 5 1 16m nginx Deployment/nginx 12%/10% 1 5 1 17m nginx Deployment/nginx 22%/10% 1 5 2 17m nginx Deployment/nginx 13%/10% 1 5 3 17m nginx Deployment/nginx 8%/10% 1 5 3 17m nginx Deployment/nginx 3%/10% 1 5 3 18m nginx Deployment/nginx 0%/10% 1 5 3 19m Clean Up \ubc30\ud3ec\ud55c StatefulSet \ub9ac\uc18c\uc2a4 \uc0ad\uc81c kubectl delete -f nginx-hpa.yaml kubectl delete -f nginx-deployment-service.yaml kind cluster \uc0ad\uc81c kind delete cluster","title":"\ud578\uc988\uc628 3.1 Horizontal Pod Autoscaling"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#31-hpa","text":"CPU Utilization\uc744 \uae30\ubc18\uc73c\ub85c Pod Autoscaling\uc744 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx Deployment\uc5d0 HPA\ub97c \uc124\uc815 \ud6c4 \ubd80\ud558\ub97c \uc77c\uc73c\ucf1c \uc790\ub3d9 \ud655\uc7a5\uc744 \ud574\ubcf4\ub294 \uc2e4\uc2b5","title":"\ud578\uc988\uc628 3.1 HPA"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c HPA\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#architecture","text":"Nginx \ub9ac\uc18c\uc2a4, HPA \uc124\uc815 \ubc0f \ubd80\ud558\ud14c\uc2a4\ud2b8\uc6a9 busybox \uad6c\uc131","title":"Architecture"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#1-nginx","text":"Nginx deployment \ubc30\ud3ec \ubc0f DNS\ub85c \uc811\uadfc \ud560 \uc218 \uc788\ub3c4\ub85d service\ub97c \uad6c\uc131 Deployments \ubc0f Service \ubc30\ud3ec \uc694\uccad 100m \ubc0f \ucd5c\ub300 200m CPU \uc6a9\ub7c9\uc744 \uac00\uc9c4 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c Deployment\ub85c \ubc30\ud3ec \ubc0f service \uc124\uc815 nginx-deployment-service.yaml apiVersion: apps/v1 kind: Deployment metadata: labels: app: nginx name: nginx spec: replicas: 1 selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: containers: - image: nginx name: nginx ports: - containerPort: 80 resources: limits: cpu: 200m requests: cpu: 100m --- kind: Service apiVersion: v1 metadata: name: nginx-service spec: selector: app: nginx ports: - port: 80 kubectl apply -f nginx-deployment-service.yaml","title":"1 Nginx \ub9ac\uc18c\uc2a4 \uad6c\uc131"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#2-metric-server","text":"Metric server \ub294 \uae30\ubcf8\uc73c\ub85c \uc124\uce58\uac00 \ub418\uc5b4 \uc788\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 Pod \uba54\ud2b8\ub9ad \uc218\uc9d1\uc744 \uc704\ud55c metic server \uad6c\uc131 Info Public Cloud\uc758 Managed K8S\uc758 \uacbd\uc6b0\ub294 \uae30\ubcf8\uc73c\ub85c metric server\uac00 \uad6c\uc131\ub41c \uacbd\uc6b0\uac00 \uc788\uc73c\uba70 TOP \uc0ac\uc6a9\ub7c9 \uacb0\uacfc\uac00 \uc62c\ubc14\ub974\uac8c \ub098\uc628\ub2e4\uba74 \ud65c\uc131\ud654\uac00 \ub418\uc5b4 \uc788\ub294 \uc0c1\ud0dc\uc774\ub2e4. kubectl top pods -n kube-system \ub85c\uceec Kind \ud658\uacbd\uc5d0\uc11c\ub294 metric server deployment\uc5d0 \uc544\ub798\uc640 \uac19\uc774 TLS\ub97c bypass\ud558\uace0 kubelet\uc758 address type\uc744 Internal IP\ub85c \ucd94\uac00 \uc124\uc815\ud574\uc57c \ud55c\ub2e4. spec: containers: - args: ... - --kubelet-insecure-tls - --kubelet-preferred-address-types=InternalIP \uc544\ub798 \ud30c\uc77c\uc740 metric-server v0.6.1 \uc758 install components\uc5d0 \uc704\uc758 \ub450 argument\ub97c \ucd94\uac00 \uc644\ub8cc\ub41c \ubc84\uc804\uc774\ub2e4. kind-metrics-server.yaml kubectl apply -f kind-metrics-server.yaml","title":"2 Metric Server \uad6c\uc131"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#3-hpa","text":"Nginx Deployment \ub9ac\uc18c\uc2a4\uc5d0 CPU averageUtilization \uae30\ubc18\uc73c\ub85c Autoscaling \uc124\uc815 nginx-hpa.yaml apiVersion: autoscaling/v2 kind: HorizontalPodAutoscaler metadata: name: nginx spec: maxReplicas: 5 metrics: - resource: name: cpu target: averageUtilization: 10 type: Utilization type: Resource minReplicas: 1 scaleTargetRef: apiVersion: apps/v1 kind: Deployment name: nginx kubectl apply -f nginx-hpa.yaml Tip \ub9cc\uc57d Imperative(\uba85\ub839\ud615)\ud558\uac8c nginx deployment\uc5d0 HPA\ub97c \uc801\uc6a9 \ud558\uace0\uc790 \ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uac00\ub2a5\ud558\ub2e4 bash kubectl autoscale deployment nginx --cpu-percent=10 --min=1 --max=5 HPA \uc124\uc815\uc774 \uc798 \uad6c\uc131 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \ud560 \uc218 \uc788\ub2e4. kubectl get hpa -w NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE nginx Deployment/nginx 0%/10% 1 5 1 16m Info HPA v2\ub85c custom metric\uc744 \uae30\uc900\uc73c\ub85c autoscaling\uc744 \uc218\ud589\ud558\uace0 \uc2f6\ub2e4\uba74 \ub2e4\uc74c \ud29c\ud1a0\ub9ac\uc5bc\uc744 \ucc38\uace0: autoscaling-on-multiple-metrics-and-custom-metrics","title":"3 HPA \uc124\uc815"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#4-hpa","text":"\uad6c\uc131\ub41c HPA\ub97c \uac80\uc99d\ud558\uae30 \uc704\ud574 busybox\ub85c nginx\uc5d0 \ubd80\ud558\ub97c \uc77c\uc73c\ucf1c\uc11c \ub9ac\uc18c\uc2a4\uac00 \uc790\ub3d9\uc73c\ub85c \ud655\uc7a5\uc774 \ub418\ub294\uc9c0 \ud655\uc778\ud574 \ubcf8\ub2e4.","title":"4 HPA \ub3d9\uc791 \uac80\uc99d"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#41-busybox","text":"Busybox Pod\uc5d0\uc11c http request\ub97c \ubb34\uc81c\ud55c\uc73c\ub85c \ubc1c\uc0dd\uc2dc\ucf1c nginx\uc5d0 \ubd80\ud558\uac00 \uc77c\uc5b4\ub098\ub3c4\ub85d \ud55c\ub2e4. kubectl run -i --tty load-generator --rm --image=busybox:1.28 --restart=Never \\ -- /bin/sh -c \"while sleep 0.01; do wget -q -O- http://nginx-service; done\" Tip \uc9c0\uc18d\ud574\uc11c \ubd80\ud558\ub97c \uc8fc\uae30 \uc704\ud574 busybox \uc218\ud589\uc6a9 terminal \ucc3d\uc744 \ubcc4\ub3c4\ub85c \uc5f4\uc5b4\uc11c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub3c4\ub85d \ud55c\ub2e4. \ubd80\ud558\ub97c \uc911\ub2e8\ud558\uace0 \uc2f6\uc744 \ub54c\ub294 CTRL+C \ub97c \ud1b5\ud574\uc11c Pod\ub97c \uc885\ub8cc\ud558\uba74 \ub41c\ub2e4.","title":"4.1 \ubd80\ud558 \uc0dd\uc131\uc6a9 Busybox \ubc30\ud3ec"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#42-hpa","text":"Pod\uc758 CPU \uc0ac\uc6a9\ub7c9\uc774 10% \ub118\uc5b4\uac10\uc5d0 \ub530\ub77c\uc11c \uc815\uc0c1\uc801\uc73c\ub85c replica\uac00 \ub298\uc5b4\ub098\ub294\uc9c0 \ud655\uc778 kubectl get hpa -w NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE nginx Deployment/nginx 0%/10% 1 5 1 16m nginx Deployment/nginx 12%/10% 1 5 1 17m nginx Deployment/nginx 22%/10% 1 5 2 17m nginx Deployment/nginx 13%/10% 1 5 3 17m nginx Deployment/nginx 8%/10% 1 5 3 17m nginx Deployment/nginx 3%/10% 1 5 3 18m nginx Deployment/nginx 0%/10% 1 5 3 19m","title":"4.2 HPA \ub3d9\uc791 \ud655\uc778"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#clean-up","text":"\ubc30\ud3ec\ud55c StatefulSet \ub9ac\uc18c\uc2a4 \uc0ad\uc81c kubectl delete -f nginx-hpa.yaml kubectl delete -f nginx-deployment-service.yaml kind cluster \uc0ad\uc81c kind delete cluster","title":"Clean Up"},{"location":"hello-kubernetes/section03/handson/statefulset/","text":"\ud578\uc988\uc628 3.3 StatefulSet StatefulSet\ub85c Mariadb Cluster\ub97c \uad6c\uc131 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Mariadb \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131\uc744 \uc704\ud574 Persistent Volume\uc744 \ud3ec\ud568\ud558\uc5ec StatefulSet\ub85c \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 Example from : https://mariadb.org/mariadb-k8s-how-to-replicate-mariadb-in-k8s \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c StatefulSet\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Demo \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0dd\uc131: kubectl create ns mariadb Architecture StatefulSet, Service, Persistent Volume\uc744 \ud1b5\ud574 Mariadb Cluster \uad6c\uc131 1 ConfigMap, Service, Secret \uad6c\uc131 Mariadb Cluster\uc758 Primary, Secondary \uc124\uc815 \ud30c\uc77c\uc5d0 \ub300\ud574 ConfigMap\uc73c\ub85c \uad6c\uc131 \ubc0f Mariadb Pod\uc5d0 DNS\ub85c \ud1b5\uc2e0\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ud558\uae30 \uc704\ud574 Headless Service\ub97c \uad6c\uc131 1.1 ConfigMap \uc124\uc815 mariadb-replica-sts.yaml apiVersion: v1 kind: ConfigMap metadata: namespace: mariadb name: mariadb-configmap data: primary.cnf: | [mariadb] log-bin # enable binary logging log-basename=my-mariadb # used to be independent of hostname changes (otherwise is in datadir/mysql) replica.cnf: | [mariadb] log-basename=my-mariadb # used to be independent of hostname changes (otherwise is in datadir/mysql) primary.sql: | CREATE USER 'repluser'@'%' IDENTIFIED BY 'replsecret'; GRANT REPLICATION REPLICA ON *.* TO 'repluser'@'%'; CREATE DATABASE primary_db; secondary.sql: | # We have to know name of sts (`mariadb`) and # service `mariadb-service` in advance as an FQDN. # No need to use master_port CHANGE MASTER TO MASTER_HOST='mariadb-0.mariadb-service.mariadb.svc.cluster.local', MASTER_USER='repluser', MASTER_PASSWORD='replsecret', MASTER_CONNECT_RETRY=10; Info \ub9cc\uc57d namespace\ub098 service \uc774\ub984 \ub4f1\uc744 \ubcf8\uc778\uc758 \ud658\uacbd\uc5d0 \ub9de\ucdb0\uc11c \ubc30\ud3ec\ud558\ub294 \uacbd\uc6b0 MASTER_HOST \uac12\uc744 \ubcc0\uacbd\ud574\uc57c \ud55c\ub2e4 mariadb-0.<headless service name>.<namespace name>.svc.cluster.local 1.2 Headless Service \uc124\uc815 DNS\ub85c Primary, Secondary\uac04 \ud1b5\uc2e0\uc744 \uc704\ud55c Headless Serivce \uc124\uc815 mariadb-replica-sts.yaml apiVersion: v1 kind: Service metadata: namespace: mariadb name: mariadb-service labels: app: mariadb spec: ports: - port: 3306 name: mariadb-port clusterIP: None selector: app: mariadb 1.3 Secret \uc124\uc815 Secret\uc5d0 DB root password\ub97c \uc800\uc7a5 Info \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c Secret\uc740 \ud14d\uc2a4\ud2b8\ub97c base64\ub85c \uc778\ucf54\ub529\ud558\ub294 \uac83\uc774\uba70 \uc554\ud638\ud654(encryption)\ub294 \uc544\ub2c8\uae30 \ub54c\ubb38\uc5d0 Hashicorp Vault\ub098 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Secret Manager \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ubcf4\uc548 \uce21\uba74\uc5d0\uc11c \ub6f0\uc5b4\ub098\ub2e4. mariadb-replica-sts.yaml apiVersion: v1 kind: Secret metadata: namespace: mariadb name: mariadb-secret type: Opaque data: mariadb-root-password: c2VjcmV0 # echo -n 'secret'|base64 1.4 ConfigMap, Service, Secret \uc124\uc815 ConfigMap, Service, Secret\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec \ub418\uc5c8\ub294\uc9c0 \ud655\uc778 kubectl get svc,configmap,secret NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/mariadb-service ClusterIP None <none> 3306/TCP 24s NAME DATA AGE configmap/kube-root-ca.crt 1 4d14h configmap/mariadb-configmap 4 24s NAME TYPE DATA AGE secret/mariadb-secret Opaque 1 24s 2 StatefulSet \uad6c\uc131 Mariadb Cluster\uc758 \uc2e4\uc81c \uc6cc\ud06c\ub85c\ub4dc\uc778 MariaDB\ub97c StatefulSet\uc73c\ub85c \ubc30\ud3ec 2.1 StatefulSet \uc124\uc815 \uc608\uc81c\uc758 MariaDB Pod\ub294 initContainers\uc640 Containers\ub85c \uad6c\uc131\uc774 \ub418\uc5b4\uc838 \uc788\uc73c\uba70 initContainers(name: init-mariadb)\ub97c \ud1b5\ud574\uc11c \uc124\uc815\uac12(configmap)\uc744 /etc/mysql/conf.d/ \ubcfc\ub968\uc5d0 \ucd08\uae30 \uad6c\uc131 \ud558\ub294 \uc791\uc5c5\uc744 \uc9c4\ud589 \ud558\uc5ec \uc2e4\uc81c \uc6cc\ud06c\ub85c\ub4dc\ub294 MariaDB containers(name: mariadb)\uc5d0\uc11c \uc11c\ube44\uc2a4 \ub41c\ub2e4 mariadb-replica-sts.yaml apiVersion: apps/v1 kind: StatefulSet metadata: namespace: mariadb name: mariadb spec: serviceName: \"mariadb-service\" replicas: 3 selector: matchLabels: app: mariadb template: metadata: labels: app: mariadb spec: initContainers: - name: init-mariadb image: mariadb imagePullPolicy: Always command: - bash - \"-c\" - | set -ex echo 'Starting init-mariadb'; # Check config map to directory that already exists # (but must be used as a volume for main container) ls /mnt/config-map # Statefulset has sticky identity, number should be last [[ `hostname` =~ -([0-9]+)$ ]] || exit 1 ordinal=${BASH_REMATCH[1]} # Copy appropriate conf.d files from config-map to # mariadb-config volume (emptyDir) depending on pod number if [[ $ordinal -eq 0 ]]; then # This file holds SQL for connecting to primary cp /mnt/config-map/primary.cnf /etc/mysql/conf.d/server-id.cnf # Create the users needed for replication on primary on a volume # initdb (emptyDir) cp /mnt/config-map/primary.sql /docker-entrypoint-initdb.d else # This file holds SQL for connecting to secondary cp /mnt/config-map/replica.cnf /etc/mysql/conf.d/server-id.cnf # On replicas use secondary configuration on initdb volume cp /mnt/config-map/secondary.sql /docker-entrypoint-initdb.d fi # Add an offset to avoid reserved server-id=0 value. echo server-id=$((3000 + $ordinal)) >> etc/mysql/conf.d/server-id.cnf ls /etc/mysql/conf.d/ cat /etc/mysql/conf.d/server-id.cnf volumeMounts: - name: mariadb-config-map mountPath: /mnt/config-map - name: mariadb-config mountPath: /etc/mysql/conf.d/ - name: initdb mountPath: /docker-entrypoint-initdb.d restartPolicy: Always containers: - name: mariadb image: mariadb ports: - containerPort: 3306 name: mariadb-port env: # Using Secrets - name: MARIADB_ROOT_PASSWORD valueFrom: secretKeyRef: name: mariadb-secret key: mariadb-root-password - name: MYSQL_INITDB_SKIP_TZINFO value: \"1\" # Mount volume from persistent volume claim volumeMounts: - name: datadir mountPath: /var/lib/mysql/ - name: mariadb-config mountPath: /etc/mysql/conf.d/ - name: initdb mountPath: /docker-entrypoint-initdb.d volumes: - name: mariadb-config-map configMap: name: mariadb-configmap #defaultMode: 0544 - name: mariadb-config emptyDir: {} - name: initdb emptyDir: {} volumeClaimTemplates: - metadata: name: datadir spec: accessModes: [ \"ReadWriteOnce\" ] resources: requests: storage: 300M kubectl apply -f mariadb-replica-sts.yaml 2.2 \ubc30\ud3ec\ub41c Pod \ubc0f Volume \ud655\uc778 Pod \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c 3\ub300(replicas: 3)\uac00 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778 kubectl get pods -l app=mariadb NAME READY STATUS RESTARTS AGE mariadb-0 1/1 Running 0 11s mariadb-1 1/1 Running 0 11s mariadb-2 1/1 Running 0 11s Info \uae30\ubcf8\uc73c\ub85c Dynamic Provisioner\uac00 \uad6c\uc131\uc774 \ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c PV\ub294 PVC \uc694\uccad\uc2dc \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131 StatefulSet \ubc30\ud3ec\uc2dc PV \uc0dd\uc131 \ubc0f PVC\uc5d0 Bound \ub41c \uac83\uc744 \ud655\uc778 kubectl get pv,pvc NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE persistentvolume/pvc-0220af2d-8020-4a3b-96b5-6195aa3945b0 300M RWO Delete Bound mariadb/datadir-mariadb-0 standard 20s persistentvolume/pvc-3c897244-b250-4a5e-9dd3-324da13696aa 300M RWO Delete Bound mariadb/datadir-mariadb-1 standard 20s persistentvolume/pvc-951c940c-5d9b-4f46-afe3-3ee94435d491 300M RWO Delete Bound mariadb/datadir-mariadb-2 standard 20s NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE persistentvolumeclaim/datadir-mariadb-0 Bound pvc-0220af2d-8020-4a3b-96b5-6195aa3945b0 300M RWO standard 20s persistentvolumeclaim/datadir-mariadb-1 Bound pvc-3c897244-b250-4a5e-9dd3-324da13696aa 300M RWO standard 20s persistentvolumeclaim/datadir-mariadb-2 Bound pvc-951c940c-5d9b-4f46-afe3-3ee94435d491 300M RWO standard 20s 2.3 MariaDB Cluster \uad6c\uc131 \ud655\uc778 \ubc30\ud3ec\ub41c MariaDB Cluster\uac00 \uc815\uc0c1\uc801\uc73c\ub85c Primary/Secondary \uad6c\uc131\uc744 \uac00\uc9c0\uace0 \uc788\ub294\uc9c0 \uac80\uc99d Primary DB\uc5d0 Dummy Data \ucd94\uac00 PrimaryDB(mariadb-0) Pod\uc5d0 shell \uc811\uadfc Info secret\uc5d0\uc11c mariadb-root-password \ubc14\uafbc \uacbd\uc6b0 \ud574\ub2f9 password\ub85c \ubcc0\uacbd \ud558\uc5ec \uc811\uadfc kubectl exec -it mariadb-0 -- mariadb -uroot -psecret Defaulted container \"mariadb\" out of: mariadb, init-mariadb (init) Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 8 ..... # Secondary\uc5d0\uc11c repluser\ub85c Binary log dump\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c0\uace0 \uc788\ub294\uc9c0 \ud655\uc778 MariaDB [primary_db]> SHOW PROCESSLIST; +----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+ | Id | User | Host | db | Command | Time | State | Info | Progress | +----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+ | 4 | repluser | 10.244.1.22:44876 | NULL | Binlog Dump | 60552 | Master has sent all binlog to slave; waiting for more updates | NULL | 0.000 | | 5 | repluser | 10.244.3.25:53204 | NULL | Binlog Dump | 60544 | Master has sent all binlog to slave; waiting for more updates | NULL | 0.000 | | 8 | root | localhost | primary_db | Query | 0 | starting | SHOW PROCESSLIST | 0.000 | +----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+ 3 rows in set (0.001 sec) MariaDB [(none)]> SHOW DATABASES; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | | primary_db | | sys | +--------------------+ 5 rows in set (0.004 sec) MariaDB [(none)]> USE primary_db; Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed MariaDB [primary_db]> # Dummy Data \ucd94\uac00\ub97c \uc704\ud55c Table \uc0dd\uc131 MariaDB [primary_db]> CREATE TABLE test ( -> id INTEGER NOT NULL AUTO_INCREMENT, -> content VARCHAR(255) NOT NULL, -> PRIMARY KEY (id) -> ) ; Query OK, 0 rows affected (0.013 sec) # Dummy Data \ucd94\uac00 MariaDB [primary_db]> INSERT INTO `test` ( -> `content`) -> values -> ('first'); Query OK, 1 row affected (0.007 sec) MariaDB [primary_db]> SELECT * FROM test; +----+---------+ | id | content | +----+---------+ | 1 | first | +----+---------+ 1 row in set (0.001 sec) dummy table, data \uc148\ud50c \ucffc\ub9ac: init-table-data.txt Secondary DB\uc5d0\uc11c Data \ud655\uc778 \ub450\uac1c\uc758 Secondary(mariadb-1 \ud639\uc740 2) \uc911 \ud558\ub098\uc5d0 shell\ub85c \uc811\uadfc kubectl exec -it mariadb-2 -- mariadb -uroot -psecret Defaulted container \"mariadb\" out of: mariadb, init-mariadb (init) Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 6 Server version: 10.9.2-MariaDB-1:10.9.2+maria~ubu2204 mariadb.org binary distribution Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement. MariaDB [(none)]> # Secondary\uac00 \uc815\uc0c1\uc801\uc73c\ub85c Primary\uc758 \ub370\uc774\ud130\ub97c Dumping \ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778 MariaDB [(none)]> SHOW SLAVE STATUS \\G; *************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: mariadb-0.mariadb-service.mariadb.svc.cluster.local Master_User: repluser Master_Port: 3306 Connect_Retry: 10 Master_Log_File: my-mariadb-bin.000002 Read_Master_Log_Pos: 2492 Relay_Log_File: my-mariadb-relay-bin.000004 Relay_Log_Pos: 2796 Relay_Master_Log_File: my-mariadb-bin.000002 Slave_IO_Running: Yes ... Parallel_Mode: optimistic SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates Slave_DDL_Groups: 7 Slave_Non_Transactional_Groups: 0 Slave_Transactional_Groups: 5 1 row in set (0.001 sec) ERROR: No query specified MariaDB [(none)]> USE primary_db Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed # Dummy Data \ud655\uc778 MariaDB [primary_db]> SELECT * FROM test; +----+---------+ | id | content | +----+---------+ | 1 | first | +----+---------+ 1 row in set (0.001 sec) 2.4 MariaDB Cluster \uc2a4\ucf00\uc77c \uc870\uc815 replicaset\uc758 \uc124\uc815\uc744 \uc5c5\ub370\uc774\ud2b8 \ud558\uba70 cluster\uc758 \uc2a4\ucf00\uc77c \uc870\uc808 \ubc0f \uc811\uadfc \ud655\uc778 kubectl get pods -l app=mariadb NAME READY STATUS RESTARTS AGE mariadb-0 1/1 Running 0 24h mariadb-1 1/1 Running 0 24h mariadb-2 1/1 Running 0 24h #replica \uac1c\uc218\ub97c 4\uac1c\ub85c \uc870\uc815(+1) kubectl scale sts mariadb --replicas=4 statefulset.apps/mariadb scaled kubectl get pods -l app=mariadb NAME READY STATUS RESTARTS AGE mariadb-0 1/1 Running 0 2h mariadb-1 1/1 Running 0 2h mariadb-2 1/1 Running 0 2h mariadb-3 0/1 PodInitializing 0 8s \ucd94\uac00 \ubc30\ud3ec\ub41c secondary db( mariadb-3 )\ub3c4 \uc815\uc0c1\uc801\uc73c\ub85c primary\ub97c \ubc14\ub77c\ubcf4\uace0 \uc788\ub294\uc9c0 \ud655\uc778 kubectl exec -it mariadb-3 -- mariadb -uroot -psecret Defaulted container \"mariadb\" out of: mariadb, init-mariadb (init) Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 6 ... Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement. MariaDB [(none)]> SHOW SLAVE STATUS \\G; *************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: mariadb-0.mariadb-service.mariadb.svc.cluster.local Master_User: repluser Master_Port: 3306 Connect_Retry: 10 Master_Log_File: my-mariadb-bin.000002 ... Parallel_Mode: optimistic SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates Slave_DDL_Groups: 7 Slave_Non_Transactional_Groups: 0 Slave_Transactional_Groups: 5 1 row in set (0.000 sec) ERROR: No query specified Clean Up \ubc30\ud3ec\ud55c StatefulSet \ub9ac\uc18c\uc2a4 \uc0ad\uc81c kubectl delete -f mariadb-replica-sts.yaml Warn StatefulSet\uc744 \uc0ad\uc81c\ub098 \uc2a4\ucf00\uc77c\ub2e4\uc6b4\ud574\ub3c4 \ub9e4\ud551\uc774 \ub418\uc5b4 \uc788\ub294 \ubcfc\ub968\uc740 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub418\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 PV, PVC\ub294 \uc218\ub3d9\uc73c\ub85c \uc0ad\uc81c kind cluster \uc0ad\uc81c kind delete cluster","title":"\ud578\uc988\uc628 3.3 StatefulSet"},{"location":"hello-kubernetes/section03/handson/statefulset/#33-statefulset","text":"StatefulSet\ub85c Mariadb Cluster\ub97c \uad6c\uc131 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Mariadb \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131\uc744 \uc704\ud574 Persistent Volume\uc744 \ud3ec\ud568\ud558\uc5ec StatefulSet\ub85c \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 Example from : https://mariadb.org/mariadb-k8s-how-to-replicate-mariadb-in-k8s","title":"\ud578\uc988\uc628 3.3 StatefulSet"},{"location":"hello-kubernetes/section03/handson/statefulset/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c StatefulSet\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Demo \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0dd\uc131: kubectl create ns mariadb","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section03/handson/statefulset/#architecture","text":"StatefulSet, Service, Persistent Volume\uc744 \ud1b5\ud574 Mariadb Cluster \uad6c\uc131","title":"Architecture"},{"location":"hello-kubernetes/section03/handson/statefulset/#1-configmap-service-secret","text":"Mariadb Cluster\uc758 Primary, Secondary \uc124\uc815 \ud30c\uc77c\uc5d0 \ub300\ud574 ConfigMap\uc73c\ub85c \uad6c\uc131 \ubc0f Mariadb Pod\uc5d0 DNS\ub85c \ud1b5\uc2e0\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ud558\uae30 \uc704\ud574 Headless Service\ub97c \uad6c\uc131","title":"1 ConfigMap, Service, Secret \uad6c\uc131"},{"location":"hello-kubernetes/section03/handson/statefulset/#11-configmap","text":"mariadb-replica-sts.yaml apiVersion: v1 kind: ConfigMap metadata: namespace: mariadb name: mariadb-configmap data: primary.cnf: | [mariadb] log-bin # enable binary logging log-basename=my-mariadb # used to be independent of hostname changes (otherwise is in datadir/mysql) replica.cnf: | [mariadb] log-basename=my-mariadb # used to be independent of hostname changes (otherwise is in datadir/mysql) primary.sql: | CREATE USER 'repluser'@'%' IDENTIFIED BY 'replsecret'; GRANT REPLICATION REPLICA ON *.* TO 'repluser'@'%'; CREATE DATABASE primary_db; secondary.sql: | # We have to know name of sts (`mariadb`) and # service `mariadb-service` in advance as an FQDN. # No need to use master_port CHANGE MASTER TO MASTER_HOST='mariadb-0.mariadb-service.mariadb.svc.cluster.local', MASTER_USER='repluser', MASTER_PASSWORD='replsecret', MASTER_CONNECT_RETRY=10; Info \ub9cc\uc57d namespace\ub098 service \uc774\ub984 \ub4f1\uc744 \ubcf8\uc778\uc758 \ud658\uacbd\uc5d0 \ub9de\ucdb0\uc11c \ubc30\ud3ec\ud558\ub294 \uacbd\uc6b0 MASTER_HOST \uac12\uc744 \ubcc0\uacbd\ud574\uc57c \ud55c\ub2e4 mariadb-0.<headless service name>.<namespace name>.svc.cluster.local","title":"1.1 ConfigMap \uc124\uc815"},{"location":"hello-kubernetes/section03/handson/statefulset/#12-headless-service","text":"DNS\ub85c Primary, Secondary\uac04 \ud1b5\uc2e0\uc744 \uc704\ud55c Headless Serivce \uc124\uc815 mariadb-replica-sts.yaml apiVersion: v1 kind: Service metadata: namespace: mariadb name: mariadb-service labels: app: mariadb spec: ports: - port: 3306 name: mariadb-port clusterIP: None selector: app: mariadb","title":"1.2 Headless Service \uc124\uc815"},{"location":"hello-kubernetes/section03/handson/statefulset/#13-secret","text":"Secret\uc5d0 DB root password\ub97c \uc800\uc7a5 Info \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c Secret\uc740 \ud14d\uc2a4\ud2b8\ub97c base64\ub85c \uc778\ucf54\ub529\ud558\ub294 \uac83\uc774\uba70 \uc554\ud638\ud654(encryption)\ub294 \uc544\ub2c8\uae30 \ub54c\ubb38\uc5d0 Hashicorp Vault\ub098 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Secret Manager \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ubcf4\uc548 \uce21\uba74\uc5d0\uc11c \ub6f0\uc5b4\ub098\ub2e4. mariadb-replica-sts.yaml apiVersion: v1 kind: Secret metadata: namespace: mariadb name: mariadb-secret type: Opaque data: mariadb-root-password: c2VjcmV0 # echo -n 'secret'|base64","title":"1.3 Secret \uc124\uc815"},{"location":"hello-kubernetes/section03/handson/statefulset/#14-configmap-service-secret","text":"ConfigMap, Service, Secret\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec \ub418\uc5c8\ub294\uc9c0 \ud655\uc778 kubectl get svc,configmap,secret NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/mariadb-service ClusterIP None <none> 3306/TCP 24s NAME DATA AGE configmap/kube-root-ca.crt 1 4d14h configmap/mariadb-configmap 4 24s NAME TYPE DATA AGE secret/mariadb-secret Opaque 1 24s","title":"1.4 ConfigMap, Service, Secret \uc124\uc815"},{"location":"hello-kubernetes/section03/handson/statefulset/#2-statefulset","text":"Mariadb Cluster\uc758 \uc2e4\uc81c \uc6cc\ud06c\ub85c\ub4dc\uc778 MariaDB\ub97c StatefulSet\uc73c\ub85c \ubc30\ud3ec","title":"2 StatefulSet \uad6c\uc131"},{"location":"hello-kubernetes/section03/handson/statefulset/#21-statefulset","text":"\uc608\uc81c\uc758 MariaDB Pod\ub294 initContainers\uc640 Containers\ub85c \uad6c\uc131\uc774 \ub418\uc5b4\uc838 \uc788\uc73c\uba70 initContainers(name: init-mariadb)\ub97c \ud1b5\ud574\uc11c \uc124\uc815\uac12(configmap)\uc744 /etc/mysql/conf.d/ \ubcfc\ub968\uc5d0 \ucd08\uae30 \uad6c\uc131 \ud558\ub294 \uc791\uc5c5\uc744 \uc9c4\ud589 \ud558\uc5ec \uc2e4\uc81c \uc6cc\ud06c\ub85c\ub4dc\ub294 MariaDB containers(name: mariadb)\uc5d0\uc11c \uc11c\ube44\uc2a4 \ub41c\ub2e4 mariadb-replica-sts.yaml apiVersion: apps/v1 kind: StatefulSet metadata: namespace: mariadb name: mariadb spec: serviceName: \"mariadb-service\" replicas: 3 selector: matchLabels: app: mariadb template: metadata: labels: app: mariadb spec: initContainers: - name: init-mariadb image: mariadb imagePullPolicy: Always command: - bash - \"-c\" - | set -ex echo 'Starting init-mariadb'; # Check config map to directory that already exists # (but must be used as a volume for main container) ls /mnt/config-map # Statefulset has sticky identity, number should be last [[ `hostname` =~ -([0-9]+)$ ]] || exit 1 ordinal=${BASH_REMATCH[1]} # Copy appropriate conf.d files from config-map to # mariadb-config volume (emptyDir) depending on pod number if [[ $ordinal -eq 0 ]]; then # This file holds SQL for connecting to primary cp /mnt/config-map/primary.cnf /etc/mysql/conf.d/server-id.cnf # Create the users needed for replication on primary on a volume # initdb (emptyDir) cp /mnt/config-map/primary.sql /docker-entrypoint-initdb.d else # This file holds SQL for connecting to secondary cp /mnt/config-map/replica.cnf /etc/mysql/conf.d/server-id.cnf # On replicas use secondary configuration on initdb volume cp /mnt/config-map/secondary.sql /docker-entrypoint-initdb.d fi # Add an offset to avoid reserved server-id=0 value. echo server-id=$((3000 + $ordinal)) >> etc/mysql/conf.d/server-id.cnf ls /etc/mysql/conf.d/ cat /etc/mysql/conf.d/server-id.cnf volumeMounts: - name: mariadb-config-map mountPath: /mnt/config-map - name: mariadb-config mountPath: /etc/mysql/conf.d/ - name: initdb mountPath: /docker-entrypoint-initdb.d restartPolicy: Always containers: - name: mariadb image: mariadb ports: - containerPort: 3306 name: mariadb-port env: # Using Secrets - name: MARIADB_ROOT_PASSWORD valueFrom: secretKeyRef: name: mariadb-secret key: mariadb-root-password - name: MYSQL_INITDB_SKIP_TZINFO value: \"1\" # Mount volume from persistent volume claim volumeMounts: - name: datadir mountPath: /var/lib/mysql/ - name: mariadb-config mountPath: /etc/mysql/conf.d/ - name: initdb mountPath: /docker-entrypoint-initdb.d volumes: - name: mariadb-config-map configMap: name: mariadb-configmap #defaultMode: 0544 - name: mariadb-config emptyDir: {} - name: initdb emptyDir: {} volumeClaimTemplates: - metadata: name: datadir spec: accessModes: [ \"ReadWriteOnce\" ] resources: requests: storage: 300M kubectl apply -f mariadb-replica-sts.yaml","title":"2.1 StatefulSet \uc124\uc815"},{"location":"hello-kubernetes/section03/handson/statefulset/#22-pod-volume","text":"Pod \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c 3\ub300(replicas: 3)\uac00 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778 kubectl get pods -l app=mariadb NAME READY STATUS RESTARTS AGE mariadb-0 1/1 Running 0 11s mariadb-1 1/1 Running 0 11s mariadb-2 1/1 Running 0 11s Info \uae30\ubcf8\uc73c\ub85c Dynamic Provisioner\uac00 \uad6c\uc131\uc774 \ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c PV\ub294 PVC \uc694\uccad\uc2dc \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131 StatefulSet \ubc30\ud3ec\uc2dc PV \uc0dd\uc131 \ubc0f PVC\uc5d0 Bound \ub41c \uac83\uc744 \ud655\uc778 kubectl get pv,pvc NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE persistentvolume/pvc-0220af2d-8020-4a3b-96b5-6195aa3945b0 300M RWO Delete Bound mariadb/datadir-mariadb-0 standard 20s persistentvolume/pvc-3c897244-b250-4a5e-9dd3-324da13696aa 300M RWO Delete Bound mariadb/datadir-mariadb-1 standard 20s persistentvolume/pvc-951c940c-5d9b-4f46-afe3-3ee94435d491 300M RWO Delete Bound mariadb/datadir-mariadb-2 standard 20s NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE persistentvolumeclaim/datadir-mariadb-0 Bound pvc-0220af2d-8020-4a3b-96b5-6195aa3945b0 300M RWO standard 20s persistentvolumeclaim/datadir-mariadb-1 Bound pvc-3c897244-b250-4a5e-9dd3-324da13696aa 300M RWO standard 20s persistentvolumeclaim/datadir-mariadb-2 Bound pvc-951c940c-5d9b-4f46-afe3-3ee94435d491 300M RWO standard 20s","title":"2.2 \ubc30\ud3ec\ub41c Pod \ubc0f Volume \ud655\uc778"},{"location":"hello-kubernetes/section03/handson/statefulset/#23-mariadb-cluster","text":"\ubc30\ud3ec\ub41c MariaDB Cluster\uac00 \uc815\uc0c1\uc801\uc73c\ub85c Primary/Secondary \uad6c\uc131\uc744 \uac00\uc9c0\uace0 \uc788\ub294\uc9c0 \uac80\uc99d","title":"2.3 MariaDB Cluster \uad6c\uc131 \ud655\uc778"},{"location":"hello-kubernetes/section03/handson/statefulset/#primary-db-dummy-data","text":"PrimaryDB(mariadb-0) Pod\uc5d0 shell \uc811\uadfc Info secret\uc5d0\uc11c mariadb-root-password \ubc14\uafbc \uacbd\uc6b0 \ud574\ub2f9 password\ub85c \ubcc0\uacbd \ud558\uc5ec \uc811\uadfc kubectl exec -it mariadb-0 -- mariadb -uroot -psecret Defaulted container \"mariadb\" out of: mariadb, init-mariadb (init) Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 8 ..... # Secondary\uc5d0\uc11c repluser\ub85c Binary log dump\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c0\uace0 \uc788\ub294\uc9c0 \ud655\uc778 MariaDB [primary_db]> SHOW PROCESSLIST; +----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+ | Id | User | Host | db | Command | Time | State | Info | Progress | +----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+ | 4 | repluser | 10.244.1.22:44876 | NULL | Binlog Dump | 60552 | Master has sent all binlog to slave; waiting for more updates | NULL | 0.000 | | 5 | repluser | 10.244.3.25:53204 | NULL | Binlog Dump | 60544 | Master has sent all binlog to slave; waiting for more updates | NULL | 0.000 | | 8 | root | localhost | primary_db | Query | 0 | starting | SHOW PROCESSLIST | 0.000 | +----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+ 3 rows in set (0.001 sec) MariaDB [(none)]> SHOW DATABASES; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | | primary_db | | sys | +--------------------+ 5 rows in set (0.004 sec) MariaDB [(none)]> USE primary_db; Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed MariaDB [primary_db]> # Dummy Data \ucd94\uac00\ub97c \uc704\ud55c Table \uc0dd\uc131 MariaDB [primary_db]> CREATE TABLE test ( -> id INTEGER NOT NULL AUTO_INCREMENT, -> content VARCHAR(255) NOT NULL, -> PRIMARY KEY (id) -> ) ; Query OK, 0 rows affected (0.013 sec) # Dummy Data \ucd94\uac00 MariaDB [primary_db]> INSERT INTO `test` ( -> `content`) -> values -> ('first'); Query OK, 1 row affected (0.007 sec) MariaDB [primary_db]> SELECT * FROM test; +----+---------+ | id | content | +----+---------+ | 1 | first | +----+---------+ 1 row in set (0.001 sec) dummy table, data \uc148\ud50c \ucffc\ub9ac: init-table-data.txt","title":"Primary DB\uc5d0 Dummy Data \ucd94\uac00"},{"location":"hello-kubernetes/section03/handson/statefulset/#secondary-db-data","text":"\ub450\uac1c\uc758 Secondary(mariadb-1 \ud639\uc740 2) \uc911 \ud558\ub098\uc5d0 shell\ub85c \uc811\uadfc kubectl exec -it mariadb-2 -- mariadb -uroot -psecret Defaulted container \"mariadb\" out of: mariadb, init-mariadb (init) Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 6 Server version: 10.9.2-MariaDB-1:10.9.2+maria~ubu2204 mariadb.org binary distribution Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement. MariaDB [(none)]> # Secondary\uac00 \uc815\uc0c1\uc801\uc73c\ub85c Primary\uc758 \ub370\uc774\ud130\ub97c Dumping \ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778 MariaDB [(none)]> SHOW SLAVE STATUS \\G; *************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: mariadb-0.mariadb-service.mariadb.svc.cluster.local Master_User: repluser Master_Port: 3306 Connect_Retry: 10 Master_Log_File: my-mariadb-bin.000002 Read_Master_Log_Pos: 2492 Relay_Log_File: my-mariadb-relay-bin.000004 Relay_Log_Pos: 2796 Relay_Master_Log_File: my-mariadb-bin.000002 Slave_IO_Running: Yes ... Parallel_Mode: optimistic SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates Slave_DDL_Groups: 7 Slave_Non_Transactional_Groups: 0 Slave_Transactional_Groups: 5 1 row in set (0.001 sec) ERROR: No query specified MariaDB [(none)]> USE primary_db Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed # Dummy Data \ud655\uc778 MariaDB [primary_db]> SELECT * FROM test; +----+---------+ | id | content | +----+---------+ | 1 | first | +----+---------+ 1 row in set (0.001 sec)","title":"Secondary DB\uc5d0\uc11c Data \ud655\uc778"},{"location":"hello-kubernetes/section03/handson/statefulset/#24-mariadb-cluster","text":"replicaset\uc758 \uc124\uc815\uc744 \uc5c5\ub370\uc774\ud2b8 \ud558\uba70 cluster\uc758 \uc2a4\ucf00\uc77c \uc870\uc808 \ubc0f \uc811\uadfc \ud655\uc778 kubectl get pods -l app=mariadb NAME READY STATUS RESTARTS AGE mariadb-0 1/1 Running 0 24h mariadb-1 1/1 Running 0 24h mariadb-2 1/1 Running 0 24h #replica \uac1c\uc218\ub97c 4\uac1c\ub85c \uc870\uc815(+1) kubectl scale sts mariadb --replicas=4 statefulset.apps/mariadb scaled kubectl get pods -l app=mariadb NAME READY STATUS RESTARTS AGE mariadb-0 1/1 Running 0 2h mariadb-1 1/1 Running 0 2h mariadb-2 1/1 Running 0 2h mariadb-3 0/1 PodInitializing 0 8s \ucd94\uac00 \ubc30\ud3ec\ub41c secondary db( mariadb-3 )\ub3c4 \uc815\uc0c1\uc801\uc73c\ub85c primary\ub97c \ubc14\ub77c\ubcf4\uace0 \uc788\ub294\uc9c0 \ud655\uc778 kubectl exec -it mariadb-3 -- mariadb -uroot -psecret Defaulted container \"mariadb\" out of: mariadb, init-mariadb (init) Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 6 ... Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement. MariaDB [(none)]> SHOW SLAVE STATUS \\G; *************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: mariadb-0.mariadb-service.mariadb.svc.cluster.local Master_User: repluser Master_Port: 3306 Connect_Retry: 10 Master_Log_File: my-mariadb-bin.000002 ... Parallel_Mode: optimistic SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates Slave_DDL_Groups: 7 Slave_Non_Transactional_Groups: 0 Slave_Transactional_Groups: 5 1 row in set (0.000 sec) ERROR: No query specified","title":"2.4 MariaDB Cluster \uc2a4\ucf00\uc77c \uc870\uc815"},{"location":"hello-kubernetes/section03/handson/statefulset/#clean-up","text":"\ubc30\ud3ec\ud55c StatefulSet \ub9ac\uc18c\uc2a4 \uc0ad\uc81c kubectl delete -f mariadb-replica-sts.yaml Warn StatefulSet\uc744 \uc0ad\uc81c\ub098 \uc2a4\ucf00\uc77c\ub2e4\uc6b4\ud574\ub3c4 \ub9e4\ud551\uc774 \ub418\uc5b4 \uc788\ub294 \ubcfc\ub968\uc740 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub418\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 PV, PVC\ub294 \uc218\ub3d9\uc73c\ub85c \uc0ad\uc81c kind cluster \uc0ad\uc81c kind delete cluster","title":"Clean Up"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/","text":"\ud578\uc988\uc628 3.2 Persistent Volume Persistent Volume \uad6c\uc131 \ubc0f Pod\uc5d0 \uc0dd\uc131\ud55c \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c EmptyDir\uacfc Persistent Volume\uc744 \uac01\uac01 \uad6c\uc131\ud558\uace0 Pod\uc5d0 \ud574\ub2f9 \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Kubernetes Volume \uc774\ud574: \uad00\ub828 \ub9c1\ud06c Architecture Ephemeral\uacfc Persistent Volume\uc744 \uac01\uac01 \uad6c\uc131\ud558\uace0 Pod\uc5d0 \ud574\ub2f9 \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 1 Ephemeral Volume \uc784\uc2dc\ub85c \ub370\uc774\ud130\ub97c \uc801\uc7ac\ud574\uc57c \ud558\ub294 \ubcfc\ub968\uc744 \ub9cc\ub4e4\uae30 \uc704\ud574 \ubcfc\ub968 \uc18d\uc131\uc744 emptyDir \ub85c \uc120\uc5b8\ud55c\ub2e4 1.1 EmptyDir \uc124\uc815 \ud30c\ub4dc \uc0dd\uc131\uc2dc emptydir\uc744 \ubcfc\ub968\uc73c\ub85c \ub9c8\uc6b4\ud2b8 \ud558\ub3c4\ub85d \uc124\uc815 busybox-emptydir.yaml apiVersion: v1 kind: Pod metadata: name: busybox-sleep-1000 spec: containers: - name: busybox image: busybox:1.28 args: - sleep - \"1000\" volumeMounts: - mountPath: /data name: empty-data volumes: - name: empty-data emptyDir: {} kubectl apply -f busybox-emptydir.yaml 1.2 Volume \ud655\uc778 # Pod\uc758 Data \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc784\uc2dc \ud30c\uc77c \uc0dd\uc131 kubectl exec -it busybox-sleep-1000 -- /bin/sh -c \"echo abcd > /data/test.txt\" # Pod\uc758 UID \ud655\uc778 kubectl get pods/busybox-sleep-1000 -o jsonpath='{.metadata.uid}' # Pod\uac00 \uae30\ub3d9\uc911\uc778 Node \ud655\uc778 kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}' Pod\uac00 \uae30\ub3d9\uc911\uc778 Node\uc5d0\uc11c \uc2e4\uc81c emptyDir\uc774 \ub9cc\ub4e4\uc5b4\uc838 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc784\uc758\ub85c \uc0dd\uc131\ud55c \ud30c\uc77c\uc774 \ubcf4\uc774\ub294\uc9c0 \ud655\uc778 # \uc6cc\ucee4\ub178\ub4dc \uc811\uadfc\uc744 \uc704\ud55c docker \uba85\ub839\uc5b4 docker exec -it $(kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}') /bin/bash root@kind-worker3:/# ls -al /var/lib/kubelet/pods/fd0b963c-3ef0-4ebb-be52-258f935f161b/volumes/kubernetes.io~empty-dir/empty-data/ total 12 drwxrwxrwx 2 root root 4096 Aug 3 20:31 . drwxr-xr-x 3 root root 4096 Aug 3 20:29 .. -rw-r--r-- 1 root root 5 Aug 3 20:31 test.txt root@kind-worker3:/# cat /var/lib/kubelet/pods/fd0b963c-3ef0-4ebb-be52-258f935f161b/volumes/kubernetes.io~empty-dir/empty-data/test.txt abcd Pod \uc0ad\uc81c, \uc7ac\uc0dd\uc131\uc2dc \ube48 \ubcfc\ub968\uc73c\ub85c \ubd99\ub294\uc9c0 \ud655\uc778 kubectl delete pod/busybox-sleep-1000 kubectl apply -f busybox-emptydir.yaml 2 Persistent Volume \ub370\uc774\ud130\ub97c \uc601\uad6c\uc801\uc73c\ub85c \ubcf4\uad00\uc744 \uc704\ud574\uc11c\ub294 Persistent Volume\uc744 \uc0ac\uc6a9\ud574\uc57c \ud558\uba70 \uc9c1\uc811 Static \ud558\uac8c PVC\uc640 PV\ub97c \ubc14\uc778\ub529\uc2dc\ucf1c\uc8fc\ub294 \ubc29\ubc95\ub3c4 \uc788\uc9c0\ub9cc CSI Provider\ub97c \ud1b5\ud574\uc11c Dynamic \ud558\uac8c \ub9e4\ud551\uc744 \uc2dc\ud0ac \uc218\ub3c4 \uc788\ub2e4. Kind \ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uc5d0\uc11c\ub294 \uae30\ubcf8\uc73c\ub85c local-path-provisioner \uac00 Dynamic Provisioner\ub85c \uad6c\uc131\uc774 \ub418\uc5b4 \uc788\uc5b4 \ubcc4\ub3c4\uc758 CSI Provisioner\ub97c \uad6c\uc131\ud560 \ud544\uc694\uac00 \uc5c6\ub2e4. \ud574\ub2f9 \ub9ac\uc18c\uc2a4\ub294 local-path-storage \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \uad6c\uc131 \ub418\uc5b4 \uc788\ub2e4. 2.1 Persistent Volume Claim \uad6c\uc131 busybox-data-pvc.yaml apiVersion: v1 kind: PersistentVolumeClaim metadata: name: data-pv-claim spec: storageClassName: standard accessModes: - ReadWriteOnce resources: requests: storage: 1Gi kubectl apply -f busybox-data-pvc.yaml Info StorageClass\uc5d0 VOLUMEBINDINGMODE\uac00 WaitForFirstConsumer\ub77c\uba74 PV\uac00 \uc2e4\uc81c\ub85c \uc0dd\uc131\ub418\ub294 \uc2dc\uc810\uc740 PVC\uac00 \uc0dd\uc131\ub41c \uc2dc\uc810\uc774 \uc544\ub2cc \uc2e4\uc81c \ud30c\ub4dc \ub9ac\uc18c\uc2a4\uac00 PVC\ub97c \ub9c8\uc6b4\ud2b8 \ud558\ub294 \uc2dc\uc810\uc5d0 \uc0dd\uc131\uc774 \ub41c\ub2e4 kubectl get sc NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE standard (default) rancher.io/local-path Delete WaitForFirstConsumer false 25h kubectl get pv,pvc NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE persistentvolumeclaim/data-pv-claim Pending standard 24s 2.2 Pod \ubc30\ud3ec \ubc0f Volume \ub9c8\uc6b4\ud2b8 \uc704\uc5d0\uc11c \uc694\uccad\ud55c PVC\ub97c BusyBox \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8 busybox-pv.yaml apiVersion: v1 kind: Pod metadata: name: busybox-sleep-1000 spec: containers: - name: busybox image: busybox:1.28 args: - sleep - \"1000\" volumeMounts: - mountPath: /data name: data-volume volumes: - name: data-volume persistentVolumeClaim: claimName: data-pv-claim kubectl apply -f busybox-pv.yaml Pod \ubc30\ud3ec\uc2dc Dynamic\ud558\uac8c PV\uae4c\uc9c0 \uc0dd\uc131\ub418\uc5b4 PVC\uc5d0 Bound \ub41c \uac83\uc744 \ud655\uc778 kubectl get pod,pvc,pv NAME READY STATUS RESTARTS AGE pod/busybox-sleep-1000 1/1 Running 0 28s NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE persistentvolumeclaim/data-pv-claim Bound pvc-c2e346e2-c9df-410a-835d-9b1a06eda595 1Gi RWO standard 2m27s NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE persistentvolume/pvc-c2e346e2-c9df-410a-835d-9b1a06eda595 1Gi RWO Delete Bound demo/data-pv-claim standard 24s Pod\uc758 Data \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc784\uc2dc \ud30c\uc77c \uc0dd\uc131 kubectl exec -it busybox-sleep-1000 -- /bin/sh -c \"echo abcd > /data/test.txt\" 2.3 Volume \ud655\uc778 \ud30c\ub4dc\uac00 \uc0dd\uc131\ub41c \uc6cc\ucee4 \ub178\ub4dc\uc5d0 \uc811\uadfc\ud558\uc5ec local-path-provisioner \ub514\ub809\ud1a0\ub9ac\uc5d0 PV \ud3f4\ub354\uac00 \uc0dd\uc131\ub418\uc5b4 \uc0dd\uc131\ud55c \uc784\uc2dc \ud30c\uc77c\uc774 \uc788\ub294\uc9c0 \ud655\uc778 # Pod\uac00 \uae30\ub3d9\uc911\uc778 Node \ud655\uc778 kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}' # \uc6cc\ucee4\ub178\ub4dc \uc811\uadfc\uc744 \uc704\ud55c docker \uba85\ub839\uc5b4 docker exec -it $(kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}') /bin/bash root@kind-worker:/# ls -al /var/local-path-provisioner/pvc-c2e346e2-c9df-410a-835d-9b1a06eda595_demo_data-pv-claim/ total 12 drwxrwxrwx 2 root root 4096 Aug 3 23:03 . drwxr-xr-x 3 root root 4096 Aug 3 22:57 .. -rw-r--r-- 1 root root 6 Aug 3 23:03 test.txt Pod \uc0ad\uc81c \ubc0f \ub3d9\uc77c\ud55c PVC\ub97c \ub9c8\uc6b4\ud2b8 \ud558\uba70 \uc7ac\uc0dd\uc131 kubectl delete pod/busybox-sleep-1000 kubectl apply -f busybox-pv.yaml Pod\ub97c \uc0ad\uc81c\ud558\ub354\ub77c\ub3c4 \uae30\uc874\uc5d0 \uc791\uc131\ud55c \uc784\uc2dc \ud30c\uc77c\uc774 \uc601\uad6c\uc801\uc73c\ub85c \ub0a8\uc544\uc11c \uc77d\uace0 \uc4f0\uae30\uac00 \uac00\ub2a5\ud55c\uc9c0 \ud655\uc778: Pod\ub294 \uc0ad\uc81c \ub418\uc5c8\ub354\ub77c\ub3c4 Volume\uc740 \uc0ad\uc81c \ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 \ub370\uc774\ud130\ub97c \uc601\uad6c\uc801\uc73c\ub85c \uad00\ub9ac \uac00\ub2a5 kubectl exec -it busybox-sleep-1000 -- /bin/sh / # cd /data/ /data # ls test.txt /data # ls -al total 12 drwxrwxrwx 2 root root 4096 Aug 3 22:07 . drwxr-xr-x 1 root root 4096 Aug 3 22:38 .. -rw-r--r-- 1 root root 6 Aug 3 22:07 test.txt Clean Up \uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"\ud578\uc988\uc628 3.2 Persistent Volume"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#32-persistent-volume","text":"Persistent Volume \uad6c\uc131 \ubc0f Pod\uc5d0 \uc0dd\uc131\ud55c \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 \ud574\ubcf4\ub294 \uc2e4\uc2b5 \ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c EmptyDir\uacfc Persistent Volume\uc744 \uac01\uac01 \uad6c\uc131\ud558\uace0 Pod\uc5d0 \ud574\ub2f9 \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 \ud574\ubcf4\ub294 \uc2e4\uc2b5","title":"\ud578\uc988\uc628 3.2 Persistent Volume"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#_1","text":"Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c Kubernetes Volume \uc774\ud574: \uad00\ub828 \ub9c1\ud06c","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#architecture","text":"Ephemeral\uacfc Persistent Volume\uc744 \uac01\uac01 \uad6c\uc131\ud558\uace0 Pod\uc5d0 \ud574\ub2f9 \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8","title":"Architecture"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#1-ephemeral-volume","text":"\uc784\uc2dc\ub85c \ub370\uc774\ud130\ub97c \uc801\uc7ac\ud574\uc57c \ud558\ub294 \ubcfc\ub968\uc744 \ub9cc\ub4e4\uae30 \uc704\ud574 \ubcfc\ub968 \uc18d\uc131\uc744 emptyDir \ub85c \uc120\uc5b8\ud55c\ub2e4","title":"1 Ephemeral Volume"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#11-emptydir","text":"\ud30c\ub4dc \uc0dd\uc131\uc2dc emptydir\uc744 \ubcfc\ub968\uc73c\ub85c \ub9c8\uc6b4\ud2b8 \ud558\ub3c4\ub85d \uc124\uc815 busybox-emptydir.yaml apiVersion: v1 kind: Pod metadata: name: busybox-sleep-1000 spec: containers: - name: busybox image: busybox:1.28 args: - sleep - \"1000\" volumeMounts: - mountPath: /data name: empty-data volumes: - name: empty-data emptyDir: {} kubectl apply -f busybox-emptydir.yaml","title":"1.1 EmptyDir \uc124\uc815"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#12-volume","text":"# Pod\uc758 Data \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc784\uc2dc \ud30c\uc77c \uc0dd\uc131 kubectl exec -it busybox-sleep-1000 -- /bin/sh -c \"echo abcd > /data/test.txt\" # Pod\uc758 UID \ud655\uc778 kubectl get pods/busybox-sleep-1000 -o jsonpath='{.metadata.uid}' # Pod\uac00 \uae30\ub3d9\uc911\uc778 Node \ud655\uc778 kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}' Pod\uac00 \uae30\ub3d9\uc911\uc778 Node\uc5d0\uc11c \uc2e4\uc81c emptyDir\uc774 \ub9cc\ub4e4\uc5b4\uc838 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc784\uc758\ub85c \uc0dd\uc131\ud55c \ud30c\uc77c\uc774 \ubcf4\uc774\ub294\uc9c0 \ud655\uc778 # \uc6cc\ucee4\ub178\ub4dc \uc811\uadfc\uc744 \uc704\ud55c docker \uba85\ub839\uc5b4 docker exec -it $(kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}') /bin/bash root@kind-worker3:/# ls -al /var/lib/kubelet/pods/fd0b963c-3ef0-4ebb-be52-258f935f161b/volumes/kubernetes.io~empty-dir/empty-data/ total 12 drwxrwxrwx 2 root root 4096 Aug 3 20:31 . drwxr-xr-x 3 root root 4096 Aug 3 20:29 .. -rw-r--r-- 1 root root 5 Aug 3 20:31 test.txt root@kind-worker3:/# cat /var/lib/kubelet/pods/fd0b963c-3ef0-4ebb-be52-258f935f161b/volumes/kubernetes.io~empty-dir/empty-data/test.txt abcd Pod \uc0ad\uc81c, \uc7ac\uc0dd\uc131\uc2dc \ube48 \ubcfc\ub968\uc73c\ub85c \ubd99\ub294\uc9c0 \ud655\uc778 kubectl delete pod/busybox-sleep-1000 kubectl apply -f busybox-emptydir.yaml","title":"1.2 Volume \ud655\uc778"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#2-persistent-volume","text":"\ub370\uc774\ud130\ub97c \uc601\uad6c\uc801\uc73c\ub85c \ubcf4\uad00\uc744 \uc704\ud574\uc11c\ub294 Persistent Volume\uc744 \uc0ac\uc6a9\ud574\uc57c \ud558\uba70 \uc9c1\uc811 Static \ud558\uac8c PVC\uc640 PV\ub97c \ubc14\uc778\ub529\uc2dc\ucf1c\uc8fc\ub294 \ubc29\ubc95\ub3c4 \uc788\uc9c0\ub9cc CSI Provider\ub97c \ud1b5\ud574\uc11c Dynamic \ud558\uac8c \ub9e4\ud551\uc744 \uc2dc\ud0ac \uc218\ub3c4 \uc788\ub2e4. Kind \ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uc5d0\uc11c\ub294 \uae30\ubcf8\uc73c\ub85c local-path-provisioner \uac00 Dynamic Provisioner\ub85c \uad6c\uc131\uc774 \ub418\uc5b4 \uc788\uc5b4 \ubcc4\ub3c4\uc758 CSI Provisioner\ub97c \uad6c\uc131\ud560 \ud544\uc694\uac00 \uc5c6\ub2e4. \ud574\ub2f9 \ub9ac\uc18c\uc2a4\ub294 local-path-storage \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \uad6c\uc131 \ub418\uc5b4 \uc788\ub2e4.","title":"2 Persistent Volume"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#21-persistent-volume-claim","text":"busybox-data-pvc.yaml apiVersion: v1 kind: PersistentVolumeClaim metadata: name: data-pv-claim spec: storageClassName: standard accessModes: - ReadWriteOnce resources: requests: storage: 1Gi kubectl apply -f busybox-data-pvc.yaml Info StorageClass\uc5d0 VOLUMEBINDINGMODE\uac00 WaitForFirstConsumer\ub77c\uba74 PV\uac00 \uc2e4\uc81c\ub85c \uc0dd\uc131\ub418\ub294 \uc2dc\uc810\uc740 PVC\uac00 \uc0dd\uc131\ub41c \uc2dc\uc810\uc774 \uc544\ub2cc \uc2e4\uc81c \ud30c\ub4dc \ub9ac\uc18c\uc2a4\uac00 PVC\ub97c \ub9c8\uc6b4\ud2b8 \ud558\ub294 \uc2dc\uc810\uc5d0 \uc0dd\uc131\uc774 \ub41c\ub2e4 kubectl get sc NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE standard (default) rancher.io/local-path Delete WaitForFirstConsumer false 25h kubectl get pv,pvc NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE persistentvolumeclaim/data-pv-claim Pending standard 24s","title":"2.1 Persistent Volume Claim \uad6c\uc131"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#22-pod-volume","text":"\uc704\uc5d0\uc11c \uc694\uccad\ud55c PVC\ub97c BusyBox \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8 busybox-pv.yaml apiVersion: v1 kind: Pod metadata: name: busybox-sleep-1000 spec: containers: - name: busybox image: busybox:1.28 args: - sleep - \"1000\" volumeMounts: - mountPath: /data name: data-volume volumes: - name: data-volume persistentVolumeClaim: claimName: data-pv-claim kubectl apply -f busybox-pv.yaml Pod \ubc30\ud3ec\uc2dc Dynamic\ud558\uac8c PV\uae4c\uc9c0 \uc0dd\uc131\ub418\uc5b4 PVC\uc5d0 Bound \ub41c \uac83\uc744 \ud655\uc778 kubectl get pod,pvc,pv NAME READY STATUS RESTARTS AGE pod/busybox-sleep-1000 1/1 Running 0 28s NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE persistentvolumeclaim/data-pv-claim Bound pvc-c2e346e2-c9df-410a-835d-9b1a06eda595 1Gi RWO standard 2m27s NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE persistentvolume/pvc-c2e346e2-c9df-410a-835d-9b1a06eda595 1Gi RWO Delete Bound demo/data-pv-claim standard 24s Pod\uc758 Data \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc784\uc2dc \ud30c\uc77c \uc0dd\uc131 kubectl exec -it busybox-sleep-1000 -- /bin/sh -c \"echo abcd > /data/test.txt\"","title":"2.2 Pod \ubc30\ud3ec \ubc0f Volume \ub9c8\uc6b4\ud2b8"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#23-volume","text":"\ud30c\ub4dc\uac00 \uc0dd\uc131\ub41c \uc6cc\ucee4 \ub178\ub4dc\uc5d0 \uc811\uadfc\ud558\uc5ec local-path-provisioner \ub514\ub809\ud1a0\ub9ac\uc5d0 PV \ud3f4\ub354\uac00 \uc0dd\uc131\ub418\uc5b4 \uc0dd\uc131\ud55c \uc784\uc2dc \ud30c\uc77c\uc774 \uc788\ub294\uc9c0 \ud655\uc778 # Pod\uac00 \uae30\ub3d9\uc911\uc778 Node \ud655\uc778 kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}' # \uc6cc\ucee4\ub178\ub4dc \uc811\uadfc\uc744 \uc704\ud55c docker \uba85\ub839\uc5b4 docker exec -it $(kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}') /bin/bash root@kind-worker:/# ls -al /var/local-path-provisioner/pvc-c2e346e2-c9df-410a-835d-9b1a06eda595_demo_data-pv-claim/ total 12 drwxrwxrwx 2 root root 4096 Aug 3 23:03 . drwxr-xr-x 3 root root 4096 Aug 3 22:57 .. -rw-r--r-- 1 root root 6 Aug 3 23:03 test.txt Pod \uc0ad\uc81c \ubc0f \ub3d9\uc77c\ud55c PVC\ub97c \ub9c8\uc6b4\ud2b8 \ud558\uba70 \uc7ac\uc0dd\uc131 kubectl delete pod/busybox-sleep-1000 kubectl apply -f busybox-pv.yaml Pod\ub97c \uc0ad\uc81c\ud558\ub354\ub77c\ub3c4 \uae30\uc874\uc5d0 \uc791\uc131\ud55c \uc784\uc2dc \ud30c\uc77c\uc774 \uc601\uad6c\uc801\uc73c\ub85c \ub0a8\uc544\uc11c \uc77d\uace0 \uc4f0\uae30\uac00 \uac00\ub2a5\ud55c\uc9c0 \ud655\uc778: Pod\ub294 \uc0ad\uc81c \ub418\uc5c8\ub354\ub77c\ub3c4 Volume\uc740 \uc0ad\uc81c \ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 \ub370\uc774\ud130\ub97c \uc601\uad6c\uc801\uc73c\ub85c \uad00\ub9ac \uac00\ub2a5 kubectl exec -it busybox-sleep-1000 -- /bin/sh / # cd /data/ /data # ls test.txt /data # ls -al total 12 drwxrwxrwx 2 root root 4096 Aug 3 22:07 . drwxr-xr-x 1 root root 4096 Aug 3 22:38 .. -rw-r--r-- 1 root root 6 Aug 3 22:07 test.txt","title":"2.3 Volume \ud655\uc778"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#clean-up","text":"\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c kind delete cluster","title":"Clean Up"},{"location":"hello-kubernetes/section04/container-network-interface/","text":"4.1 Container Network Interface CNI TODO","title":"4.1 Container Network Interface"},{"location":"hello-kubernetes/section04/container-network-interface/#41-container-network-interface","text":"","title":"4.1 Container Network Interface"},{"location":"hello-kubernetes/section04/container-network-interface/#cni","text":"TODO","title":"CNI"},{"location":"hello-kubernetes/section04/container-resource-interface/","text":"4.3 Container Resource Interface CRI TODO","title":"4.3 Container Resource Interface"},{"location":"hello-kubernetes/section04/container-resource-interface/#43-container-resource-interface","text":"","title":"4.3 Container Resource Interface"},{"location":"hello-kubernetes/section04/container-resource-interface/#cri","text":"TODO","title":"CRI"},{"location":"hello-kubernetes/section04/container-storage-interface/","text":"4.2 Container Storage Interface CSI TODO","title":"4.2 Container Storage Interface"},{"location":"hello-kubernetes/section04/container-storage-interface/#42-container-storage-interface","text":"","title":"4.2 Container Storage Interface"},{"location":"hello-kubernetes/section04/container-storage-interface/#csi","text":"TODO","title":"CSI"},{"location":"hello-kubernetes/section04/coredns/","text":"4.4 CoreDNS CoreDNS TODO","title":"4.4 CoreDNS"},{"location":"hello-kubernetes/section04/coredns/#44-coredns","text":"","title":"4.4 CoreDNS"},{"location":"hello-kubernetes/section04/coredns/#coredns","text":"TODO","title":"CoreDNS"},{"location":"hello-kubernetes/section05/backup-management/","text":"5.8 Backup Management Velero velero TODO","title":"5.8 Backup Management"},{"location":"hello-kubernetes/section05/backup-management/#58-backup-management","text":"","title":"5.8 Backup Management"},{"location":"hello-kubernetes/section05/backup-management/#velero","text":"velero TODO","title":"Velero"},{"location":"hello-kubernetes/section05/cert-management/","text":"5.5 Certificate Management Let's Encrypt letsencrypt TODO","title":"5.5 Certificate Management"},{"location":"hello-kubernetes/section05/cert-management/#55-certificate-management","text":"","title":"5.5 Certificate Management"},{"location":"hello-kubernetes/section05/cert-management/#lets-encrypt","text":"letsencrypt TODO","title":"Let's Encrypt"},{"location":"hello-kubernetes/section05/continuous-deployment/","text":"5.7 Continuous Deployment ArgoCD argocd TODO","title":"5.7 Continuous Deployment"},{"location":"hello-kubernetes/section05/continuous-deployment/#57-continuous-deployment","text":"","title":"5.7 Continuous Deployment"},{"location":"hello-kubernetes/section05/continuous-deployment/#argocd","text":"argocd TODO","title":"ArgoCD"},{"location":"hello-kubernetes/section05/dns-management/","text":"5.4 DNS Management External DNS TODO","title":"5.4 DNS Management"},{"location":"hello-kubernetes/section05/dns-management/#54-dns-management","text":"","title":"5.4 DNS Management"},{"location":"hello-kubernetes/section05/dns-management/#external-dns","text":"TODO","title":"External DNS"},{"location":"hello-kubernetes/section05/ingress-controller/","text":"Ingress Controller Ingress\ub294 \uc544\ub798 \uadf8\ub9bc\uacfc \uac19\uc774 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \ud2b8\ub808\ud53d \uc815\ucc45\uc758 \uc9d1\ud569\uc774\ub2e4. Ingress Controller\ub294 Ingress\ub97c \uad6c\ud604, \uc6b4\uc601\ud558\uae30 \uc704\ud55c \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc774\ub2e4. \ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 Ingress Controller\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70 \uc774\uac83\uc740 AWS\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140 \ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \uc0c1\uc6a9 \ud639\uc740 \uc624\ud508\uc18c\uc2a4 Ingress Controller (Additional) \ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4. Cloud Native Ingress Controller EKS, GKE\uc640 \uac19\uc740 Managed \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 \uae30\ubcf8 Ingress Class\ub294 AWS: Application Load Balancer, GCP: GCE L7 Load Balancer\uc640 \uac19\uc740 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 \uc81c\uacf5\ud558\ub294 LB\ub97c \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4. \ud2b9\ud788 \ud074\ub77c\uc6b0\ub4dc\uc5d0\uc11c \uc9c1\uc811 \uc81c\uacf5\ud558\ub294 LB\ub294 \uae30\uc220\uc801\uc778 \uc131\uc219\ub3c4\uac00 \ub192\uace0, \uae30\uc874 VM\uacfc\ub3c4 (\uc218\ub3d9\uc73c\ub85c)\uc5f0\ub3d9\ud560 \uc218 \uc788\uc73c\uba70, \uc0ac\uc6a9\uc790 \uc785\uc7a5\uc5d0\uc11c \ubcc4\ub3c4\uc758 \uad00\ub9ac\uac00 \ud544\uc694\ud558\uc9c0 \uc54a\ub2e4. \ubcc4\ub3c4\uc758 \ucee4\uc2a4\ud140 \ud55c Load Balancing \uae30\ub2a5\uc774 \ud544\uc694\ud558\uc9c0 \uc54a\ub2e4\uba74 \uc81c\uacf5\ud558\ub294 LB\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \ud6a8\uc728\uc801\uc774\ub2e4. \ub9cc\uc57d\uc5d0 Managed \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc544\ub2cc \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd \uc704\uc5d0\uc11c Kops\uac19\uc740 \ub3c4\uad6c\ub97c \ud1b5\ud574\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc9c1\uc811 \uad6c\uc131 \ud55c\ub2e4\uace0 \ud574\ub3c4 Custom Resource Definitions (CRDs) \uac00 \uc81c\uacf5\ub418\uae30 \ub54c\ubb38\uc5d0 \uc190\uc27d\uac8c LB \ub9ac\uc18c\uc2a4\ub97c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4. \ucd9c\ucc98: AWS Blog - Kubernetes Ingress with AWS ALB Ingress Controller Ingress Nginx Controller \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc790\uccb4\ub294 \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\ub294 \uc560\uadf8\ub178\uc2a4\ud2f1 \ud55c \ub3c4\uad6c\uc774\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c Ingress Controller\uac00 \uc788\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 ingress \uc911\uc5d0\uc11c\ub294 Ingress-Nginx \uac00 \uc720\uba85\ud558\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0 \uc744 \ud558\ub294 \ucee8\ud2b8\ub864\ub7ec \uc774\ub2e4. \ub2e8 Nginx\uac00 \uc9c1\uc811 \uad00\ub9ac\ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uac00 \uc544\ub2c8\ub77c Kubernetes \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uad00\ub9ac\ub97c \ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uc774\uae30 \ub54c\ubb38\uc5d0 \uae30\uc874\uc5d0 \uc4f0\ub358 \uc131\ub2a5 \ud29c\ub2dd\uc774\ub098 Rate limit, JWT vailidation\uc640 \uac19\uc740 rich\ud55c Nginx \uae30\ub2a5\ub4e4\uc744 \uadf8\ub300\ub85c \uc124\uc815\ud558\uace0 \uad00\ub9ac\ud558\uae30\ub97c \uc6d0\ud55c\ub2e4\uba74 \uacf5\uc2dd\uc801\uc73c\ub85c Nginx\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 Nginx-Ingress \ub97c \uc4f0\ub294 \uac83\ub3c4 \ubc29\ubc95\uc774\ub2e4. \ub9cc\uc57d Nginx Ingress\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \ud558\uc600\ub2e4\uba74 \ub458 \uac04\uc758 \uc5b4\ub5a4 \ucc28\uc774\uc810\uc774 \uc788\ub294\uc9c0 \ud55c\ubc88 \ud655\uc778\ud574 \ubcf4\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0 Ingress Controller vs. NGINX Ingress Controller Ingress Nginx Setup \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0 Ingress Controller\ub97c \uc14b\uc5c5\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1 metrics\ub97c \ud65c\uc131\ud654\ud558\ub294 \ubc29\uc548\uc744 \uc18c\uac1c\ud55c\ub2e4. Prerequisites Helm3 EKS, GKE\uc640 \uac19\uc740 Cloud Kubernetes Cluster \ud639\uc740 MiniKube Install Ingress-Nginx \uc124\uc815\uac12\uc740 \ub2e4\uc74c repo \uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc73c\uba70 \uc124\uce58\ub294 \uae30\ubcf8 \uc124\uc815\uac12\uc73c\ub85c \uc9c4\ud589\ud55c\ub2e4. (\ucd94\ud6c4 \ubcc0\uacbd \uc608\uc815) helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo update helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace \ub9cc\uc57d Public cloud \ud658\uacbd\uc5d0\uc11c ingress-nginx\ub97c \uad6c\uc131\ud558\uc600\ub2e4\uba74 ingress-nginx\uc758 \uc11c\ube44\uc2a4\uc758 type: LoadBalancer \uc774 \uae30\ubcf8 \uc774\ubbc0\ub85c L4 level(TCP/UDP) LoadBalancer\uac00 ingress-nginx Pod \uc55e\ub2e8\uc5d0 \uad6c\uc131\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \uc608\uc0c1 output - EKS kubectl get svc -n ingress-nginx NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/ingress-nginx-controller LoadBalancer 10.100.193.33 a6764e85cc5404c079112dbb75a60078-1098452773.ap-northeast-2.elb.amazonaws.com 80:30446/TCP,443:31287/TCP 38s AWS EKS\uc758 ingress-controller \uad6c\uc131 Info Minikube\uc758 \uacbd\uc6b0\ub294 \uc2e4\uc81c LoadBalancer \ub9ac\uc18c\uc2a4\uac00 \uc5c6\uc73c\ubbc0\ub85c EXTERNAL-IP \uac00 \ud655\uc778 \ub418\uc9c0 \uc54a\ub294\ub2e4 Deploy Sample App kubectl create ns demo kubectl create deployment demo --image=cloudacode/hello-go-app:v1.0.0 --port=8080 -n demo kubectl expose deployment demo -n demo kubectl create ingress demo-localhost --class=nginx \\ --rule=\"ing.localdev.demo/*=demo:8080\" -n demo Verify ingress rule \ube0c\ub77c\uc6b0\uc838\uc5d0\uc11c ing.localdev.demo:8080 \uc811\uc18d\ud558\uc5ec \uc6d0\ud558\ub294 \uacb0\uacfc\uac00 \ub098\ud0c0\ub098\ub294\uc9c0 \ud655\uc778 \uc608\uc0c1 output Hello, world! Version: 1.0.0 Hostname: demo-7fbd87c6b9-qd6qt Info cloud \ud658\uacbd: \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589 \ud558\ub294 \uacbd\uc6b0 kubectl get ingress \ud588\uc744\ub54c \ub098\uc624\ub294 EXTERNAL-IP\uc758 IP \uc8fc\uc18c\ub97c hosts \ud30c\uc77c \ub9c8\uc9c0\ub9c9 \uc904\uc5d0 \uc784\uc2dc \ucd94\uac00 External-IP's IP ing.localdev.demo #ingress test minikube \ud658\uacbd: local \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 hosts \ud30c\uc77c \ub9c8\uc9c0\ub9c9 \uc904\uc5d0 \ub2e4\uc74c\uc744 \ucd94\uac00. 127.0.0.1 ing.localdev.demo #ingress test Tip hosts \ud30c\uc77c\uc740 linux, mac\uc778 \uacbd\uc6b0 /etc/hosts, \uc708\ub3c4\uc6b0 os\uc778 \uacbd\uc6b0 C:\\Windows\\System32\\drivers\\etc\\hosts Minikube\ub85c \uc9c4\ud589 \ud558\ub294 \uacbd\uc6b0 \ub2e4\uc74c\uacfc \uac19\uc774 port-forwarding\uc73c\ub85c local\uc5d0\uc11c ingress-nginx-controller\uc5d0 \uc5f0\uacb0 \ud544\uc694 kubectl port-forward --namespace=ingress-nginx \\ service/ingress-nginx-controller 8080:80 Enable Metric Prometheus \ubaa8\ub2c8\ud130\ub9c1 \uc5f0\ub3d9\uc744 \uc704\ud574 Ingress Nginx \uc5d0\uc11c metric\uc744 enable helm \uc124\uc815 \ud30c\uc77c(values.yaml) controller: metrics: enabled: true service: annotations: prometheus.io/scrape: \"true\" prometheus.io/port: \"10254\" helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace -f values.yaml ingress nginx controller metric endpoint\uac00 \uc0dd\uc131 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778 kubectl get svc ingress-nginx-controller-metrics -n ingress-nginx kubectl port-forward --namespace=ingress-nginx \\ service/ingress-nginx-controller-metrics 10254 \ube0c\ub77c\uc6b0\uc838\uc5d0\uc11c \uc0c8\ub85c\uc6b4 \ud0ed\uc73c\ub85c http://127.0.0.1:10254/metrics \uc5d0 \uc811\uc18d\ud558\uc5ec ingress-nginx\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1 metrics\ub97c \uc218\uc9d1\ud558\uace0 \uc788\ub294\uc9c0 \uac80\uc99d \uc704\uc5d0\uc11c port-forwarding\uc73c\ub85c \uc811\uc18d\ud55c http://ing.localdev.demo:8080 \uc744 \uc5ec\ub7ec \ubc88 \ud638\ucd9c \ud6c4 metrics \ud56d\ubaa9\uc5d0 \ud574\ub2f9 endpoint\uc758 \uc218\uc9d1\ub41c metrics \ucd94\uac00\uac00 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778 Wrap up \uc774 \uae00\uc5d0\uc11c\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uacf5\uc2dd \uc9c0\uc6d0\ud558\ub294 Ingress-Nginx\ub97c \uc54c\uc544 \ubcf4\uc558\uc73c\uba70 \ucd94\ud6c4 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud574 metrics \uae4c\uc9c0 \ud65c\uc131\ud654 \uc2dc\ucf1c\ubcf4\uc558\ub2e4. Ingress Controller\ub294 \uc11c\ube44\uc2a4 \uc6cc\ud06c\ub85c\ub4dc\uc758 \ud2b8\ub808\ud53d\uc744 \ubc1b\ub294 \uac00\uc7a5 \uccab \ubc88\uc9f8 \uad6c\uc131\uc694\uc18c\uc774\uba70 \ub2e4\uc591\ud55c \uc194\ub8e8\uc158\ub4e4\uc774 \uc788\uc73c\ubbc0\ub85c \uc2dc\uac04\uc744 \ub450\uace0 \ud2b9\uc131\uc5d0 \ub9de\ub294 Ingress Controller\ub97c \ub3c4\uc785 \uac80\ud1a0\ud574\uc57c \ud55c\ub2e4. Ingress-Nginx\ub294 \ud558\ub098\uc758 controller\uc5d0 \ud558\ub098\uc758 domain\ub9cc \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 \ub9cc\uc57d\uc5d0 \uc5ec\ub7ec domain\uc744 \ud558\ub098\uc758 ingress\uc5d0\uc11c \ucc98\ub9ac\ud574\uc57c \ud558\ub294 \ud544\uc694\uac00 \uc788\ub294 \uacbd\uc6b0\ub294 Istio\uac19\uc740 Ingress controller\ub97c \ub300\uccb4 \ud560 \uc218 \uc788\ub294 \ub3c4\uad6c\ub97c \uac80\ud1a0\ud574 \ubcfc \ud544\uc694\uac00 \uc788\ub2e4. Star \uc774 \uae00\uc774 \uc720\uc6a9\ud558\uc600\ub2e4\uba74 \u2b50 Star\ub97c, \ud83d\udcac 1:1 \uc9c8\ubb38\uc774\ub098 \uae30\uc220 \uad00\ub828 \ubb38\uc758\uac00 \ud544\uc694\ud558\uc2e0 \ubd84\ub4e4\uc740 \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \ucd94\uac00 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4.\ud83e\udd17","title":"5.2 Ingress Controller"},{"location":"hello-kubernetes/section05/ingress-controller/#ingress-controller","text":"Ingress\ub294 \uc544\ub798 \uadf8\ub9bc\uacfc \uac19\uc774 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \ud2b8\ub808\ud53d \uc815\ucc45\uc758 \uc9d1\ud569\uc774\ub2e4. Ingress Controller\ub294 Ingress\ub97c \uad6c\ud604, \uc6b4\uc601\ud558\uae30 \uc704\ud55c \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc774\ub2e4. \ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 Ingress Controller\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70 \uc774\uac83\uc740 AWS\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140 \ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \uc0c1\uc6a9 \ud639\uc740 \uc624\ud508\uc18c\uc2a4 Ingress Controller (Additional) \ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4.","title":"Ingress Controller"},{"location":"hello-kubernetes/section05/ingress-controller/#cloud-native-ingress-controller","text":"EKS, GKE\uc640 \uac19\uc740 Managed \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 \uae30\ubcf8 Ingress Class\ub294 AWS: Application Load Balancer, GCP: GCE L7 Load Balancer\uc640 \uac19\uc740 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 \uc81c\uacf5\ud558\ub294 LB\ub97c \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4. \ud2b9\ud788 \ud074\ub77c\uc6b0\ub4dc\uc5d0\uc11c \uc9c1\uc811 \uc81c\uacf5\ud558\ub294 LB\ub294 \uae30\uc220\uc801\uc778 \uc131\uc219\ub3c4\uac00 \ub192\uace0, \uae30\uc874 VM\uacfc\ub3c4 (\uc218\ub3d9\uc73c\ub85c)\uc5f0\ub3d9\ud560 \uc218 \uc788\uc73c\uba70, \uc0ac\uc6a9\uc790 \uc785\uc7a5\uc5d0\uc11c \ubcc4\ub3c4\uc758 \uad00\ub9ac\uac00 \ud544\uc694\ud558\uc9c0 \uc54a\ub2e4. \ubcc4\ub3c4\uc758 \ucee4\uc2a4\ud140 \ud55c Load Balancing \uae30\ub2a5\uc774 \ud544\uc694\ud558\uc9c0 \uc54a\ub2e4\uba74 \uc81c\uacf5\ud558\ub294 LB\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \ud6a8\uc728\uc801\uc774\ub2e4. \ub9cc\uc57d\uc5d0 Managed \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc544\ub2cc \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd \uc704\uc5d0\uc11c Kops\uac19\uc740 \ub3c4\uad6c\ub97c \ud1b5\ud574\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc9c1\uc811 \uad6c\uc131 \ud55c\ub2e4\uace0 \ud574\ub3c4 Custom Resource Definitions (CRDs) \uac00 \uc81c\uacf5\ub418\uae30 \ub54c\ubb38\uc5d0 \uc190\uc27d\uac8c LB \ub9ac\uc18c\uc2a4\ub97c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4. \ucd9c\ucc98: AWS Blog - Kubernetes Ingress with AWS ALB Ingress Controller","title":"Cloud Native Ingress Controller"},{"location":"hello-kubernetes/section05/ingress-controller/#ingress-nginx-controller","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc790\uccb4\ub294 \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\ub294 \uc560\uadf8\ub178\uc2a4\ud2f1 \ud55c \ub3c4\uad6c\uc774\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c Ingress Controller\uac00 \uc788\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 ingress \uc911\uc5d0\uc11c\ub294 Ingress-Nginx \uac00 \uc720\uba85\ud558\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0 \uc744 \ud558\ub294 \ucee8\ud2b8\ub864\ub7ec \uc774\ub2e4. \ub2e8 Nginx\uac00 \uc9c1\uc811 \uad00\ub9ac\ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uac00 \uc544\ub2c8\ub77c Kubernetes \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uad00\ub9ac\ub97c \ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uc774\uae30 \ub54c\ubb38\uc5d0 \uae30\uc874\uc5d0 \uc4f0\ub358 \uc131\ub2a5 \ud29c\ub2dd\uc774\ub098 Rate limit, JWT vailidation\uc640 \uac19\uc740 rich\ud55c Nginx \uae30\ub2a5\ub4e4\uc744 \uadf8\ub300\ub85c \uc124\uc815\ud558\uace0 \uad00\ub9ac\ud558\uae30\ub97c \uc6d0\ud55c\ub2e4\uba74 \uacf5\uc2dd\uc801\uc73c\ub85c Nginx\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 Nginx-Ingress \ub97c \uc4f0\ub294 \uac83\ub3c4 \ubc29\ubc95\uc774\ub2e4. \ub9cc\uc57d Nginx Ingress\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \ud558\uc600\ub2e4\uba74 \ub458 \uac04\uc758 \uc5b4\ub5a4 \ucc28\uc774\uc810\uc774 \uc788\ub294\uc9c0 \ud55c\ubc88 \ud655\uc778\ud574 \ubcf4\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0 Ingress Controller vs. NGINX Ingress Controller","title":"Ingress Nginx Controller"},{"location":"hello-kubernetes/section05/ingress-controller/#ingress-nginx-setup","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0 Ingress Controller\ub97c \uc14b\uc5c5\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1 metrics\ub97c \ud65c\uc131\ud654\ud558\ub294 \ubc29\uc548\uc744 \uc18c\uac1c\ud55c\ub2e4.","title":"Ingress Nginx Setup"},{"location":"hello-kubernetes/section05/ingress-controller/#prerequisites","text":"Helm3 EKS, GKE\uc640 \uac19\uc740 Cloud Kubernetes Cluster \ud639\uc740 MiniKube","title":"Prerequisites"},{"location":"hello-kubernetes/section05/ingress-controller/#install-ingress-nginx","text":"\uc124\uc815\uac12\uc740 \ub2e4\uc74c repo \uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc73c\uba70 \uc124\uce58\ub294 \uae30\ubcf8 \uc124\uc815\uac12\uc73c\ub85c \uc9c4\ud589\ud55c\ub2e4. (\ucd94\ud6c4 \ubcc0\uacbd \uc608\uc815) helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo update helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace \ub9cc\uc57d Public cloud \ud658\uacbd\uc5d0\uc11c ingress-nginx\ub97c \uad6c\uc131\ud558\uc600\ub2e4\uba74 ingress-nginx\uc758 \uc11c\ube44\uc2a4\uc758 type: LoadBalancer \uc774 \uae30\ubcf8 \uc774\ubbc0\ub85c L4 level(TCP/UDP) LoadBalancer\uac00 ingress-nginx Pod \uc55e\ub2e8\uc5d0 \uad6c\uc131\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \uc608\uc0c1 output - EKS kubectl get svc -n ingress-nginx NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/ingress-nginx-controller LoadBalancer 10.100.193.33 a6764e85cc5404c079112dbb75a60078-1098452773.ap-northeast-2.elb.amazonaws.com 80:30446/TCP,443:31287/TCP 38s AWS EKS\uc758 ingress-controller \uad6c\uc131 Info Minikube\uc758 \uacbd\uc6b0\ub294 \uc2e4\uc81c LoadBalancer \ub9ac\uc18c\uc2a4\uac00 \uc5c6\uc73c\ubbc0\ub85c EXTERNAL-IP \uac00 \ud655\uc778 \ub418\uc9c0 \uc54a\ub294\ub2e4","title":"Install Ingress-Nginx"},{"location":"hello-kubernetes/section05/ingress-controller/#deploy-sample-app","text":"kubectl create ns demo kubectl create deployment demo --image=cloudacode/hello-go-app:v1.0.0 --port=8080 -n demo kubectl expose deployment demo -n demo kubectl create ingress demo-localhost --class=nginx \\ --rule=\"ing.localdev.demo/*=demo:8080\" -n demo","title":"Deploy Sample App"},{"location":"hello-kubernetes/section05/ingress-controller/#verify-ingress-rule","text":"\ube0c\ub77c\uc6b0\uc838\uc5d0\uc11c ing.localdev.demo:8080 \uc811\uc18d\ud558\uc5ec \uc6d0\ud558\ub294 \uacb0\uacfc\uac00 \ub098\ud0c0\ub098\ub294\uc9c0 \ud655\uc778 \uc608\uc0c1 output Hello, world! Version: 1.0.0 Hostname: demo-7fbd87c6b9-qd6qt Info cloud \ud658\uacbd: \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589 \ud558\ub294 \uacbd\uc6b0 kubectl get ingress \ud588\uc744\ub54c \ub098\uc624\ub294 EXTERNAL-IP\uc758 IP \uc8fc\uc18c\ub97c hosts \ud30c\uc77c \ub9c8\uc9c0\ub9c9 \uc904\uc5d0 \uc784\uc2dc \ucd94\uac00 External-IP's IP ing.localdev.demo #ingress test minikube \ud658\uacbd: local \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 hosts \ud30c\uc77c \ub9c8\uc9c0\ub9c9 \uc904\uc5d0 \ub2e4\uc74c\uc744 \ucd94\uac00. 127.0.0.1 ing.localdev.demo #ingress test Tip hosts \ud30c\uc77c\uc740 linux, mac\uc778 \uacbd\uc6b0 /etc/hosts, \uc708\ub3c4\uc6b0 os\uc778 \uacbd\uc6b0 C:\\Windows\\System32\\drivers\\etc\\hosts Minikube\ub85c \uc9c4\ud589 \ud558\ub294 \uacbd\uc6b0 \ub2e4\uc74c\uacfc \uac19\uc774 port-forwarding\uc73c\ub85c local\uc5d0\uc11c ingress-nginx-controller\uc5d0 \uc5f0\uacb0 \ud544\uc694 kubectl port-forward --namespace=ingress-nginx \\ service/ingress-nginx-controller 8080:80","title":"Verify ingress rule"},{"location":"hello-kubernetes/section05/ingress-controller/#enable-metric","text":"Prometheus \ubaa8\ub2c8\ud130\ub9c1 \uc5f0\ub3d9\uc744 \uc704\ud574 Ingress Nginx \uc5d0\uc11c metric\uc744 enable helm \uc124\uc815 \ud30c\uc77c(values.yaml) controller: metrics: enabled: true service: annotations: prometheus.io/scrape: \"true\" prometheus.io/port: \"10254\" helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace -f values.yaml ingress nginx controller metric endpoint\uac00 \uc0dd\uc131 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778 kubectl get svc ingress-nginx-controller-metrics -n ingress-nginx kubectl port-forward --namespace=ingress-nginx \\ service/ingress-nginx-controller-metrics 10254 \ube0c\ub77c\uc6b0\uc838\uc5d0\uc11c \uc0c8\ub85c\uc6b4 \ud0ed\uc73c\ub85c http://127.0.0.1:10254/metrics \uc5d0 \uc811\uc18d\ud558\uc5ec ingress-nginx\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1 metrics\ub97c \uc218\uc9d1\ud558\uace0 \uc788\ub294\uc9c0 \uac80\uc99d \uc704\uc5d0\uc11c port-forwarding\uc73c\ub85c \uc811\uc18d\ud55c http://ing.localdev.demo:8080 \uc744 \uc5ec\ub7ec \ubc88 \ud638\ucd9c \ud6c4 metrics \ud56d\ubaa9\uc5d0 \ud574\ub2f9 endpoint\uc758 \uc218\uc9d1\ub41c metrics \ucd94\uac00\uac00 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778","title":"Enable Metric"},{"location":"hello-kubernetes/section05/ingress-controller/#wrap-up","text":"\uc774 \uae00\uc5d0\uc11c\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uacf5\uc2dd \uc9c0\uc6d0\ud558\ub294 Ingress-Nginx\ub97c \uc54c\uc544 \ubcf4\uc558\uc73c\uba70 \ucd94\ud6c4 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud574 metrics \uae4c\uc9c0 \ud65c\uc131\ud654 \uc2dc\ucf1c\ubcf4\uc558\ub2e4. Ingress Controller\ub294 \uc11c\ube44\uc2a4 \uc6cc\ud06c\ub85c\ub4dc\uc758 \ud2b8\ub808\ud53d\uc744 \ubc1b\ub294 \uac00\uc7a5 \uccab \ubc88\uc9f8 \uad6c\uc131\uc694\uc18c\uc774\uba70 \ub2e4\uc591\ud55c \uc194\ub8e8\uc158\ub4e4\uc774 \uc788\uc73c\ubbc0\ub85c \uc2dc\uac04\uc744 \ub450\uace0 \ud2b9\uc131\uc5d0 \ub9de\ub294 Ingress Controller\ub97c \ub3c4\uc785 \uac80\ud1a0\ud574\uc57c \ud55c\ub2e4. Ingress-Nginx\ub294 \ud558\ub098\uc758 controller\uc5d0 \ud558\ub098\uc758 domain\ub9cc \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 \ub9cc\uc57d\uc5d0 \uc5ec\ub7ec domain\uc744 \ud558\ub098\uc758 ingress\uc5d0\uc11c \ucc98\ub9ac\ud574\uc57c \ud558\ub294 \ud544\uc694\uac00 \uc788\ub294 \uacbd\uc6b0\ub294 Istio\uac19\uc740 Ingress controller\ub97c \ub300\uccb4 \ud560 \uc218 \uc788\ub294 \ub3c4\uad6c\ub97c \uac80\ud1a0\ud574 \ubcfc \ud544\uc694\uac00 \uc788\ub2e4. Star \uc774 \uae00\uc774 \uc720\uc6a9\ud558\uc600\ub2e4\uba74 \u2b50 Star\ub97c, \ud83d\udcac 1:1 \uc9c8\ubb38\uc774\ub098 \uae30\uc220 \uad00\ub828 \ubb38\uc758\uac00 \ud544\uc694\ud558\uc2e0 \ubd84\ub4e4\uc740 \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \ucd94\uac00 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4.\ud83e\udd17","title":"Wrap up"},{"location":"hello-kubernetes/section05/k8-essential-components/","text":"5.1 Kubernetes Essential Component \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ud544\uc218 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad00\ub9ac \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \uc774\ud574\ud558\uace0 \uad6c\uc131\ud560 \ud544\uc694\uac00 \uc788\ub2e4. Kubernetes Components \ub780? \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uad6c\uc131 \ud6c4 \uace7\ubc14\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f8 \uc218 \uc788\ub294 \uac83\uc740 \uc544\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uba74 \ub9ac\ub205\uc2a4 \uad6c\uc131 \ud6c4\uc5d0 user\ub97c \ub9cc\ub4e4\uace0 ldap\uc744 \uc5f0\ub3d9\ud558\uace0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ub9de\ub294 \ub2e4\uc591\ud55c runtime\uc744 \uc124\uce58\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc5f0\ub3d9\ud574\uc57c \ud558\ub294 \uac83\ucc98\ub7fc \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\uc131 \ud6c4\uc5d0 \uadf8 \uc704\uc5d0 \ub2e4\uc591\ud55c k8s components\ub97c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4. CNCF(Cloud Native Cloud Foundation)\uc5d0\uc11c \ub2e4\uc591\ud55c \uc18c\ud504\ud2b8\uc6e8\uc5b4\ub4e4\uc744 sandboxing, inclubating\ud558\uace0 graduating \uc2dc\ud0a4\uace0 \uc788\uc73c\uba70 \ub2e4\uc591\ud55c \ub3c4\uad6c\ub4e4, \uc11c\ube44\uc2a4\ub4e4\uc774 \uc0dd\uae40\uc5d0 \ub530\ub77c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc0dd\ud0dc\uacc4\uac00 \uc5c4\uccad\ub098\uac8c \ubc1c\uc804\ud558\uace0 \ub9e4 \uc21c\uac04 \uc9c4\ud654\ub418\uace0 \uc788\ub2e4. \uc544\ub798\ub294 2022\ub144 \ud604\uc7ac(1\uc6d4) CNCF Landscape \uc0dd\ud0dc\uacc4 \ubaa8\uc2b5\uc774\ub2e4. \ucd9c\ucc98: CNCF Landscape Kubernetes\ub97c \ube44\ub86f\ud574 \uc720\uba85\ud55c \ub3c4\uad6c \ud639\uc740 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\ub85c\ub294 \ud328\ud0a4\uc9d5 \uad00\ub9ac Helm, CI/CD \ub3c4\uad6c\uc778 ArgoCD, \ud2b8\ub808\ud53d \uad00\ub9ac \ub3c4\uad6c\uc778 Istio, \uc11c\ube44\uc2a4 \ud504\ub85d\uc2dc Envoy\ub4e4\uc774 CNCF \uc0dd\ud0dc\uacc4 \uc548\uc5d0\uc11c \uacc4\uc18d \ucf54\ub4dc\ub97c \uae30\uc5ec\ud558\uace0 \ubc1c\uc804 \uc911\uc774\ub2e4. \uc218\ub9ce\uc740 \uc11c\ube44\uc2a4\uac00 \uacc4\uc18d \uc774\uacf3 \uc548\uc5d0\uc11c \uc0dd\uaca8\ub098\uace0 \uc788\uc73c\uba70 \ud2b8\ub79c\ub4dc\ub97c \ub530\ub77c\uac00\uae30 \uc704\ud574 \uc8fc\uc758 \uae4a\uac8c \ubcf4\uace0 \uc788\uc5b4\uc57c \ud55c\ub2e4. \uc774\uc81c \ud55c \uac00\uc9c0 \uc758\ubb38\uc810\uc774 \uc0dd\uae38 \uc218 \uc788\ub2e4. \uadf8\ub798\uc11c \ub0b4\uac00 \"\ubb34\uc5c7\uc744 \uc368\uc57c \ud558\uc9c0?\" \ud639\uc740 \"\ub0b4\uac00 \ud558\ub098\uc529 \ub2e4 \uac80\uc99d(PoC)\ud574\uc11c \ub098\uc5d0\uac8c \ub9de\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc9c1\uc811 \ucc3e\uc544\uc57c \ud558\ub294 \uac74\uac00?\" \uc6b0\uc120 \uacb0\ub860 \ubd80\ud130 \ub9d0\ud558\uc790\uba74 \ub9de\ub2e4 \ud558\ub098\uc758 \uc815\ub2f5\uc740 \uc5c6\uc73c\ubbc0\ub85c \uc9c1\uc811 \uac80\uc99d\ud574\ubcf4\uace0 \ubcf8\uc778 \uc11c\ube44\uc2a4\uc5d0 \ub9de\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ucc3e\uc544\uc57c\ud55c\ub2e4. \uadf8\ub7fc \uadf8\ub2e4\uc74c \uc9c8\ubb38\uc740 \"\ub108\ubb34 \ub9ce\uc740\ub370 \uc5b4\ub514\uc11c\ubd80\ud130 \uc5b4\ub5bb\uac8c \uc2dc\uc791\ud574\uc57c \ud558\uc9c0?\" \uac00 \ub098\uc62c \uc218\ubc16\uc5d0 \uc5c6\uc744 \uac83\uc774\ub2e4. \ud604\uc5c5\uc5d0\uc11c \uc77c\ud558\uba74\uc11c \uc9c0\uc778\ub4e4\uc5d0\uac8c \uac00\uc7a5 \ub9ce\uc774 \ub4e4\uc5c8\ub358 \uc9c8\ubb38\uc774\uae30\ub3c4 \ud558\uace0 \uc0dd\ud0dc\uacc4 \uc790\uccb4\uac00 \ubc29\ub300\ud558\ub2e4 \ubcf4\ub2c8 \uc2e4\uc81c\ub85c \uae38\uc744 \uc783\uae30 \uc27d\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc5b4\ub835\ub2e4\uace0 \ub9d0\ud558\ub294 \ubd80\ubd84 \uc911 \ud558\ub098\uac00 \ubc14\ub85c \uc774\uac83\uc774\ub2e4. \ud604\uc5c5\uc5d0\uc11c\ub3c4 \uac00\uc7a5 \ub9ce\uc774 \uacaa\ub294 \ud5c8\ub4e4\uc774\uace0 \uc5b4\ub5bb\uac8c \ubcf4\uba74 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\ucd95 \ucd08\uae30\uc5d0 \uac00\uc7a5 \ub9ce\uc740 \uc2dc\uac04\uc744 \uc9d1\uc911\ud574\uc11c \ud574\uc57c \ud558\ub294 \ubd80\ubd84\uc774\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \ub41c\ub2e4\ub294 \ub9c8\ubc95\uc758 \uad6c\uc131 \ud45c\uc900\uc740 \uc5c6\uc73c\ub098 \ud604\uc5c5\uc5d0\uc11c \uc2e4\uc81c\ub85c \uad6c\uc131\ud558\uace0 \uc6b4\uc601\ud558\uba74\uc11c \uc774\ub7f0 \uac74 \ud544\uc218\ub85c \uc788\uc73c\uba74 \uc88b\uc740 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc5d0 \ub300\ud574\uc11c \uac04\ub7b5\ud558\uac8c \uc544\ub798\uc5d0\uc11c \uc815\ub9ac\ud574 \ubcf8\ub2e4. Kubernetes Essential Component \ub2e4\uc591\ud55c \ub3c4\uad6c\ub97c \uac80\ud1a0\ud574\ubcf4\uace0 \ud504\ub7ec\ub355\uc158\uc5d0 \uc801\uc6a9\ud574 \ubcf4\uba74\uc11c \uc774 \uc815\ub3c4\uc758 \ucef4\ud3ec\ub10c\ud2b8\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\uc131 \ud6c4 Week 1\uc5d0 \ud544\uc218\ub85c \ucd94\uac00\ud574\uc57c \ud55c\ub2e4\uace0 \uc0dd\uac01\ud558\ub294 \ubaa9\ub85d\uc774\ub2e4. * \uc0c1\uc138 \uadf8\ub9bc \ubcf4\ub4dc \ubc14\ub85c\uac00\uae30 \ube44\ubc00\ubc88\ud638: \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \uc5d0\uc11c \ud655\uc778 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec Ingress\ub294 \uc544\ub798 \uadf8\ub9bc\uacfc \uac19\uc774 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4. \ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70 \uc774\uac83\uc740 AWS\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9 \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140\ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \uc624\ud508\uc18c\uc2a4 Ingress Controller\ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4. Ingress-Nginx \uac00 \uac00\uc7a5 \ub300\ud45c\uc801\uc774\uba70 \uc2e0\ub8b0 \ud560\uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc774\ub2e4. \uc131\ub2a5 \ud29c\ub2dd\uc774\ub098 Rate limit, JWT vailidation\uc744 Proxy(\ud639\uc740 LB \ub808\ubca8)\uc5d0\uc11c \ud558\uae30\ub97c \uc6d0\ud55c\ub2e4\uba74 \uacf5\uc2dd\uc801\uc73c\ub85c Nginx\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Nginx-Ingress \ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc624\ub798\ub41c \uae00\uc774\uc9c0\ub9cc \ub2e4\uc591\ud55c Ingress Controller\uc5d0 \ub300\ud574 \ube44\uad50\ud55c medium \ube14\ub85c\uadf8 \ub3c4 \uc77d\uc5b4 \ubcf4\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. DNS \uad00\ub9ac \ucfe0\ubc84\ub124\ud2f0\uc2a4 ingress \ud639\uc740 service\ub97c \ud1b5\ud574 \uc678\ubd80\ub85c \uc11c\ube44\uc2a4\ub97c \ub178\ucd9c \uc2dc\ucf30\ub2e4\uba74 \uadf8 LB Endpoint \uc774\ub984(\ud639\uc740 IP) \ub808\ucf54\ub4dc\ub97c DNS ZONE\uc5d0 \ub204\uad70\uac00\ub294 \ub4f1\ub85d\uc2dc\ucf1c\uc918\uc57c \ud55c\ub2e4. \uc608\ub97c \ub4e4\uba74 EKS\uc5d0\uc11c Ingress\ub97c \uc0dd\uc131\ud558\uba74 ALB endpoint\uac00 \ub0b4 External-IP\ub85c \ub9e4\ud551\uc774 \ub418\ub294\ub370 \uc774 External-IP\ub97c \ub0b4 \ub3c4\uba54\uc778 DNS\uc5d0 \uc6d0\ud558\ub294 Subdomain\uc73c\ub85c \uc0ac\uc6a9\ud558\ub824\uba74 \uc9c1\uc811 Route53\uc5d0 \ucd94\uac00\ud574 \uc918\uc57c \ud55c\ub2e4. \ub9e4\ubc88 \uc11c\ube44\uc2a4\uac00 \uc62c\ub77c\uc62c \ub54c \ub9c8\ub2e4 \uc218\ub3d9\uc73c\ub85c \ub4f1\ub85d\ud558\ub294 \uac83\uc740 \ud6a8\uc728\uc801\uc774\uc9c0 \ubabb\ud558\uae30\uc5d0 \uc774\uac83\uc744 External-DNS \ub85c \uc790\ub3d9\ud654 \uc2dc\ucf1c\uc57c \ud560 \ud544\uc694\uac00 \uc788\ub2e4. \uc778\uc99d\uc11c \uad00\ub9ac \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc678\ubd80\ub85c \ub178\ucd9c \uc2dc\ucf30\ub2e4\uba74 HTTPS \ud1b5\uc2e0\uc744 \uc704\ud574 LB\uc5d0\uc11c SSL termination\uc744 \uc2dc\ud0a4\ub3c4\ub85d \uc138\ud305 \ud574\uc918\uc57c \ud55c\ub2e4. AWS, GCP\uc640 \uac19\uc740 \uc77c\ubc18\uc801\uc778 \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c\ub294 \ud074\ub77c\uc6b0\ub4dc LB\uc5d0 SSL \uc778\uc99d\uc11c\ub97c \uc9c1\uc811 \uc784\ud3ec\ud2b8 \ud558\uace0 \uad00\ub9ac \ud560 \uc218 \uc788\uc9c0\ub9cc, \ub9e4\ubc88 \uc778\uc99d\uc11c \uac31\uc2e0 \uc77c\uc815\uc5d0 \ub9de\ucdb0\uc11c \uc218\ub3d9\uc73c\ub85c \ud574\uc918\uc57c \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud55c\ub2e4. \ubb3c\ub860 \uc774 \ud504\ub85c\uc138\uc2a4\ub97c \uc790\ub3d9\ud654\ud560 \uc218\ub294 \uc788\uc73c\ub098 \uc778\uc99d \uae30\uad00(Certificate Authority e.g. DigiCert, Comodo\ub4f1)\uc5d0 API \uc5f0\ub3d9\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uac00 \ub9ce\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \ub9e4\ubc88 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \uc778\uc99d\uc11c\ub97c \ubc1c\uae09(issue), \uac31\uc2e0(re-issue)\ud558\uace0 \uc218\ub3d9\uc73c\ub85c TLS\ub97c Secrets\uc73c\ub85c \ub123\ub294 \uac83\uc740 \ub9e4\uc6b0 \ube44\ud6a8\uc728\uc801\uc774\ub2e4. \uc774 \ud504\ub85c\uc138\uc2a4\ub97c \uc790\ub3d9\ud654\ud558\uae30 \uc704\ud574 Cert-Manager \ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\uc73c\uba70 Cert-Manager\ub294 \uac1c\ubc29\ud615 \uc778\uc99d \uae30\uad00\uc778 Let's Encrypt \uc5d0 \ub9e4\ubc88 \uc778\uc99d\uc11c \uac31\uc2e0 \uae30\uac04\uc5d0 \ub9de\ucdb0\uc11c \uc778\uc99d\uc11c\ub97c \uc7ac\uac31\uc2e0 \uc2dc\ud0a4\uba74\uc11c Secerts\uc5d0 TLS key\ub97c \uc5c5\ub370\uc774\ud2b8 \uc790\ub3d9\uc73c\ub85c \ud574\uc8fc\uae30 \ub54c\ubb38\uc5d0 \uc778\uc99d\uc11c \ub9cc\ub8cc\uc5d0 \ub300\ud55c \uac71\uc815\uc744 \ud560 \ud544\uc694\uac00 \uc5c6\ub2e4. \ucd9c\ucc98: Banzai Cloud - Cert management on kubernetes Continuos Delivery \ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\uac00 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud1b5\ud574\uc11c \uc815\uc758\ud558\uace0 declarative(\uc120\uc5b8\ud615)\ud558\uac8c \ubc30\ud3ec \ubc0f \uad00\ub9ac\ub97c \ud560 \uc218 \uc788\uac8c \ub428\uc5d0 \ub530\ub77c GitOps \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \ub300\uc138\uac00 \ub418\uace0 \uc788\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c ArgoCD \uc640 FluxCD \uac00 GitOps \uc804\ub7b5\uc73c\ub85c \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec\ud558\uace0 \uc5c5\ub370\uc774\ud2b8 \ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc8fc\ub294 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uad00\ub9ac \ubc0f CD(Continuous Delivery)\ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \uc544\ub798 \uadf8\ub9bc\uc740 Pull Based\ub85c \ubc30\ud3ec \ud558\ub294 GitOps \uc804\ub7b5 \ubc29\ubc95\uc774\ub2e4. \ud300 \ud639\uc740 \ud504\ub85c\uc81d\ud2b8\ubcc4\ub85c \ud6a8\uacfc\uc801\uc778 Flow\uac00 \uac01\uac01 \ub2e4\ub974\ubbc0\ub85c \ubc30\ud3ec \uc804\ub7b5\uc5d0 \ub300\ud574 \ucda9\ubd84\ud788 \ud1a0\ub860\ud55c \ud6c4 ArgoCD \ud639\uc740 FluxCD\ub97c \ub3c4\uc785\ud558\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \ucd9c\ucc98: GitOps tech blog \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4\ub97c kustomize \ud639\uc740 helm\uc73c\ub85c \uad6c\uc131\ud558\ub294 \uacbd\uc6b0\ub294 FluxCD\uac00 \ubcf4\ub2e4 native \ud558\uac8c \uc4f8 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc73c\ub098 WebUI\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc544 \uc5ec\ub7ec \uc0ac\uc6a9\uc790\ub97c \uc218\uc6a9\ud574\uc57c\ud558\ub294 Multi-tenecy Cluster \uc77c \uacbd\uc6b0\ub294 ArgoCD\uac00 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 CLI, UI\uac00 \uc788\uc5b4\uc11c \ubcf4\ub2e4 \uc801\ud569 \ud560 \uc218 \uc788\ub2e4. \ud2b8\ub808\ud53d \uad00\ub9ac \ubc0f \uc11c\ube44\uc2a4 \ub9e4\uc26c Ingress\ub85c \uc678\ubd80\uc5d0\uc11c \ub4e4\uc5b4\uc624\ub294 \ud2b8\ub808\ud53d\uc5d0 \ub300\ud55c \uc81c\uc5b4\ub97c \ud558\uc600\ub2e4\uba74 \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc801\uc73c\ub85c \ud2b8\ub808\ud53d\uc758 \ud750\ub984 \ubc0f \uc81c\uc5b4\uac00 \ud544\uc694\ud55c \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud55c\ub2e4. \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \uc571\uacfc \uac19\uc774 \ub2e4\uc591\ud55c \ubc31\uc5d4\ub4dc \uc11c\ube44\uc2a4\ub4e4\uc774 \uc11c\ub85c \uc720\uc5f0\ud558\uac8c \ud1b5\uc2e0\ud558\uace0 \uc2ec\ub9ac\uc2a4 \ud558\uac8c Failover\uac00 \ub418\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0 \ud2b8\ub808\ud53d\uc744 \uc138\uc138\ud558\uac8c \uc81c\uc5b4(Fine-grained control)\uc774 \ud544\uc694\ud558\uae30\ub3c4 \ud558\ub2e4. \uc608\ub97c \ub4e4\uba74 Istio \ub97c \ud1b5\ud574\uc11c \ucee4\uc2a4\ud140 \ud55c \ub77c\uc6b0\ud305 \uaddc\uce59\uc774\ub098 Rate Limit\uacfc \uac19\uc740 \uc815\ucc45\ub4e4\uc744 \ucd94\uac00 \ud560 \uc218 \uc788\uc73c\uba70 \ubaa8\ub4e0 \ud074\ub7ec\uc2a4\ud130\uc5d0 Ingress/Engress \ud2b8\ub808\ud53d\uc744 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ucd94\uc801 \ud560 \uc218 \uc788\ub2e4. \uc774\ub7f0 \uae30\ub2a5\uc744 \uad6c\ud604\ud558\uae30 \uc704\ud574 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \ubcc4\ub3c4\uc758 \ucf54\ub4dc\ub97c \ucd94\uac00\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c Linkerd \ud639\uc740 Envoy Proxy \uac19\uc740 \uc11c\ube44\uc2a4 \ub9e4\uc26c\ub97c \ud1b5\ud574\uc11c Sidecar \ubc29\uc2dd\uc73c\ub85c \uac01 Pod\uc5d0 proxy\uac00 \ucd94\uac00\ub418\uc5b4 \uac01 \uc11c\ube44\uc2a4 \uac04 \uc5f0\uad00 \uad00\uacc4\ub97c \ud30c\uc545\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\ud55c\ub2e4. \ubc31\uc5c5 \uad00\ub9ac \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 cloud agnostic \ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \ubc18\ub300\ub85c \uadf8\ub9cc\ud07c \ucd94\uc0c1\ud654\ub41c \uc601\uc5ed\uc774 \ub9ce\ub2e4 \ubcf4\ub2c8 \uc5b4\ub514\uc11c \uc5b4\ub5a4 \uac83\uc744 \uc5b4\ub5bb\uac8c \ubc31\uc5c5\ud574\uc57c \ud558\ub294\uc9c0 \uc54c\uae30 \uc5b4\ub824\uc6b4 \ubd80\ubd84\uc774 \uc788\ub2e4. Stateless \ud55c \uc11c\ube44\uc2a4\ub4e4 \uac19\uc740 \uacbd\uc6b0\ub294 GitOps \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \uc798 \uc815\ub9bd\ub418\uc5b4 \uc788\ub2e4\uba74 \ubc14\ub85c ArgoCD, FluxCD\ub85c \ub2e4\uc2dc \ubc30\ud3ec\ud558\uba74 \ub418\uae30 \ub54c\ubb38\uc5d0 \ubc31\uc5c5\uc5d0 \uad00\ud574 \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uc544\ub3c4 \ub418\uc9c0\ub9cc DB\ub098 Vault \uac19\uc740 State\uac00 \uc911\uc694\ud55c \uc11c\ube44\uc2a4\ub4e4\uc740 PersistentVolume\uc5d0 State\ub97c \uc800\uc7a5\ud558\uace0 \ub370\uc774\ud130\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \ubc31\uc5c5\uc744 \ud574\uc57c \ud55c\ub2e4. VMWare(\uc774\uc804 Pivotal)\uc5d0\uc11c \uc624\ud508\uc18c\uc2a4\ud654\ud55c Velero \uac00 \ud604\uc7ac\uae4c\uc9c0\ub294 \uac00\uc7a5 \uc190\uc27d\uac8c \ubc31\uc5c5\ud558\uace0 \ub9ac\uc18c\uc2a4\ub4e4\uc744 \ubcf5\uc6d0\ud560 \uc218 \uc788\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \ub2f9\uc5f0\ud558\uaca0\uc9c0\ub9cc \uc778\ud504\ub77c, \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub808\uc774\uc5b4\uc758 \ubc31\uc5c5\uc774\uae30 \ub54c\ubb38\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub808\ubca8\uc758 \ub370\uc774\ud130 \ubc31\uc5c5\uc740 \ucd94\uac00\ub85c \uac01\uc790 \uace0\ubbfc\ud574\uc57c \ud558\ub294 \ubd80\ubd84\uc774\ub2e4. \uc815\ucc45 \uad00\ub9ac \ubaa8\ub4e0 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 API \uc624\ube0c\uc81d\ud2b8 \ub4e4\uc744 \uc218\ub3d9\uc73c\ub85c \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud558\ub294 \uac83\uc740 \ub9e4\uc6b0 \ud798\ub4e0 \uc77c\uc774\ub2e4. \ud2b9\ud788\ub098 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ud5c8\uc6a9\ud558\uae30\ub85c \ud639\uc740 \ud558\uc9c0 \uc54a\uae30\ub85c \ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc815\ucc45\uc744 \uc778\uc9c0\ud558\uc9c0 \ubabb\ud55c \uc0c1\ud0dc\uc5d0\uc11c \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uc6d0\ud558\ub294 \uc124\uc815\uc73c\ub85c \ubc30\ud3ec\ud558\ub2e4 \ubcf4\uba74 \ucd94\ud6c4 \uc6b4\uc601 \uc2dc \uc5b4\ub824\uc6c0\uc774 \ubc1c\uc0dd \ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uba74 \uac1c\ubc1c\ud300\uc774 \uc2e4\uc218\ub85c \ud68c\uc0ac\uc5d0\uc11c \uc815\ud55c environment label\uc744 \ub123\uc9c0 \uc54a\uace0 \ubc30\ud3ec\ud55c\ub2e4\uba74 \ucd94\ud6c4\uc5d0 label\ub85c prometheus, loki\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1 \ub300\uc0c1\uc73c\ub85c \ucd94\uac00\uc2dc\ud0ac \uc218 \uc5c6\ub2e4. \ubb3c\ub860 \uc218\ub3d9\uc73c\ub85c \ub2e4\uc2dc \ucd94\uac00\ud558\uba74 \ub418\ub294 \ubd80\ubd84\uc774\ub098 \uc774\ub7f0 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc6b4\uc601 \uc5c5\ubb34\ub97c \ucd5c\uc18c\ud654\ud558\uae30 \uc704\ud574\uc11c\ub294 \ubc30\ud3ec \ud639\uc740 API \uc694\uccad \ub2e8\uacc4\ubd80\ud130 \uc81c\ud55c\uc744 \uc2dc\ud0a4\ub294 \ubc29\ubc95\uc774 \uc788\ub2e4. GateKeeper \ub098 Kyverno \uac00 Policy\uc5d0 \ub300\ud574\uc11c \ubc30\ud3ec \ud558\uae30 \uc804\uc5d0 \uc0ac\uc804 \uac80\uc99d(Validation)\ud558\uace0 \ud544\uc694\uc5d0 \ub530\ub77c\uc11c\ub294 \uc815\ucc45\uc5d0 \ub9de\ub3c4\ub85d \ubcc0\uc870(Mutation)\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ub808\ud3ec\ud305 \uac00\ub2a5\ud558\ub2e4. \uc8fc\uc694\ud55c \uae30\ub2a5(Validation, Mutation, Montoring)\uc740 \ub300\ubd80\ubd84 \ube44\uc2b7\ud558\uace0 GateKeeper\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ubfd0\ub9cc\uc774 \uc544\ub2c8\ub77c \ub2e4\uc591\ud55c \uc815\ucc45\uc744 \uac80\uc99d \uac00\ub2a5\ud55c \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \ubcc4\ub3c4\uc758 \ubb38\ubc95\uc744 \ubc30\uc6cc\uc57c \ud55c\ub2e4\ub294 \ub2e8\uc810\uc774 \uc788\ub2e4. Kyverno\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 yaml \ud615\ud0dc\ub85c \uc791\uc131\uc774 \ub418\uae30 \ub54c\ubb38\uc5d0 \ube60\ub974\uac8c \ub3c4\uc785 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4. \ubaa8\ub2c8\ud130\ub9c1 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uacfc \uac19\uc740 \ubd84\uc0b0\ud615 \uc2dc\uc2a4\ud15c \ud658\uacbd\uc5d0\uc11c\ub294 \ub9ac\uc18c\uc2a4\ub97c \uc11c\ubc84 \uc774\ub984 \ud639\uc740 IP\ub85c \uae30\uc900\uc73c\ub85c \uad00\ub9ac\ud558\ub294 \uc804\ud1b5\uc801\uc778 \ubaa8\ub2c8\ud130\ub9c1 \ubc29\ubc95\ubcf4\ub2e4\ub294 tag \ud639\uc740 label \uae30\ubc18\uc73c\ub85c \uc11c\ube44\uc2a4\uc758 \uc804\uccb4 \uc0ac\uc6a9\ub7c9, \uac00\uc6a9\ub7c9\uacfc \uac19\uc740 \ud074\ub7ec\uc2a4\ud130 \uad00\uc810\uc758 \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \uac83\uc774 \ub354\uc6b1 \uc801\ud569\ud558\ub2e4. \ud2b9\ud788 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 4\uac00\uc9c0 \ud56d\ubaa9\uc758 \uad00\uc810\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1\uc774 \ud544\uc694\ud558\ub2e4. Metric: \uc0ac\uc6a9\ub7c9(Utilization), \ud3ec\ud654\ub3c4(Saturation), \uc560\ub7ec(Error), \uac00\uc6a9\ub7c9(Availability) \ub4f1 Event: \ub9b4\ub9ac\uc988 \ubc84\uc804(Release version), \ud604\uc7ac \ubc84\uc804\uc758 \uac00\ub3d9 \uc2dc\uac04(Uptime for current version), \ud655\uc7a5 \uc774\ubca4\ud2b8(Scaling event) \ub4f1 Log: \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub85c\uadf8(Application log), \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub85c\uadf8(Kubernetes log) \ub4f1 K8S Resource: \ud074\ub7ec\uc2a4\ud130 \uc6a9\ub7c9(Cluster capacity), \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \ub9ac\uc18c\uc2a4 \uc6a9\ub7c9(Namespace resource) \ub4f1 \ubaa8\ub2c8\ud130\ub9c1(\uc2dc\uc2a4\ud15c) : \uc2dc\uc2a4\ud15c \uba54\ud2b8\ub9ad \uac19\uc740 \uacbd\uc6b0\ub294 \ub300\ubd80\ubd84 \uc2dc\uacc4\uc5f4(time series) \ub370\uc774\ud130\uc774\uae30 \ub54c\ubb38\uc5d0 \ud655\uc7a5\uc131\uc758 \uc81c\ud55c \uc774 \uc788\ub294 rrdtool \uacfc \uac19\uc740 \ubc29\uc2dd \ubcf4\ub2e4\ub294 NoSql \ud639\uc740 \uc2dc\uacc4\uc5f4 \ub370\uc774\ud130\uc5d0 \ucd5c\uc801\ud654\ub41c Prometheus , InfluxDB , \ud639\uc740 TSDB \uac19\uc740 time series database\ub97c \uc4f0\ub294 \uac83\uc774 \ud6a8\uacfc\uc801\uc774\ub2e4. \uc774 \uc911\uc5d0\uc11c\ub3c4 Prometheus\uac00 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\ub4dc \ud658\uacbd\uc5d0\uc11c \ub3d9\uc801\uc73c\ub85c \ub370\uc774\ud130\ub97c exporter \ub4e4\uc744 \ud1b5\ud574 \uc218\uc9d1\ud560 \uc218 \uc788\uace0 \ucee4\uc2a4\ud140\ud558\uac8c \ucd94\uac00 \uac1c\ubc1c \uac00\ub2a5\ud558\uba70 \ub2e4\ucc28\uc6d0\uc758 \ucffc\ub9ac \ub97c \uc9c0\uc6d0\ud55c\ub2e4. \ub610\ud55c AlertManager \uc640 \ub124\uc774\ud2f0\ube0c \ud558\uac8c \uc5f0\uacb0\ub418\uc5b4 \uc2ac\ub809\uacfc \uac19\uc740 \uba54\uc2dc\uc9d5 \ud50c\ub7ab\ud3fc \ud639\uc740 PagerDuty \uc640 \uac19\uc740 incidient management \ub3c4\uad6c\ub4e4\uacfc\ub3c4 \uc190\uc27d\uac8c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4. \ucd9c\ucc98: prometheus.io \ubaa8\ub2c8\ud130\ub9c1(\ub85c\uadf8) : \ubd84\uc0b0\ud615 \ud658\uacbd\uc5d0\uc11c\ub294 \uc11c\ubc84\uc5d0 \uac01\uac01 \uc811\uc18d\ud574 \ub85c\uadf8\ub97c \ubcf8\ub2e4\ub294 \uac83\uc774 \ub9e4\uc6b0 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc791\uc5c5\uc774\ubbc0\ub85c \uc911\uc559\uc9d1\uc911\ud615 \ub85c\uadf8 \uc2dc\uc2a4\ud15c\uc740 \ud544\uc218\uc801\uc778 \ud56d\ubaa9\uc774\ub2e4. \ud2b9\ud788 \ub85c\uadf8\ub97c STDOUT \ud639\uc740 STDERR\ub85c \uc4f0\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc778 \ud328\ud134\uc778 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc758 \uacbd\uc6b0 \ub85c\uadf8\uac00 node \ub85c\uceec\uc5d0 \uc800\uc7a5\uc774 \ub418\uace0 label \uc140\ub809\ud130\ub97c \ud1b5\ud574 \ud544\uc694\ud560 \ub54c \uc218\uc9d1 \ud560 \uc218 \uc788\uc9c0\ub9cc node\ub098 pod\uac00 \uc8fd\ub294 \uacbd\uc6b0\ub97c \ub300\ube44\ud558\uc5ec log stream\uc73c\ub85c \uc2e4\uc2dc\uac04(\ud639\uc740 \uc900\uc2e4\uc2dc\uac04)\uc73c\ub85c \ub85c\uadf8\ub97c \uc804\uc1a1 \ud574\uc57c \ud55c\ub2e4. \ub9cc\uc57d \ub85c\uadf8 \uac80\uc0c9\uc744 full-text search\ub85c \ud558\uace0 \uadf8\uac83 \uacb0\uacfc\ub97c \uac01\uc885 \ucc28\ud2b8\ub85c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \uc544\ub2c8\ub77c\uba74 ElasticSearch \ubcf4\ub2e4\ub294 \uacfc\uac10\ud558\uac8c \uc2dc\uacc4\uc5f4 \uae30\ubc18\uc73c\ub85c \ub85c\uadf8\ub97c \uc800\uc7a5\ud558\uace0 label\ub9cc indexing\uc744 \ud558\ub294 Loki \ub85c \uac00\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \uc27d\uac8c \ub9d0\ud558\uba74 \ud2b9\uc815 \uae30\uac04\ub3d9\uc548 \ud2b9\uc815 \uc774\ub984\uc73c\ub85c \uc2dc\uc791\ud558\ub294 \uc571 \uc11c\ubc84 \uc804\uccb4 \uc911 \ud2b9\uc815 \uc560\ub7ec \ud328\ud134\uc5d0 \ub300\ud574 top ranking\uc744 \ub9e4\uae30\ub294 \ub85c\uadf8 \uac80\uc0c9\uacfc \ucc28\ud2b8\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, production \uc640 web\uc758 label\uc744 \uac16\ub294 \uc11c\ubc84\ub4e4\uc758 \uc5d0\ub7ec \uc911\uc5d0 403\uc774 \uc788\ub294 \uc11c\ubc84\uc758 1\ubd84 \ub3d9\uc548 \ub85c\uadf8\ub97c \ud655\uc778\ud558\ub294 \uac83\ub9cc\uc73c\ub85c\ub3c4 \ucda9\ubd84\ud558\ub2e4\uba74 Loki\uac00 \ubcf4\ub2e4 \uc11c\ubc84 \ubc0f \uc6b4\uc601 \uce21\uba74\uc5d0\uc11c ELK \uc2a4\ud0dd\ubcf4\ub2e4 \ub9ac\uc18c\uc2a4\ub3c4 \ub35c \ub4e4\uba70 \ube44\uc6a9 \ud6a8\uc728\uc801\uc774\ub2e4. \ub610\ud55c Prometheus like\ud55c \ucee8\uc149\uacfc \ucffc\ub9ac \ud328\ud134\uc744 \uac16\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 Prometheus\ub85c \uc2dc\uc2a4\ud15c \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1\uc744 \ud558\uace0 \uc788\ub2e4\uba74 \ube60\ub974\uac8c Loki\ub97c \uc801\uc751 \ud560 \uc218 \uc788\ub2e4. \ubb3c\ub860 \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc \uc704\uc5d0\uc11c Managed Kubernetes Cluster\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4\uba74 \uc774\ubbf8 CloudWatch , StackDriver \uc5d0\uc11c \uc190\uc27d\uac8c \ub85c\uadf8\ub97c \uc218\uc9d1, \ucffc\ub9ac \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc81c\uacf5\ud558\ub294 \uae30\ubcf8 Log \ubaa8\ub2c8\ud130\ub9c1 \uc194\ub8e8\uc158\uc744 \uc4f0\ub294 \uac83\ub3c4 \uc88b\uc740 \ubc29\ubc95\uc774\ub2e4. \ubaa8\ub2c8\ud130\ub9c1(\ub300\uc2dc\ubcf4\ub4dc) : \ub300\uc2dc\ubcf4\ub4dc\ub294 \ub9d0\ud560 \uac83\uc774 \uc5c6\ub2e4. \ubaa8\ub4e0 \ubaa8\ub2c8\ud130\ub9c1(\uc2dc\uc2a4\ud15c, \ub85c\uadf8, APM)\uc744 \ube44\uc6a9 \uac71\uc815 \uc5c6\uc774 Datadog \uc4f0\ub294 \uc0c1\ud669\uc774 \uc544\ub2c8\ub77c\uba74 Grafana \uac00\uc790. \ub9cc\uc57d\uc5d0 \uae30\uc874\uc5d0 Telegraf\ub85c \uc218\uc9d1\ud558\uace0 InfluxDB, Kapacitor\ub97c \uc0ac\uc6a9 \uc911\uc774\ub77c\uba74 Chronograf \ub85c \ub300\uccb4 \ud560 \uc218 \uc788\uc73c\ub098 Grafana \uac00 \ucee4\ubba4\ub2c8\ud2f0 \ud06c\uae30\ub098 github star \uac1c\uc218\ub9cc \ube44\uad50\ud558\ub354\ub77c\ub3c4 \ube44\uad50 \ud560 \uc218 \uc5c6\uc744 \uc815\ub3c4\ub85c \ub192\ub2e4(\ub300\uc138\uc774\ub2e4). Tracing \uc11c\ube44\uc2a4\uac04 \uc5f0\uad00\uad00\uacc4\uac00 \ubcf5\uc7a1\ud558\uac8c \uc5f0\uacb0\ub418\uc5b4 \uc788\ub294 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\ub4dc \ud658\uacbd\uc5d0\uc11c\ub294 \ud2b9\ud788\ub098 \uc11c\ube44\uc2a4\ub4e4 \ub07c\ub9ac\uc758 \ud2b8\ub808\ud53d\uc744 \ucd94\ucc99\ud558\uc5ec \uc548\uc815\uc131 \ud639\uc740 \uc131\ub2a5 \uac1c\uc120\uc744 \uc704\ud55c \uc815\ud655\ud55c \uc9c0\uc810\uc744 \ucc3e\ub294 \uac83\ub3c4 \ub9e4\uc6b0 \uc911\uc694\ud558\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c Jaeger \uc640 ZipKin \uc774 \uc788\uc73c\uba70 \uae30\ub2a5\uc0c1\uc73c\ub85c\ub294 \ub300\ub3d9\uc18c\uc774 \ud558\ub098 Jager\uac00 OpenTracing \uae30\ub2a5\uc744 \ub124\uc774\ud2f0\ube0c \ud558\uac8c \uc9c0\uc6d0\ud558\uace0 \uc788\uc73c\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc788\ub294 CNCF \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uc131\uacf5\uc801\uc73c\ub85c Graduated \ud55c \ub300\ud45c\uc801\uc778 \ud504\ub85c\uc81d\ud2b8\uc774\ub2e4. \ucd9c\ucc98: Evolving Distributed Tracing at Uber Local Development \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uc544\ubb34\ub9ac CICD \ud658\uacbd\uc774 \uc798\ub418\uc5b4 \uc788\uace0 \ube14\ub8e8\uadf8\ub9b0 \ubc30\ud3ec \uc804\ub7b5 \uadf8\ub9ac\uace0 \ubaa8\ub2c8\ud130\ub9c1 \ud658\uacbd\uc774 \uc798\ub418\uc5b4 \uc788\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc744 \ub54c \ube60\ub974\uac8c \ub514\ubc84\uae45\uc744 \ub0b4 \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud560 \uac83\uc774\ub2e4. \ubb3c\ub860 port-fowarding\uc744 \ud1b5\ud574\uc11c \ud574\ub2f9 Pod\ub85c \ub4e4\uc5b4\uac00\uc11c \ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc9c0\ub9cc \ub098\uc758 \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \uc2e4\uc81c \ud2b8\ub808\ud53d\uc744 \ubc1b\uc544\uc11c \ub514\ubc84\uae45\ud558\uace0 \uc2f6\uac70\ub098 \ud639\uc740 \ubc30\ud3ec \ud558\uae30 \uc804\uc5d0 \uac04\ub2e8\ud788 Production\uc5d0\uc11c Pod \ud558\ub098\ub9cc \ud14c\uc2a4\ud2b8 \ud574\ubcf4\uace0 \uc2f6\ub2e4\uba74 Telepresence \ub97c \ud65c\uc6a9\ud558\uba74 \ub41c\ub2e4. Proxy \uc5ed\ud560\uc744 \ud574\uc8fc\ub294 telepresence traffic-agent \ucee8\ud14c\uc774\ub108\uac00 sidecar \ud328\ud134\uc73c\ub85c Pod\uc5d0 \ucd94\uac00\ub418\uc5b4 \uc694\uccad\uc5d0 \ub530\ub77c traffic\uc744 intercept \ud558\uc5ec traffic-manager\uc5d0\uac8c \uc804\ub2ec\ud558\uace0 \ub0b4 \ub85c\uceec\uc5d0 \uc788\ub294 telepresence daemon\uc744 \ud1b5\ud574 \ub85c\uceec app\uc73c\ub85c \ud2b8\ub808\ud53d\uc744 \ud3ec\uc6cc\ub529\uc2dc\ucf1c\uc900\ub2e4. \ud328\ud0a4\uc9c0 \ubc0f \uc124\uc815 \uad00\ub9ac \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec\ud558\uae30 \uc704\ud574 \uba87\uac00\uc9c0\uc758 \ubc29\ubc95\uc774 \uc788\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c kubectl manifest\ub85c \ub098\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ub300\ud55c \uad6c\uc131\uc815\ubcf4\ub97c yaml\ud615\ud0dc(manifest)\ub85c \ub9cc\ub4e4\uac8c \ub41c\ub2e4. \ud558\uc9c0\ub9cc \uad6c\uc131\uc815\ubcf4\uac00 \ubcf5\uc7a1\ud574\uc9c8\uc218\ub85d \ub9e4\ubc88 kubectl apply \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud558\ub294 \uac83 \uc790\uccb4\uac00 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc791\uc5c5\uc774\uba70 \uc0ac\ub78c\uc758 \uc2e4\uc218\ub85c \ud2b9\uc815 \ub9ac\uc18c\uc2a4\uac00 \uc81c\uc678\ub418\uace0 \ubc30\ud3ec\ub418\uae30\ub3c4 \ud55c\ub2e4. \ud2b9\ud788\ub098 \ub611\uac19\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud558\ub098\uc758 \ud658\uacbd\uc774 \uc544\ub2cc \uc5ec\ub7ec \ud658\uacbd\uc5d0 \uc124\uc815\ub9cc \ubc14\uafd4\uc11c \ubc30\ud3ec\ud558\ub294 \uacbd\uc6b0 \uc911\ubcf5\ub418\ub294 \ucf54\ub4dc\uac00 \ub9e4\uc6b0 \ub298\uc5b4\ub098\uac8c \ub41c\ub2e4. \uc7ac\uc0ac\uc6a9\uc131\uc744 \ub192\uc774\uace0\uc790 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c \ud639\uc740 \ud15c\ud50c\ub9bf \ub3c4\uad6c \uc778 Helm \uc774 \ub098\uc624\uac8c \ub418\uace0 patch\uc640 \uac19\uc774 \ud2b9\uc815 \ud658\uacbd\uc5d0\ub9cc \uc801\uc6a9\ub418\uc5b4\uc57c \ud558\ub294 \ucd94\uac00\uc801\uc778 manifest \ub300\ud574 \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \uc124\uc815 \uad00\ub9ac \ub3c4\uad6c\uc778 Kustomize \uac00 \ub4f1\uc7a5\ud558\uac8c \ub41c\ub2e4. Helm\uacfc Kustomize\uac00 \uc11c\ub85c \ub300\uccb4\ud558\ub294 \uc194\ub8e8\uc158\uc73c\ub85c \uc0dd\uac01 \ud560 \uc218\ub3c4 \uc788\uc9c0\ub9cc helm\uc5d0\uc11c\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud15c\ud50c\ub9bf \ud300\ub9cc \ud558\uace0(chart\ub85c\ub9cc \ub9cc\ub4e4\uace0) Kustomize\uc5d0\uc11c helm chart\ub97c overlaying \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 helm \uc790\uccb4\ub3c4 kustomize\ub85c \uc720\uc5f0\ud558\uac8c \ubc30\ud3ec \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4. \ub9c8\uc9c0\ub9c9\uc73c\ub85c AWS Solution Architect \ucc98\ub7fc CNCF Landscape\uc758 \uc194\ub8e8\uc158\ub4e4\uc744 Architecting \ud574\uc8fc\uace0 on-boarding\ub3c4 \uc2dc\ucf1c\uc8fc\ub294 \uc0ac\ub78c\uc774 \uc788\uc73c\uba74 \uc88b\uaca0\uc73c\ub098 \uc544\uc27d\uac8c\ub3c4 \uadf8\ub7f0 \uc0ac\ub78c\uc740 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294\ub2e4. (\uc2e4\uc81c\ub85c\ub294 \uc788\uc73c\ub098 \ub0b4 \uc8fc\uc704\uc5d0 \uc5c6\ub2e4!) \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee8\uc124\ud305 \ud30c\ud2b8\ub108\ub77c\ub294 \ud68c\uc0ac\ub4e4\uc774 \uc0dd\uaca8 \ub098\uace0 \uc788\uc73c\ub098 \uc5b4\ub290\uc815\ub3c4 \uc5ed\ub7c9\uc744 \ubcf4\uc720\ud558\uace0 \uc788\ub294\uc9c0\ub294 \ud45c\uba74\uc0c1\uc73c\ub85c \ud655\uc778 \ud558\uae30 \uc5b4\ub835\ub2e4. \uac1c\uc778\uc801\uc73c\ub85c Jetstack \uc774\ub098 WeaveWorks \ucc98\ub7fc \ubcf8\uc778\ub4e4\uc758 \uc194\ub8e8\uc158\uc744 \uacc4\uc18d CNCF\uc5d0 \uae30\uc5ec \ud558\uba74\uc11c \ucee8\uc124\ud305\uc744 \ud558\ub294 \ud68c\uc0ac\uac00 \uc5ed\ub7c9\uc774 \uc788\ub294 \uacf3\uc774\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4. \ub9c8\uc9c0\ub9c9\uc73c\ub85c \ud56d\uc0c1 \uac15\uc870\ud558\ub294 \uac83\uc774\uc9c0\ub9cc \ud604\uc7ac \ud2b8\ub79c\ub4dc\uc778 \ub3c4\uad6c\ub9cc \ub3c4\uc785\ud55c\ub2e4\uace0 \ub05d\uc774 \uc544\ub2c8\uba70 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\uc6a9\uc790(stakeholder)\ub4e4\uc5d0\uac8c \uc694\uad6c\uc0ac\ud56d \uc870\uc0ac\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \ud574\uc11c \uc2dc\uc2a4\ud15c\uc744 \uace0\ub3c4\ud654\uc2dc\ucf1c\uc57c \ud55c\ub2e4. \ub610\ud55c \uac19\uc774 \uac1c\ubc1c, \uc6b4\uc601\ud574 \ub098\uac00\ub294 \ub3d9\ub8cc(placeholder)\ub4e4\uacfc \uc815\uae30\uc801\uc73c\ub85c \uc2dc\uc2a4\ud15c\uc744 \uac1c\uc120\ud558\uace0 \ud568\uaed8 \ub808\ubca8\uc5c5 \ud574\uc57c\uc9c0\ub9cc \uc548\uc815\uc801\uc73c\ub85c \ubaa8\ub358 \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\uccd0\ub97c \ubc1c\uc804\uc2dc\ucf1c\ub098\uac08 \uc218 \uc788\uc744 \uac83\uc774\ub2e4. Star \uc774 \uae00\uc774 \uc720\uc6a9\ud558\uc600\ub2e4\uba74 \u2b50 Star\ub97c, \ud83d\udcac 1:1 \uc9c8\ubb38\uc774\ub098 \uae30\uc220 \uad00\ub828 \ubb38\uc758\uac00 \ud544\uc694\ud558\uc2e0 \ubd84\ub4e4\uc740 \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \ucd94\uac00 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4.\ud83e\udd17","title":"5.1 Essential Mgmt Components Architecture"},{"location":"hello-kubernetes/section05/k8-essential-components/#51-kubernetes-essential-component","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ud544\uc218 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad00\ub9ac \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \uc774\ud574\ud558\uace0 \uad6c\uc131\ud560 \ud544\uc694\uac00 \uc788\ub2e4.","title":"5.1 Kubernetes Essential Component"},{"location":"hello-kubernetes/section05/k8-essential-components/#kubernetes-components","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uad6c\uc131 \ud6c4 \uace7\ubc14\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f8 \uc218 \uc788\ub294 \uac83\uc740 \uc544\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uba74 \ub9ac\ub205\uc2a4 \uad6c\uc131 \ud6c4\uc5d0 user\ub97c \ub9cc\ub4e4\uace0 ldap\uc744 \uc5f0\ub3d9\ud558\uace0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ub9de\ub294 \ub2e4\uc591\ud55c runtime\uc744 \uc124\uce58\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc5f0\ub3d9\ud574\uc57c \ud558\ub294 \uac83\ucc98\ub7fc \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\uc131 \ud6c4\uc5d0 \uadf8 \uc704\uc5d0 \ub2e4\uc591\ud55c k8s components\ub97c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4. CNCF(Cloud Native Cloud Foundation)\uc5d0\uc11c \ub2e4\uc591\ud55c \uc18c\ud504\ud2b8\uc6e8\uc5b4\ub4e4\uc744 sandboxing, inclubating\ud558\uace0 graduating \uc2dc\ud0a4\uace0 \uc788\uc73c\uba70 \ub2e4\uc591\ud55c \ub3c4\uad6c\ub4e4, \uc11c\ube44\uc2a4\ub4e4\uc774 \uc0dd\uae40\uc5d0 \ub530\ub77c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc0dd\ud0dc\uacc4\uac00 \uc5c4\uccad\ub098\uac8c \ubc1c\uc804\ud558\uace0 \ub9e4 \uc21c\uac04 \uc9c4\ud654\ub418\uace0 \uc788\ub2e4. \uc544\ub798\ub294 2022\ub144 \ud604\uc7ac(1\uc6d4) CNCF Landscape \uc0dd\ud0dc\uacc4 \ubaa8\uc2b5\uc774\ub2e4. \ucd9c\ucc98: CNCF Landscape Kubernetes\ub97c \ube44\ub86f\ud574 \uc720\uba85\ud55c \ub3c4\uad6c \ud639\uc740 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\ub85c\ub294 \ud328\ud0a4\uc9d5 \uad00\ub9ac Helm, CI/CD \ub3c4\uad6c\uc778 ArgoCD, \ud2b8\ub808\ud53d \uad00\ub9ac \ub3c4\uad6c\uc778 Istio, \uc11c\ube44\uc2a4 \ud504\ub85d\uc2dc Envoy\ub4e4\uc774 CNCF \uc0dd\ud0dc\uacc4 \uc548\uc5d0\uc11c \uacc4\uc18d \ucf54\ub4dc\ub97c \uae30\uc5ec\ud558\uace0 \ubc1c\uc804 \uc911\uc774\ub2e4. \uc218\ub9ce\uc740 \uc11c\ube44\uc2a4\uac00 \uacc4\uc18d \uc774\uacf3 \uc548\uc5d0\uc11c \uc0dd\uaca8\ub098\uace0 \uc788\uc73c\uba70 \ud2b8\ub79c\ub4dc\ub97c \ub530\ub77c\uac00\uae30 \uc704\ud574 \uc8fc\uc758 \uae4a\uac8c \ubcf4\uace0 \uc788\uc5b4\uc57c \ud55c\ub2e4. \uc774\uc81c \ud55c \uac00\uc9c0 \uc758\ubb38\uc810\uc774 \uc0dd\uae38 \uc218 \uc788\ub2e4. \uadf8\ub798\uc11c \ub0b4\uac00 \"\ubb34\uc5c7\uc744 \uc368\uc57c \ud558\uc9c0?\" \ud639\uc740 \"\ub0b4\uac00 \ud558\ub098\uc529 \ub2e4 \uac80\uc99d(PoC)\ud574\uc11c \ub098\uc5d0\uac8c \ub9de\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc9c1\uc811 \ucc3e\uc544\uc57c \ud558\ub294 \uac74\uac00?\" \uc6b0\uc120 \uacb0\ub860 \ubd80\ud130 \ub9d0\ud558\uc790\uba74 \ub9de\ub2e4 \ud558\ub098\uc758 \uc815\ub2f5\uc740 \uc5c6\uc73c\ubbc0\ub85c \uc9c1\uc811 \uac80\uc99d\ud574\ubcf4\uace0 \ubcf8\uc778 \uc11c\ube44\uc2a4\uc5d0 \ub9de\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ucc3e\uc544\uc57c\ud55c\ub2e4. \uadf8\ub7fc \uadf8\ub2e4\uc74c \uc9c8\ubb38\uc740 \"\ub108\ubb34 \ub9ce\uc740\ub370 \uc5b4\ub514\uc11c\ubd80\ud130 \uc5b4\ub5bb\uac8c \uc2dc\uc791\ud574\uc57c \ud558\uc9c0?\" \uac00 \ub098\uc62c \uc218\ubc16\uc5d0 \uc5c6\uc744 \uac83\uc774\ub2e4. \ud604\uc5c5\uc5d0\uc11c \uc77c\ud558\uba74\uc11c \uc9c0\uc778\ub4e4\uc5d0\uac8c \uac00\uc7a5 \ub9ce\uc774 \ub4e4\uc5c8\ub358 \uc9c8\ubb38\uc774\uae30\ub3c4 \ud558\uace0 \uc0dd\ud0dc\uacc4 \uc790\uccb4\uac00 \ubc29\ub300\ud558\ub2e4 \ubcf4\ub2c8 \uc2e4\uc81c\ub85c \uae38\uc744 \uc783\uae30 \uc27d\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc5b4\ub835\ub2e4\uace0 \ub9d0\ud558\ub294 \ubd80\ubd84 \uc911 \ud558\ub098\uac00 \ubc14\ub85c \uc774\uac83\uc774\ub2e4. \ud604\uc5c5\uc5d0\uc11c\ub3c4 \uac00\uc7a5 \ub9ce\uc774 \uacaa\ub294 \ud5c8\ub4e4\uc774\uace0 \uc5b4\ub5bb\uac8c \ubcf4\uba74 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\ucd95 \ucd08\uae30\uc5d0 \uac00\uc7a5 \ub9ce\uc740 \uc2dc\uac04\uc744 \uc9d1\uc911\ud574\uc11c \ud574\uc57c \ud558\ub294 \ubd80\ubd84\uc774\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \ub41c\ub2e4\ub294 \ub9c8\ubc95\uc758 \uad6c\uc131 \ud45c\uc900\uc740 \uc5c6\uc73c\ub098 \ud604\uc5c5\uc5d0\uc11c \uc2e4\uc81c\ub85c \uad6c\uc131\ud558\uace0 \uc6b4\uc601\ud558\uba74\uc11c \uc774\ub7f0 \uac74 \ud544\uc218\ub85c \uc788\uc73c\uba74 \uc88b\uc740 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc5d0 \ub300\ud574\uc11c \uac04\ub7b5\ud558\uac8c \uc544\ub798\uc5d0\uc11c \uc815\ub9ac\ud574 \ubcf8\ub2e4.","title":"Kubernetes Components \ub780?"},{"location":"hello-kubernetes/section05/k8-essential-components/#kubernetes-essential-component","text":"\ub2e4\uc591\ud55c \ub3c4\uad6c\ub97c \uac80\ud1a0\ud574\ubcf4\uace0 \ud504\ub7ec\ub355\uc158\uc5d0 \uc801\uc6a9\ud574 \ubcf4\uba74\uc11c \uc774 \uc815\ub3c4\uc758 \ucef4\ud3ec\ub10c\ud2b8\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\uc131 \ud6c4 Week 1\uc5d0 \ud544\uc218\ub85c \ucd94\uac00\ud574\uc57c \ud55c\ub2e4\uace0 \uc0dd\uac01\ud558\ub294 \ubaa9\ub85d\uc774\ub2e4. * \uc0c1\uc138 \uadf8\ub9bc \ubcf4\ub4dc \ubc14\ub85c\uac00\uae30 \ube44\ubc00\ubc88\ud638: \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \uc5d0\uc11c \ud655\uc778","title":"Kubernetes Essential Component"},{"location":"hello-kubernetes/section05/k8-essential-components/#_1","text":"Ingress\ub294 \uc544\ub798 \uadf8\ub9bc\uacfc \uac19\uc774 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4. \ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70 \uc774\uac83\uc740 AWS\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9 \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140\ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \uc624\ud508\uc18c\uc2a4 Ingress Controller\ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4. Ingress-Nginx \uac00 \uac00\uc7a5 \ub300\ud45c\uc801\uc774\uba70 \uc2e0\ub8b0 \ud560\uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc774\ub2e4. \uc131\ub2a5 \ud29c\ub2dd\uc774\ub098 Rate limit, JWT vailidation\uc744 Proxy(\ud639\uc740 LB \ub808\ubca8)\uc5d0\uc11c \ud558\uae30\ub97c \uc6d0\ud55c\ub2e4\uba74 \uacf5\uc2dd\uc801\uc73c\ub85c Nginx\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Nginx-Ingress \ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc624\ub798\ub41c \uae00\uc774\uc9c0\ub9cc \ub2e4\uc591\ud55c Ingress Controller\uc5d0 \ub300\ud574 \ube44\uad50\ud55c medium \ube14\ub85c\uadf8 \ub3c4 \uc77d\uc5b4 \ubcf4\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4.","title":"\uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec"},{"location":"hello-kubernetes/section05/k8-essential-components/#dns","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 ingress \ud639\uc740 service\ub97c \ud1b5\ud574 \uc678\ubd80\ub85c \uc11c\ube44\uc2a4\ub97c \ub178\ucd9c \uc2dc\ucf30\ub2e4\uba74 \uadf8 LB Endpoint \uc774\ub984(\ud639\uc740 IP) \ub808\ucf54\ub4dc\ub97c DNS ZONE\uc5d0 \ub204\uad70\uac00\ub294 \ub4f1\ub85d\uc2dc\ucf1c\uc918\uc57c \ud55c\ub2e4. \uc608\ub97c \ub4e4\uba74 EKS\uc5d0\uc11c Ingress\ub97c \uc0dd\uc131\ud558\uba74 ALB endpoint\uac00 \ub0b4 External-IP\ub85c \ub9e4\ud551\uc774 \ub418\ub294\ub370 \uc774 External-IP\ub97c \ub0b4 \ub3c4\uba54\uc778 DNS\uc5d0 \uc6d0\ud558\ub294 Subdomain\uc73c\ub85c \uc0ac\uc6a9\ud558\ub824\uba74 \uc9c1\uc811 Route53\uc5d0 \ucd94\uac00\ud574 \uc918\uc57c \ud55c\ub2e4. \ub9e4\ubc88 \uc11c\ube44\uc2a4\uac00 \uc62c\ub77c\uc62c \ub54c \ub9c8\ub2e4 \uc218\ub3d9\uc73c\ub85c \ub4f1\ub85d\ud558\ub294 \uac83\uc740 \ud6a8\uc728\uc801\uc774\uc9c0 \ubabb\ud558\uae30\uc5d0 \uc774\uac83\uc744 External-DNS \ub85c \uc790\ub3d9\ud654 \uc2dc\ucf1c\uc57c \ud560 \ud544\uc694\uac00 \uc788\ub2e4.","title":"DNS \uad00\ub9ac"},{"location":"hello-kubernetes/section05/k8-essential-components/#_2","text":"\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc678\ubd80\ub85c \ub178\ucd9c \uc2dc\ucf30\ub2e4\uba74 HTTPS \ud1b5\uc2e0\uc744 \uc704\ud574 LB\uc5d0\uc11c SSL termination\uc744 \uc2dc\ud0a4\ub3c4\ub85d \uc138\ud305 \ud574\uc918\uc57c \ud55c\ub2e4. AWS, GCP\uc640 \uac19\uc740 \uc77c\ubc18\uc801\uc778 \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c\ub294 \ud074\ub77c\uc6b0\ub4dc LB\uc5d0 SSL \uc778\uc99d\uc11c\ub97c \uc9c1\uc811 \uc784\ud3ec\ud2b8 \ud558\uace0 \uad00\ub9ac \ud560 \uc218 \uc788\uc9c0\ub9cc, \ub9e4\ubc88 \uc778\uc99d\uc11c \uac31\uc2e0 \uc77c\uc815\uc5d0 \ub9de\ucdb0\uc11c \uc218\ub3d9\uc73c\ub85c \ud574\uc918\uc57c \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud55c\ub2e4. \ubb3c\ub860 \uc774 \ud504\ub85c\uc138\uc2a4\ub97c \uc790\ub3d9\ud654\ud560 \uc218\ub294 \uc788\uc73c\ub098 \uc778\uc99d \uae30\uad00(Certificate Authority e.g. DigiCert, Comodo\ub4f1)\uc5d0 API \uc5f0\ub3d9\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uac00 \ub9ce\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \ub9e4\ubc88 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \uc778\uc99d\uc11c\ub97c \ubc1c\uae09(issue), \uac31\uc2e0(re-issue)\ud558\uace0 \uc218\ub3d9\uc73c\ub85c TLS\ub97c Secrets\uc73c\ub85c \ub123\ub294 \uac83\uc740 \ub9e4\uc6b0 \ube44\ud6a8\uc728\uc801\uc774\ub2e4. \uc774 \ud504\ub85c\uc138\uc2a4\ub97c \uc790\ub3d9\ud654\ud558\uae30 \uc704\ud574 Cert-Manager \ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\uc73c\uba70 Cert-Manager\ub294 \uac1c\ubc29\ud615 \uc778\uc99d \uae30\uad00\uc778 Let's Encrypt \uc5d0 \ub9e4\ubc88 \uc778\uc99d\uc11c \uac31\uc2e0 \uae30\uac04\uc5d0 \ub9de\ucdb0\uc11c \uc778\uc99d\uc11c\ub97c \uc7ac\uac31\uc2e0 \uc2dc\ud0a4\uba74\uc11c Secerts\uc5d0 TLS key\ub97c \uc5c5\ub370\uc774\ud2b8 \uc790\ub3d9\uc73c\ub85c \ud574\uc8fc\uae30 \ub54c\ubb38\uc5d0 \uc778\uc99d\uc11c \ub9cc\ub8cc\uc5d0 \ub300\ud55c \uac71\uc815\uc744 \ud560 \ud544\uc694\uac00 \uc5c6\ub2e4. \ucd9c\ucc98: Banzai Cloud - Cert management on kubernetes","title":"\uc778\uc99d\uc11c \uad00\ub9ac"},{"location":"hello-kubernetes/section05/k8-essential-components/#continuos-delivery","text":"\ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\uac00 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud1b5\ud574\uc11c \uc815\uc758\ud558\uace0 declarative(\uc120\uc5b8\ud615)\ud558\uac8c \ubc30\ud3ec \ubc0f \uad00\ub9ac\ub97c \ud560 \uc218 \uc788\uac8c \ub428\uc5d0 \ub530\ub77c GitOps \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \ub300\uc138\uac00 \ub418\uace0 \uc788\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c ArgoCD \uc640 FluxCD \uac00 GitOps \uc804\ub7b5\uc73c\ub85c \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec\ud558\uace0 \uc5c5\ub370\uc774\ud2b8 \ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc8fc\ub294 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uad00\ub9ac \ubc0f CD(Continuous Delivery)\ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \uc544\ub798 \uadf8\ub9bc\uc740 Pull Based\ub85c \ubc30\ud3ec \ud558\ub294 GitOps \uc804\ub7b5 \ubc29\ubc95\uc774\ub2e4. \ud300 \ud639\uc740 \ud504\ub85c\uc81d\ud2b8\ubcc4\ub85c \ud6a8\uacfc\uc801\uc778 Flow\uac00 \uac01\uac01 \ub2e4\ub974\ubbc0\ub85c \ubc30\ud3ec \uc804\ub7b5\uc5d0 \ub300\ud574 \ucda9\ubd84\ud788 \ud1a0\ub860\ud55c \ud6c4 ArgoCD \ud639\uc740 FluxCD\ub97c \ub3c4\uc785\ud558\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \ucd9c\ucc98: GitOps tech blog \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4\ub97c kustomize \ud639\uc740 helm\uc73c\ub85c \uad6c\uc131\ud558\ub294 \uacbd\uc6b0\ub294 FluxCD\uac00 \ubcf4\ub2e4 native \ud558\uac8c \uc4f8 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc73c\ub098 WebUI\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc544 \uc5ec\ub7ec \uc0ac\uc6a9\uc790\ub97c \uc218\uc6a9\ud574\uc57c\ud558\ub294 Multi-tenecy Cluster \uc77c \uacbd\uc6b0\ub294 ArgoCD\uac00 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 CLI, UI\uac00 \uc788\uc5b4\uc11c \ubcf4\ub2e4 \uc801\ud569 \ud560 \uc218 \uc788\ub2e4.","title":"Continuos Delivery"},{"location":"hello-kubernetes/section05/k8-essential-components/#_3","text":"Ingress\ub85c \uc678\ubd80\uc5d0\uc11c \ub4e4\uc5b4\uc624\ub294 \ud2b8\ub808\ud53d\uc5d0 \ub300\ud55c \uc81c\uc5b4\ub97c \ud558\uc600\ub2e4\uba74 \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc801\uc73c\ub85c \ud2b8\ub808\ud53d\uc758 \ud750\ub984 \ubc0f \uc81c\uc5b4\uac00 \ud544\uc694\ud55c \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud55c\ub2e4. \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \uc571\uacfc \uac19\uc774 \ub2e4\uc591\ud55c \ubc31\uc5d4\ub4dc \uc11c\ube44\uc2a4\ub4e4\uc774 \uc11c\ub85c \uc720\uc5f0\ud558\uac8c \ud1b5\uc2e0\ud558\uace0 \uc2ec\ub9ac\uc2a4 \ud558\uac8c Failover\uac00 \ub418\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0 \ud2b8\ub808\ud53d\uc744 \uc138\uc138\ud558\uac8c \uc81c\uc5b4(Fine-grained control)\uc774 \ud544\uc694\ud558\uae30\ub3c4 \ud558\ub2e4. \uc608\ub97c \ub4e4\uba74 Istio \ub97c \ud1b5\ud574\uc11c \ucee4\uc2a4\ud140 \ud55c \ub77c\uc6b0\ud305 \uaddc\uce59\uc774\ub098 Rate Limit\uacfc \uac19\uc740 \uc815\ucc45\ub4e4\uc744 \ucd94\uac00 \ud560 \uc218 \uc788\uc73c\uba70 \ubaa8\ub4e0 \ud074\ub7ec\uc2a4\ud130\uc5d0 Ingress/Engress \ud2b8\ub808\ud53d\uc744 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ucd94\uc801 \ud560 \uc218 \uc788\ub2e4. \uc774\ub7f0 \uae30\ub2a5\uc744 \uad6c\ud604\ud558\uae30 \uc704\ud574 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \ubcc4\ub3c4\uc758 \ucf54\ub4dc\ub97c \ucd94\uac00\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c Linkerd \ud639\uc740 Envoy Proxy \uac19\uc740 \uc11c\ube44\uc2a4 \ub9e4\uc26c\ub97c \ud1b5\ud574\uc11c Sidecar \ubc29\uc2dd\uc73c\ub85c \uac01 Pod\uc5d0 proxy\uac00 \ucd94\uac00\ub418\uc5b4 \uac01 \uc11c\ube44\uc2a4 \uac04 \uc5f0\uad00 \uad00\uacc4\ub97c \ud30c\uc545\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\ud55c\ub2e4.","title":"\ud2b8\ub808\ud53d \uad00\ub9ac \ubc0f \uc11c\ube44\uc2a4 \ub9e4\uc26c"},{"location":"hello-kubernetes/section05/k8-essential-components/#_4","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 cloud agnostic \ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \ubc18\ub300\ub85c \uadf8\ub9cc\ud07c \ucd94\uc0c1\ud654\ub41c \uc601\uc5ed\uc774 \ub9ce\ub2e4 \ubcf4\ub2c8 \uc5b4\ub514\uc11c \uc5b4\ub5a4 \uac83\uc744 \uc5b4\ub5bb\uac8c \ubc31\uc5c5\ud574\uc57c \ud558\ub294\uc9c0 \uc54c\uae30 \uc5b4\ub824\uc6b4 \ubd80\ubd84\uc774 \uc788\ub2e4. Stateless \ud55c \uc11c\ube44\uc2a4\ub4e4 \uac19\uc740 \uacbd\uc6b0\ub294 GitOps \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \uc798 \uc815\ub9bd\ub418\uc5b4 \uc788\ub2e4\uba74 \ubc14\ub85c ArgoCD, FluxCD\ub85c \ub2e4\uc2dc \ubc30\ud3ec\ud558\uba74 \ub418\uae30 \ub54c\ubb38\uc5d0 \ubc31\uc5c5\uc5d0 \uad00\ud574 \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uc544\ub3c4 \ub418\uc9c0\ub9cc DB\ub098 Vault \uac19\uc740 State\uac00 \uc911\uc694\ud55c \uc11c\ube44\uc2a4\ub4e4\uc740 PersistentVolume\uc5d0 State\ub97c \uc800\uc7a5\ud558\uace0 \ub370\uc774\ud130\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \ubc31\uc5c5\uc744 \ud574\uc57c \ud55c\ub2e4. VMWare(\uc774\uc804 Pivotal)\uc5d0\uc11c \uc624\ud508\uc18c\uc2a4\ud654\ud55c Velero \uac00 \ud604\uc7ac\uae4c\uc9c0\ub294 \uac00\uc7a5 \uc190\uc27d\uac8c \ubc31\uc5c5\ud558\uace0 \ub9ac\uc18c\uc2a4\ub4e4\uc744 \ubcf5\uc6d0\ud560 \uc218 \uc788\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \ub2f9\uc5f0\ud558\uaca0\uc9c0\ub9cc \uc778\ud504\ub77c, \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub808\uc774\uc5b4\uc758 \ubc31\uc5c5\uc774\uae30 \ub54c\ubb38\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub808\ubca8\uc758 \ub370\uc774\ud130 \ubc31\uc5c5\uc740 \ucd94\uac00\ub85c \uac01\uc790 \uace0\ubbfc\ud574\uc57c \ud558\ub294 \ubd80\ubd84\uc774\ub2e4.","title":"\ubc31\uc5c5 \uad00\ub9ac"},{"location":"hello-kubernetes/section05/k8-essential-components/#_5","text":"\ubaa8\ub4e0 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 API \uc624\ube0c\uc81d\ud2b8 \ub4e4\uc744 \uc218\ub3d9\uc73c\ub85c \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud558\ub294 \uac83\uc740 \ub9e4\uc6b0 \ud798\ub4e0 \uc77c\uc774\ub2e4. \ud2b9\ud788\ub098 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ud5c8\uc6a9\ud558\uae30\ub85c \ud639\uc740 \ud558\uc9c0 \uc54a\uae30\ub85c \ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc815\ucc45\uc744 \uc778\uc9c0\ud558\uc9c0 \ubabb\ud55c \uc0c1\ud0dc\uc5d0\uc11c \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uc6d0\ud558\ub294 \uc124\uc815\uc73c\ub85c \ubc30\ud3ec\ud558\ub2e4 \ubcf4\uba74 \ucd94\ud6c4 \uc6b4\uc601 \uc2dc \uc5b4\ub824\uc6c0\uc774 \ubc1c\uc0dd \ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uba74 \uac1c\ubc1c\ud300\uc774 \uc2e4\uc218\ub85c \ud68c\uc0ac\uc5d0\uc11c \uc815\ud55c environment label\uc744 \ub123\uc9c0 \uc54a\uace0 \ubc30\ud3ec\ud55c\ub2e4\uba74 \ucd94\ud6c4\uc5d0 label\ub85c prometheus, loki\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1 \ub300\uc0c1\uc73c\ub85c \ucd94\uac00\uc2dc\ud0ac \uc218 \uc5c6\ub2e4. \ubb3c\ub860 \uc218\ub3d9\uc73c\ub85c \ub2e4\uc2dc \ucd94\uac00\ud558\uba74 \ub418\ub294 \ubd80\ubd84\uc774\ub098 \uc774\ub7f0 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc6b4\uc601 \uc5c5\ubb34\ub97c \ucd5c\uc18c\ud654\ud558\uae30 \uc704\ud574\uc11c\ub294 \ubc30\ud3ec \ud639\uc740 API \uc694\uccad \ub2e8\uacc4\ubd80\ud130 \uc81c\ud55c\uc744 \uc2dc\ud0a4\ub294 \ubc29\ubc95\uc774 \uc788\ub2e4. GateKeeper \ub098 Kyverno \uac00 Policy\uc5d0 \ub300\ud574\uc11c \ubc30\ud3ec \ud558\uae30 \uc804\uc5d0 \uc0ac\uc804 \uac80\uc99d(Validation)\ud558\uace0 \ud544\uc694\uc5d0 \ub530\ub77c\uc11c\ub294 \uc815\ucc45\uc5d0 \ub9de\ub3c4\ub85d \ubcc0\uc870(Mutation)\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ub808\ud3ec\ud305 \uac00\ub2a5\ud558\ub2e4. \uc8fc\uc694\ud55c \uae30\ub2a5(Validation, Mutation, Montoring)\uc740 \ub300\ubd80\ubd84 \ube44\uc2b7\ud558\uace0 GateKeeper\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ubfd0\ub9cc\uc774 \uc544\ub2c8\ub77c \ub2e4\uc591\ud55c \uc815\ucc45\uc744 \uac80\uc99d \uac00\ub2a5\ud55c \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \ubcc4\ub3c4\uc758 \ubb38\ubc95\uc744 \ubc30\uc6cc\uc57c \ud55c\ub2e4\ub294 \ub2e8\uc810\uc774 \uc788\ub2e4. Kyverno\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 yaml \ud615\ud0dc\ub85c \uc791\uc131\uc774 \ub418\uae30 \ub54c\ubb38\uc5d0 \ube60\ub974\uac8c \ub3c4\uc785 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.","title":"\uc815\ucc45 \uad00\ub9ac"},{"location":"hello-kubernetes/section05/k8-essential-components/#_6","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uacfc \uac19\uc740 \ubd84\uc0b0\ud615 \uc2dc\uc2a4\ud15c \ud658\uacbd\uc5d0\uc11c\ub294 \ub9ac\uc18c\uc2a4\ub97c \uc11c\ubc84 \uc774\ub984 \ud639\uc740 IP\ub85c \uae30\uc900\uc73c\ub85c \uad00\ub9ac\ud558\ub294 \uc804\ud1b5\uc801\uc778 \ubaa8\ub2c8\ud130\ub9c1 \ubc29\ubc95\ubcf4\ub2e4\ub294 tag \ud639\uc740 label \uae30\ubc18\uc73c\ub85c \uc11c\ube44\uc2a4\uc758 \uc804\uccb4 \uc0ac\uc6a9\ub7c9, \uac00\uc6a9\ub7c9\uacfc \uac19\uc740 \ud074\ub7ec\uc2a4\ud130 \uad00\uc810\uc758 \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \uac83\uc774 \ub354\uc6b1 \uc801\ud569\ud558\ub2e4. \ud2b9\ud788 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 4\uac00\uc9c0 \ud56d\ubaa9\uc758 \uad00\uc810\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1\uc774 \ud544\uc694\ud558\ub2e4. Metric: \uc0ac\uc6a9\ub7c9(Utilization), \ud3ec\ud654\ub3c4(Saturation), \uc560\ub7ec(Error), \uac00\uc6a9\ub7c9(Availability) \ub4f1 Event: \ub9b4\ub9ac\uc988 \ubc84\uc804(Release version), \ud604\uc7ac \ubc84\uc804\uc758 \uac00\ub3d9 \uc2dc\uac04(Uptime for current version), \ud655\uc7a5 \uc774\ubca4\ud2b8(Scaling event) \ub4f1 Log: \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub85c\uadf8(Application log), \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub85c\uadf8(Kubernetes log) \ub4f1 K8S Resource: \ud074\ub7ec\uc2a4\ud130 \uc6a9\ub7c9(Cluster capacity), \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \ub9ac\uc18c\uc2a4 \uc6a9\ub7c9(Namespace resource) \ub4f1 \ubaa8\ub2c8\ud130\ub9c1(\uc2dc\uc2a4\ud15c) : \uc2dc\uc2a4\ud15c \uba54\ud2b8\ub9ad \uac19\uc740 \uacbd\uc6b0\ub294 \ub300\ubd80\ubd84 \uc2dc\uacc4\uc5f4(time series) \ub370\uc774\ud130\uc774\uae30 \ub54c\ubb38\uc5d0 \ud655\uc7a5\uc131\uc758 \uc81c\ud55c \uc774 \uc788\ub294 rrdtool \uacfc \uac19\uc740 \ubc29\uc2dd \ubcf4\ub2e4\ub294 NoSql \ud639\uc740 \uc2dc\uacc4\uc5f4 \ub370\uc774\ud130\uc5d0 \ucd5c\uc801\ud654\ub41c Prometheus , InfluxDB , \ud639\uc740 TSDB \uac19\uc740 time series database\ub97c \uc4f0\ub294 \uac83\uc774 \ud6a8\uacfc\uc801\uc774\ub2e4. \uc774 \uc911\uc5d0\uc11c\ub3c4 Prometheus\uac00 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\ub4dc \ud658\uacbd\uc5d0\uc11c \ub3d9\uc801\uc73c\ub85c \ub370\uc774\ud130\ub97c exporter \ub4e4\uc744 \ud1b5\ud574 \uc218\uc9d1\ud560 \uc218 \uc788\uace0 \ucee4\uc2a4\ud140\ud558\uac8c \ucd94\uac00 \uac1c\ubc1c \uac00\ub2a5\ud558\uba70 \ub2e4\ucc28\uc6d0\uc758 \ucffc\ub9ac \ub97c \uc9c0\uc6d0\ud55c\ub2e4. \ub610\ud55c AlertManager \uc640 \ub124\uc774\ud2f0\ube0c \ud558\uac8c \uc5f0\uacb0\ub418\uc5b4 \uc2ac\ub809\uacfc \uac19\uc740 \uba54\uc2dc\uc9d5 \ud50c\ub7ab\ud3fc \ud639\uc740 PagerDuty \uc640 \uac19\uc740 incidient management \ub3c4\uad6c\ub4e4\uacfc\ub3c4 \uc190\uc27d\uac8c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4. \ucd9c\ucc98: prometheus.io \ubaa8\ub2c8\ud130\ub9c1(\ub85c\uadf8) : \ubd84\uc0b0\ud615 \ud658\uacbd\uc5d0\uc11c\ub294 \uc11c\ubc84\uc5d0 \uac01\uac01 \uc811\uc18d\ud574 \ub85c\uadf8\ub97c \ubcf8\ub2e4\ub294 \uac83\uc774 \ub9e4\uc6b0 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc791\uc5c5\uc774\ubbc0\ub85c \uc911\uc559\uc9d1\uc911\ud615 \ub85c\uadf8 \uc2dc\uc2a4\ud15c\uc740 \ud544\uc218\uc801\uc778 \ud56d\ubaa9\uc774\ub2e4. \ud2b9\ud788 \ub85c\uadf8\ub97c STDOUT \ud639\uc740 STDERR\ub85c \uc4f0\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc778 \ud328\ud134\uc778 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc758 \uacbd\uc6b0 \ub85c\uadf8\uac00 node \ub85c\uceec\uc5d0 \uc800\uc7a5\uc774 \ub418\uace0 label \uc140\ub809\ud130\ub97c \ud1b5\ud574 \ud544\uc694\ud560 \ub54c \uc218\uc9d1 \ud560 \uc218 \uc788\uc9c0\ub9cc node\ub098 pod\uac00 \uc8fd\ub294 \uacbd\uc6b0\ub97c \ub300\ube44\ud558\uc5ec log stream\uc73c\ub85c \uc2e4\uc2dc\uac04(\ud639\uc740 \uc900\uc2e4\uc2dc\uac04)\uc73c\ub85c \ub85c\uadf8\ub97c \uc804\uc1a1 \ud574\uc57c \ud55c\ub2e4. \ub9cc\uc57d \ub85c\uadf8 \uac80\uc0c9\uc744 full-text search\ub85c \ud558\uace0 \uadf8\uac83 \uacb0\uacfc\ub97c \uac01\uc885 \ucc28\ud2b8\ub85c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \uc544\ub2c8\ub77c\uba74 ElasticSearch \ubcf4\ub2e4\ub294 \uacfc\uac10\ud558\uac8c \uc2dc\uacc4\uc5f4 \uae30\ubc18\uc73c\ub85c \ub85c\uadf8\ub97c \uc800\uc7a5\ud558\uace0 label\ub9cc indexing\uc744 \ud558\ub294 Loki \ub85c \uac00\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \uc27d\uac8c \ub9d0\ud558\uba74 \ud2b9\uc815 \uae30\uac04\ub3d9\uc548 \ud2b9\uc815 \uc774\ub984\uc73c\ub85c \uc2dc\uc791\ud558\ub294 \uc571 \uc11c\ubc84 \uc804\uccb4 \uc911 \ud2b9\uc815 \uc560\ub7ec \ud328\ud134\uc5d0 \ub300\ud574 top ranking\uc744 \ub9e4\uae30\ub294 \ub85c\uadf8 \uac80\uc0c9\uacfc \ucc28\ud2b8\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, production \uc640 web\uc758 label\uc744 \uac16\ub294 \uc11c\ubc84\ub4e4\uc758 \uc5d0\ub7ec \uc911\uc5d0 403\uc774 \uc788\ub294 \uc11c\ubc84\uc758 1\ubd84 \ub3d9\uc548 \ub85c\uadf8\ub97c \ud655\uc778\ud558\ub294 \uac83\ub9cc\uc73c\ub85c\ub3c4 \ucda9\ubd84\ud558\ub2e4\uba74 Loki\uac00 \ubcf4\ub2e4 \uc11c\ubc84 \ubc0f \uc6b4\uc601 \uce21\uba74\uc5d0\uc11c ELK \uc2a4\ud0dd\ubcf4\ub2e4 \ub9ac\uc18c\uc2a4\ub3c4 \ub35c \ub4e4\uba70 \ube44\uc6a9 \ud6a8\uc728\uc801\uc774\ub2e4. \ub610\ud55c Prometheus like\ud55c \ucee8\uc149\uacfc \ucffc\ub9ac \ud328\ud134\uc744 \uac16\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 Prometheus\ub85c \uc2dc\uc2a4\ud15c \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1\uc744 \ud558\uace0 \uc788\ub2e4\uba74 \ube60\ub974\uac8c Loki\ub97c \uc801\uc751 \ud560 \uc218 \uc788\ub2e4. \ubb3c\ub860 \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc \uc704\uc5d0\uc11c Managed Kubernetes Cluster\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4\uba74 \uc774\ubbf8 CloudWatch , StackDriver \uc5d0\uc11c \uc190\uc27d\uac8c \ub85c\uadf8\ub97c \uc218\uc9d1, \ucffc\ub9ac \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc81c\uacf5\ud558\ub294 \uae30\ubcf8 Log \ubaa8\ub2c8\ud130\ub9c1 \uc194\ub8e8\uc158\uc744 \uc4f0\ub294 \uac83\ub3c4 \uc88b\uc740 \ubc29\ubc95\uc774\ub2e4. \ubaa8\ub2c8\ud130\ub9c1(\ub300\uc2dc\ubcf4\ub4dc) : \ub300\uc2dc\ubcf4\ub4dc\ub294 \ub9d0\ud560 \uac83\uc774 \uc5c6\ub2e4. \ubaa8\ub4e0 \ubaa8\ub2c8\ud130\ub9c1(\uc2dc\uc2a4\ud15c, \ub85c\uadf8, APM)\uc744 \ube44\uc6a9 \uac71\uc815 \uc5c6\uc774 Datadog \uc4f0\ub294 \uc0c1\ud669\uc774 \uc544\ub2c8\ub77c\uba74 Grafana \uac00\uc790. \ub9cc\uc57d\uc5d0 \uae30\uc874\uc5d0 Telegraf\ub85c \uc218\uc9d1\ud558\uace0 InfluxDB, Kapacitor\ub97c \uc0ac\uc6a9 \uc911\uc774\ub77c\uba74 Chronograf \ub85c \ub300\uccb4 \ud560 \uc218 \uc788\uc73c\ub098 Grafana \uac00 \ucee4\ubba4\ub2c8\ud2f0 \ud06c\uae30\ub098 github star \uac1c\uc218\ub9cc \ube44\uad50\ud558\ub354\ub77c\ub3c4 \ube44\uad50 \ud560 \uc218 \uc5c6\uc744 \uc815\ub3c4\ub85c \ub192\ub2e4(\ub300\uc138\uc774\ub2e4).","title":"\ubaa8\ub2c8\ud130\ub9c1"},{"location":"hello-kubernetes/section05/k8-essential-components/#tracing","text":"\uc11c\ube44\uc2a4\uac04 \uc5f0\uad00\uad00\uacc4\uac00 \ubcf5\uc7a1\ud558\uac8c \uc5f0\uacb0\ub418\uc5b4 \uc788\ub294 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\ub4dc \ud658\uacbd\uc5d0\uc11c\ub294 \ud2b9\ud788\ub098 \uc11c\ube44\uc2a4\ub4e4 \ub07c\ub9ac\uc758 \ud2b8\ub808\ud53d\uc744 \ucd94\ucc99\ud558\uc5ec \uc548\uc815\uc131 \ud639\uc740 \uc131\ub2a5 \uac1c\uc120\uc744 \uc704\ud55c \uc815\ud655\ud55c \uc9c0\uc810\uc744 \ucc3e\ub294 \uac83\ub3c4 \ub9e4\uc6b0 \uc911\uc694\ud558\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c Jaeger \uc640 ZipKin \uc774 \uc788\uc73c\uba70 \uae30\ub2a5\uc0c1\uc73c\ub85c\ub294 \ub300\ub3d9\uc18c\uc774 \ud558\ub098 Jager\uac00 OpenTracing \uae30\ub2a5\uc744 \ub124\uc774\ud2f0\ube0c \ud558\uac8c \uc9c0\uc6d0\ud558\uace0 \uc788\uc73c\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc788\ub294 CNCF \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uc131\uacf5\uc801\uc73c\ub85c Graduated \ud55c \ub300\ud45c\uc801\uc778 \ud504\ub85c\uc81d\ud2b8\uc774\ub2e4. \ucd9c\ucc98: Evolving Distributed Tracing at Uber","title":"Tracing"},{"location":"hello-kubernetes/section05/k8-essential-components/#local-development","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uc544\ubb34\ub9ac CICD \ud658\uacbd\uc774 \uc798\ub418\uc5b4 \uc788\uace0 \ube14\ub8e8\uadf8\ub9b0 \ubc30\ud3ec \uc804\ub7b5 \uadf8\ub9ac\uace0 \ubaa8\ub2c8\ud130\ub9c1 \ud658\uacbd\uc774 \uc798\ub418\uc5b4 \uc788\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc744 \ub54c \ube60\ub974\uac8c \ub514\ubc84\uae45\uc744 \ub0b4 \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud560 \uac83\uc774\ub2e4. \ubb3c\ub860 port-fowarding\uc744 \ud1b5\ud574\uc11c \ud574\ub2f9 Pod\ub85c \ub4e4\uc5b4\uac00\uc11c \ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc9c0\ub9cc \ub098\uc758 \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \uc2e4\uc81c \ud2b8\ub808\ud53d\uc744 \ubc1b\uc544\uc11c \ub514\ubc84\uae45\ud558\uace0 \uc2f6\uac70\ub098 \ud639\uc740 \ubc30\ud3ec \ud558\uae30 \uc804\uc5d0 \uac04\ub2e8\ud788 Production\uc5d0\uc11c Pod \ud558\ub098\ub9cc \ud14c\uc2a4\ud2b8 \ud574\ubcf4\uace0 \uc2f6\ub2e4\uba74 Telepresence \ub97c \ud65c\uc6a9\ud558\uba74 \ub41c\ub2e4. Proxy \uc5ed\ud560\uc744 \ud574\uc8fc\ub294 telepresence traffic-agent \ucee8\ud14c\uc774\ub108\uac00 sidecar \ud328\ud134\uc73c\ub85c Pod\uc5d0 \ucd94\uac00\ub418\uc5b4 \uc694\uccad\uc5d0 \ub530\ub77c traffic\uc744 intercept \ud558\uc5ec traffic-manager\uc5d0\uac8c \uc804\ub2ec\ud558\uace0 \ub0b4 \ub85c\uceec\uc5d0 \uc788\ub294 telepresence daemon\uc744 \ud1b5\ud574 \ub85c\uceec app\uc73c\ub85c \ud2b8\ub808\ud53d\uc744 \ud3ec\uc6cc\ub529\uc2dc\ucf1c\uc900\ub2e4.","title":"Local Development"},{"location":"hello-kubernetes/section05/k8-essential-components/#_7","text":"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec\ud558\uae30 \uc704\ud574 \uba87\uac00\uc9c0\uc758 \ubc29\ubc95\uc774 \uc788\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c kubectl manifest\ub85c \ub098\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ub300\ud55c \uad6c\uc131\uc815\ubcf4\ub97c yaml\ud615\ud0dc(manifest)\ub85c \ub9cc\ub4e4\uac8c \ub41c\ub2e4. \ud558\uc9c0\ub9cc \uad6c\uc131\uc815\ubcf4\uac00 \ubcf5\uc7a1\ud574\uc9c8\uc218\ub85d \ub9e4\ubc88 kubectl apply \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud558\ub294 \uac83 \uc790\uccb4\uac00 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc791\uc5c5\uc774\uba70 \uc0ac\ub78c\uc758 \uc2e4\uc218\ub85c \ud2b9\uc815 \ub9ac\uc18c\uc2a4\uac00 \uc81c\uc678\ub418\uace0 \ubc30\ud3ec\ub418\uae30\ub3c4 \ud55c\ub2e4. \ud2b9\ud788\ub098 \ub611\uac19\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud558\ub098\uc758 \ud658\uacbd\uc774 \uc544\ub2cc \uc5ec\ub7ec \ud658\uacbd\uc5d0 \uc124\uc815\ub9cc \ubc14\uafd4\uc11c \ubc30\ud3ec\ud558\ub294 \uacbd\uc6b0 \uc911\ubcf5\ub418\ub294 \ucf54\ub4dc\uac00 \ub9e4\uc6b0 \ub298\uc5b4\ub098\uac8c \ub41c\ub2e4. \uc7ac\uc0ac\uc6a9\uc131\uc744 \ub192\uc774\uace0\uc790 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c \ud639\uc740 \ud15c\ud50c\ub9bf \ub3c4\uad6c \uc778 Helm \uc774 \ub098\uc624\uac8c \ub418\uace0 patch\uc640 \uac19\uc774 \ud2b9\uc815 \ud658\uacbd\uc5d0\ub9cc \uc801\uc6a9\ub418\uc5b4\uc57c \ud558\ub294 \ucd94\uac00\uc801\uc778 manifest \ub300\ud574 \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \uc124\uc815 \uad00\ub9ac \ub3c4\uad6c\uc778 Kustomize \uac00 \ub4f1\uc7a5\ud558\uac8c \ub41c\ub2e4. Helm\uacfc Kustomize\uac00 \uc11c\ub85c \ub300\uccb4\ud558\ub294 \uc194\ub8e8\uc158\uc73c\ub85c \uc0dd\uac01 \ud560 \uc218\ub3c4 \uc788\uc9c0\ub9cc helm\uc5d0\uc11c\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud15c\ud50c\ub9bf \ud300\ub9cc \ud558\uace0(chart\ub85c\ub9cc \ub9cc\ub4e4\uace0) Kustomize\uc5d0\uc11c helm chart\ub97c overlaying \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 helm \uc790\uccb4\ub3c4 kustomize\ub85c \uc720\uc5f0\ud558\uac8c \ubc30\ud3ec \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4.","title":"\ud328\ud0a4\uc9c0 \ubc0f \uc124\uc815 \uad00\ub9ac"},{"location":"hello-kubernetes/section05/k8-essential-components/#_8","text":"AWS Solution Architect \ucc98\ub7fc CNCF Landscape\uc758 \uc194\ub8e8\uc158\ub4e4\uc744 Architecting \ud574\uc8fc\uace0 on-boarding\ub3c4 \uc2dc\ucf1c\uc8fc\ub294 \uc0ac\ub78c\uc774 \uc788\uc73c\uba74 \uc88b\uaca0\uc73c\ub098 \uc544\uc27d\uac8c\ub3c4 \uadf8\ub7f0 \uc0ac\ub78c\uc740 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294\ub2e4. (\uc2e4\uc81c\ub85c\ub294 \uc788\uc73c\ub098 \ub0b4 \uc8fc\uc704\uc5d0 \uc5c6\ub2e4!) \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee8\uc124\ud305 \ud30c\ud2b8\ub108\ub77c\ub294 \ud68c\uc0ac\ub4e4\uc774 \uc0dd\uaca8 \ub098\uace0 \uc788\uc73c\ub098 \uc5b4\ub290\uc815\ub3c4 \uc5ed\ub7c9\uc744 \ubcf4\uc720\ud558\uace0 \uc788\ub294\uc9c0\ub294 \ud45c\uba74\uc0c1\uc73c\ub85c \ud655\uc778 \ud558\uae30 \uc5b4\ub835\ub2e4. \uac1c\uc778\uc801\uc73c\ub85c Jetstack \uc774\ub098 WeaveWorks \ucc98\ub7fc \ubcf8\uc778\ub4e4\uc758 \uc194\ub8e8\uc158\uc744 \uacc4\uc18d CNCF\uc5d0 \uae30\uc5ec \ud558\uba74\uc11c \ucee8\uc124\ud305\uc744 \ud558\ub294 \ud68c\uc0ac\uac00 \uc5ed\ub7c9\uc774 \uc788\ub294 \uacf3\uc774\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4. \ub9c8\uc9c0\ub9c9\uc73c\ub85c \ud56d\uc0c1 \uac15\uc870\ud558\ub294 \uac83\uc774\uc9c0\ub9cc \ud604\uc7ac \ud2b8\ub79c\ub4dc\uc778 \ub3c4\uad6c\ub9cc \ub3c4\uc785\ud55c\ub2e4\uace0 \ub05d\uc774 \uc544\ub2c8\uba70 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\uc6a9\uc790(stakeholder)\ub4e4\uc5d0\uac8c \uc694\uad6c\uc0ac\ud56d \uc870\uc0ac\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \ud574\uc11c \uc2dc\uc2a4\ud15c\uc744 \uace0\ub3c4\ud654\uc2dc\ucf1c\uc57c \ud55c\ub2e4. \ub610\ud55c \uac19\uc774 \uac1c\ubc1c, \uc6b4\uc601\ud574 \ub098\uac00\ub294 \ub3d9\ub8cc(placeholder)\ub4e4\uacfc \uc815\uae30\uc801\uc73c\ub85c \uc2dc\uc2a4\ud15c\uc744 \uac1c\uc120\ud558\uace0 \ud568\uaed8 \ub808\ubca8\uc5c5 \ud574\uc57c\uc9c0\ub9cc \uc548\uc815\uc801\uc73c\ub85c \ubaa8\ub358 \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\uccd0\ub97c \ubc1c\uc804\uc2dc\ucf1c\ub098\uac08 \uc218 \uc788\uc744 \uac83\uc774\ub2e4. Star \uc774 \uae00\uc774 \uc720\uc6a9\ud558\uc600\ub2e4\uba74 \u2b50 Star\ub97c, \ud83d\udcac 1:1 \uc9c8\ubb38\uc774\ub098 \uae30\uc220 \uad00\ub828 \ubb38\uc758\uac00 \ud544\uc694\ud558\uc2e0 \ubd84\ub4e4\uc740 \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \ucd94\uac00 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4.\ud83e\udd17","title":"\ub9c8\uc9c0\ub9c9\uc73c\ub85c"},{"location":"hello-kubernetes/section05/monitoring/","text":"5.3 Monitoring Prometheus Thanos Loki TODO","title":"5.3 Monitoring"},{"location":"hello-kubernetes/section05/monitoring/#53-monitoring","text":"","title":"5.3 Monitoring"},{"location":"hello-kubernetes/section05/monitoring/#prometheus","text":"","title":"Prometheus"},{"location":"hello-kubernetes/section05/monitoring/#thanos","text":"","title":"Thanos"},{"location":"hello-kubernetes/section05/monitoring/#loki","text":"TODO","title":"Loki"},{"location":"hello-kubernetes/section05/secret-management/","text":"5.6 Secret Management External Secrets Vault vault TODO","title":"5.6 Secret Management"},{"location":"hello-kubernetes/section05/secret-management/#56-secret-management","text":"","title":"5.6 Secret Management"},{"location":"hello-kubernetes/section05/secret-management/#external-secrets","text":"","title":"External Secrets"},{"location":"hello-kubernetes/section05/secret-management/#vault","text":"vault TODO","title":"Vault"},{"location":"hello-kubernetes/section06/istio-architecture/","text":"6.1 Istio Istio Architecture TODO","title":"6.1 Istio Architecture"},{"location":"hello-kubernetes/section06/istio-architecture/#61-istio","text":"","title":"6.1 Istio"},{"location":"hello-kubernetes/section06/istio-architecture/#istio","text":"","title":"Istio"},{"location":"hello-kubernetes/section06/istio-architecture/#architecture","text":"TODO","title":"Architecture"},{"location":"hello-kubernetes/section06/security-observability/","text":"6.4 Security & Observability Security Observability TODO","title":"6.4 Security & Observability"},{"location":"hello-kubernetes/section06/security-observability/#64-security-observability","text":"","title":"6.4 Security &amp; Observability"},{"location":"hello-kubernetes/section06/security-observability/#security","text":"","title":"Security"},{"location":"hello-kubernetes/section06/security-observability/#observability","text":"TODO","title":"Observability"},{"location":"hello-kubernetes/section06/service-mesh/","text":"6.3 Service Mesh Istio Service Mesh Envoy Proxy Todo","title":"6.3 Service Mesh"},{"location":"hello-kubernetes/section06/service-mesh/#63-service-mesh","text":"","title":"6.3 Service Mesh"},{"location":"hello-kubernetes/section06/service-mesh/#istio-service-mesh","text":"","title":"Istio Service Mesh"},{"location":"hello-kubernetes/section06/service-mesh/#envoy-proxy","text":"Todo","title":"Envoy Proxy"},{"location":"hello-kubernetes/section06/traffic-management/","text":"6.2 Traffic Management Istio Traffic Management VirtualService DestinationRule Gateway TODO","title":"6.2 Traffic Management"},{"location":"hello-kubernetes/section06/traffic-management/#62-traffic-management","text":"","title":"6.2 Traffic Management"},{"location":"hello-kubernetes/section06/traffic-management/#istio-traffic-management","text":"","title":"Istio Traffic Management"},{"location":"hello-kubernetes/section06/traffic-management/#virtualservice","text":"","title":"VirtualService"},{"location":"hello-kubernetes/section06/traffic-management/#destinationrule","text":"","title":"DestinationRule"},{"location":"hello-kubernetes/section06/traffic-management/#gateway","text":"TODO","title":"Gateway"},{"location":"hello-kubernetes/section07/aws-eks/","text":"7.1 AWS EKS Architecture EKS TODO","title":"7.1 AWS EKS Architecture"},{"location":"hello-kubernetes/section07/aws-eks/#71-aws-eks-architecture","text":"","title":"7.1 AWS EKS Architecture"},{"location":"hello-kubernetes/section07/aws-eks/#eks","text":"TODO","title":"EKS"},{"location":"hello-kubernetes/section07/gcp-gke/","text":"7.2 GCP GKE Architecture GKE TODO","title":"7.2 GCP GKE Architecture"},{"location":"hello-kubernetes/section07/gcp-gke/#72-gcp-gke-architecture","text":"","title":"7.2 GCP GKE Architecture"},{"location":"hello-kubernetes/section07/gcp-gke/#gke","text":"TODO","title":"GKE"},{"location":"hello-kubernetes/section99/pod-resource-advanced/","text":"Deep dive in k8s Pod resources \uc5b4\ub5bb\uac8c kubernetes\ub294 resource\uc758 requests\uc640 limits\ub97c \uc801\uc6a9\ud558\ub294\uac00? kubelet\uc774 pod\uc758 \uc77c\ubd80\uc778 container\ub97c \uc2e4\ud589\ud560\ub54c, kubelet\uc740 container\uc758 cpu/memory\uc758 requests\uc640 limits\ub97c container runtime(e.g. Docker)\ub85c \uc804\ub2ec\ud55c\ub2e4. Linux \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 container\uc5d0\uc11c \uc0ac\uc6a9\uc790\uac00 \uc815\uc758\ud55c \uc218\ub7c9\uc758 resource\ub97c \uc801\uc6a9\ud558\uae30 \uc704\ud574 kernel cgroups\uc744 \uc774\uc6a9\ud558\uc5ec \uad6c\uc131\ud55c\ub2e4. cpu limits : container\uac00 \uc0ac\uc6a9\uac00\ub2a5\ud55c cpu \uc2dc\uac04\uc758 \ud558\ub4dc \ub9ac\ubc0b\uc744 \uc815\uc758\ud568. \ub9e4 \uc2a4\ucf00\uc904\ub9c1 \uc778\ud130\ubc8c\ub3d9\uc548(100ms), \ub9ac\ub205\uc2a4 \ucee4\ub110\uc740 \uc9c0\uc815\ud55c cpu \uc2dc\uac04 \uc81c\ud55c\uc744 \ub118\uacbc\ub294\uac00\ub97c \ud655\uc778\ud55c\ub2e4. \ub9cc\uc57d \ub118\uacbc\ub2e4\uba74, \ucee4\ub110\uc740 \ud574\ub2f9 container\uc758 \ud504\ub85c\uc138\uc2a4\uc758 cpu \uc5f0\uc0b0\uc744 \uba48\ucd94\uace0 \ub2e4\uc2dc \uc2e4\ud589\ub420\ub54c\uae4c\uc9c0 \uc2e4\ud589\uc744 \uae30\ub2e4\ub9b0\ub2e4(throttled) cpu requests: container\uac00 \uc0ac\uc6a9\uac00\ub2a5\ud55c cpu\uc758 \uac00\uc911\uce58. \ud558\ub098\uc758 \ud638\uc2a4\ud2b8\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 \ucee8\ud14c\uc774\ub108(cgroups)\ub97c \uc2e4\ud589\ud558\ub294 \uacbd\uc6b0, \ub354 \ud070 \uc694\uccad(request)\uc774 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub294 \uc791\uc740 \uc694\uccad\uc774 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc \ubcf4\ub2e4 \ub354 \ub9ce\uc740 cpu \uc2dc\uac04\uc774 \ud560\ub2f9\ub428. memory limits: container\uc2e4\ud589\uc2dc, cgroup \uc758 memory limit\ub97c \uc815\uc758\ud568. \ub9cc\uc57d container\uac00 limit\ubcf4\ub2e4 \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \ud560\ub2f9\ud574\uc11c \uc0ac\uc6a9\ud558\ub824\uace0 \uc2dc\ub3c4\ud558\uba74, linux kernel\uc758 oom subsystem\uc774 \uc2e4\ud589\ub418\uace0, \uba54\ubaa8\ub9ac \ud560\ub2f9\uc744 \uc2dc\ub3c4\ud55c container\uc758 \ud504\ub85c\uc138\uc2a4 \uc911 \ud558\ub098\ub97c \uc911\uc9c0\ud558\uc5ec \uac1c\uc785\ud55c\ub2e4. memory requests: container\ub97c \uc2e4\ud589\ud560 \ub54c, kubernetes\uc758 \ub178\ub4dc \uc2a4\ucf00\uc904\ub9c1\uc5d0 \uc0ac\uc6a9\ub418\uace0, \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uc591(Allocatable resource)\ub97c \ub118\uc744\uacbd\uc6b0, \uc2a4\ucf00\uc904\ub9c1\uc774 pending\ub41c\ub2e4. container\uac00 memory reuests \ucd08\uacfc\ud558\uace0, \uc2e4\ud589\ub418\ub294 \ub178\ub4dc\uc758 \uba54\ubaa8\ub9ac\uac00 \ubd80\uc871\ud574\uc9c0\uba74 container\uac00 \uc18d\ud55c Pod\uac00 \ucd95\ucd9c\ub420(evicted) \uac00\ub2a5\uc131\uc774 \ub192\ub2e4. Info kubernetes.io/memory\ub294 incompressible \uc18d\uc131 - isCompressble: false \uc744 \uac00\uc9d0 \uadf8\ub9ac\uace0 container\ub294 \uc624\ub79c \uae30\uac04 \ub3d9\uc548 CPU \uc81c\ud55c\uc744 \ucd08\uacfc\ud558\ub3c4\ub85d \ud5c8\uc6a9\ub418\uac70\ub098 \ud5c8\uc6a9\ub418\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.(cpu throttling) \uadf8\ub7ec\ub098 container runtime(e.g. Docker)\uc740 \uacfc\ub3c4\ud55c CPU \uc0ac\uc6a9\uc73c\ub85c \uc778\ud574 Pod \ub610\ub294 container\ub97c \uc885\ub8cc\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. Info kubernetes.io/cpu \ub294 compressible \uc18d\uc131 - isCompressble: true\uc744 \uac00\uc9d0 container\ub294 \uc9c0\uc815\ud55c limits\ub97c \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc694\uccad \ubc0f \uc81c\ud55c\uc774 \uc801\uc6a9\ub418\ub294 \ubc29\uc2dd\uc740 \ub9ac\uc18c\uc2a4\uac00 \uc555\ucd95 \uac00\ub2a5(compressible)\ud55c\uc9c0 \ub610\ub294 \uc555\ucd95\ud560 \uc218 \uc5c6\ub294\uc9c0(incompressible)\uc5d0 \ub530\ub77c \ub2e4\ub974\ub2e4. Compressible Resource Guarantees resource metadata\uc5d0 isCompressble: true \uc18d\uc131\uc744 \uac00\uc9c0\ub294 \uacbd\uc6b0.(e.g. cpu) container\ub294 \uc694\uccad\ud55c cpu \uc591\uc744 \ubcf4\uc7a5\ubc1b\uc73c\uba70 \ucd94\uac00 cpu\uc2dc\uac04\uc744 \ubc1b\uc744 \uc218\ub3c4 \uc788\uace0 \ubc1b\uc9c0 \uc54a\uc744 \uc218\ub3c4 \uc788\ub2e4.(\uc2e4\ud589 \uc911\uc778 \ub2e4\ub978 \uc791\uc5c5\uc5d0 \ub530\ub77c \ub2e4\ub984) \ucd08\uacfc\ud558\ub294 cpu\ub9ac\uc18c\uc2a4\ub294 \uc694\uccad\ub41c cpu \uc591\uc5d0 \ub530\ub77c \ubd84\ubc30\ub41c\ub2e4.(A : 600m, B: 300m, Node extra 100m -> 2:1 \ube44\uc728\ub85c 100milli\uac00 \ubd84\ubc30\ub428) container\uac00 limits\ub97c \ucd08\uacfc\ud558\uba74 \uc81c\ud55c(throttled)\ub429\ub2c8\ub2e4. \uc81c\ud55c\uc774 \uc9c0\uc815\ub418\uc9c0 \uc54a\uc740 \uacbd\uc6b0 \ucee8\ud14c\uc774\ub108\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c cpu \uc5ec\uc720\uac00 \uc788\ub294 \uacbd\uc6b0, \ucd08\uacfc cpu\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. Incompressible Resource Guarantees resource metadata\uc5d0 isCompressble: fales \uc18d\uc131\uc744 \uac00\uc9c0\ub294 \uacbd\uc6b0.(e.g. memory) container\ub294 \uc694\uccad\ud55c \uba54\ubaa8\ub9ac \uc591\uc744 \uc5bb\ub294\ub2e4. \uba54\ubaa8\ub9ac \uc694\uccad\uc744 \ucd08\uacfc\ud558\uba74 \uc0c1\ud669\uc5d0 \ub530\ub77c container\uac00 \uc885\ub8cc\ub420 \uc218 \uc788\ub2e4. \uadf8\ub7ec\ub098 container\uac00 \uc694\uccad\ud55c \uac83\ubcf4\ub2e4 \uc801\uc740 \ub9ac\uc18c\uc2a4\ub97c \uc18c\ube44\ud558\ub294 \uacbd\uc6b0, \uc885\ub8cc\ud558\uc9c0 \uc54a\ub294\ub2e4.(\uc2dc\uc2a4\ud15c \uc791\uc5c5 \ub610\ub294 \ub370\ubaac\uc5d0 \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 \uc81c\uc678). limits\ubcf4\ub2e4 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub41c\ub2e4.","title":"Deep dive in k8s Pod resources"},{"location":"hello-kubernetes/section99/pod-resource-advanced/#deep-dive-in-k8s-pod-resources","text":"","title":"Deep dive in k8s Pod resources"},{"location":"hello-kubernetes/section99/pod-resource-advanced/#kubernetes-resource-requests-limits","text":"kubelet\uc774 pod\uc758 \uc77c\ubd80\uc778 container\ub97c \uc2e4\ud589\ud560\ub54c, kubelet\uc740 container\uc758 cpu/memory\uc758 requests\uc640 limits\ub97c container runtime(e.g. Docker)\ub85c \uc804\ub2ec\ud55c\ub2e4. Linux \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 container\uc5d0\uc11c \uc0ac\uc6a9\uc790\uac00 \uc815\uc758\ud55c \uc218\ub7c9\uc758 resource\ub97c \uc801\uc6a9\ud558\uae30 \uc704\ud574 kernel cgroups\uc744 \uc774\uc6a9\ud558\uc5ec \uad6c\uc131\ud55c\ub2e4. cpu limits : container\uac00 \uc0ac\uc6a9\uac00\ub2a5\ud55c cpu \uc2dc\uac04\uc758 \ud558\ub4dc \ub9ac\ubc0b\uc744 \uc815\uc758\ud568. \ub9e4 \uc2a4\ucf00\uc904\ub9c1 \uc778\ud130\ubc8c\ub3d9\uc548(100ms), \ub9ac\ub205\uc2a4 \ucee4\ub110\uc740 \uc9c0\uc815\ud55c cpu \uc2dc\uac04 \uc81c\ud55c\uc744 \ub118\uacbc\ub294\uac00\ub97c \ud655\uc778\ud55c\ub2e4. \ub9cc\uc57d \ub118\uacbc\ub2e4\uba74, \ucee4\ub110\uc740 \ud574\ub2f9 container\uc758 \ud504\ub85c\uc138\uc2a4\uc758 cpu \uc5f0\uc0b0\uc744 \uba48\ucd94\uace0 \ub2e4\uc2dc \uc2e4\ud589\ub420\ub54c\uae4c\uc9c0 \uc2e4\ud589\uc744 \uae30\ub2e4\ub9b0\ub2e4(throttled) cpu requests: container\uac00 \uc0ac\uc6a9\uac00\ub2a5\ud55c cpu\uc758 \uac00\uc911\uce58. \ud558\ub098\uc758 \ud638\uc2a4\ud2b8\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 \ucee8\ud14c\uc774\ub108(cgroups)\ub97c \uc2e4\ud589\ud558\ub294 \uacbd\uc6b0, \ub354 \ud070 \uc694\uccad(request)\uc774 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub294 \uc791\uc740 \uc694\uccad\uc774 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc \ubcf4\ub2e4 \ub354 \ub9ce\uc740 cpu \uc2dc\uac04\uc774 \ud560\ub2f9\ub428. memory limits: container\uc2e4\ud589\uc2dc, cgroup \uc758 memory limit\ub97c \uc815\uc758\ud568. \ub9cc\uc57d container\uac00 limit\ubcf4\ub2e4 \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \ud560\ub2f9\ud574\uc11c \uc0ac\uc6a9\ud558\ub824\uace0 \uc2dc\ub3c4\ud558\uba74, linux kernel\uc758 oom subsystem\uc774 \uc2e4\ud589\ub418\uace0, \uba54\ubaa8\ub9ac \ud560\ub2f9\uc744 \uc2dc\ub3c4\ud55c container\uc758 \ud504\ub85c\uc138\uc2a4 \uc911 \ud558\ub098\ub97c \uc911\uc9c0\ud558\uc5ec \uac1c\uc785\ud55c\ub2e4. memory requests: container\ub97c \uc2e4\ud589\ud560 \ub54c, kubernetes\uc758 \ub178\ub4dc \uc2a4\ucf00\uc904\ub9c1\uc5d0 \uc0ac\uc6a9\ub418\uace0, \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uc591(Allocatable resource)\ub97c \ub118\uc744\uacbd\uc6b0, \uc2a4\ucf00\uc904\ub9c1\uc774 pending\ub41c\ub2e4. container\uac00 memory reuests \ucd08\uacfc\ud558\uace0, \uc2e4\ud589\ub418\ub294 \ub178\ub4dc\uc758 \uba54\ubaa8\ub9ac\uac00 \ubd80\uc871\ud574\uc9c0\uba74 container\uac00 \uc18d\ud55c Pod\uac00 \ucd95\ucd9c\ub420(evicted) \uac00\ub2a5\uc131\uc774 \ub192\ub2e4. Info kubernetes.io/memory\ub294 incompressible \uc18d\uc131 - isCompressble: false \uc744 \uac00\uc9d0 \uadf8\ub9ac\uace0 container\ub294 \uc624\ub79c \uae30\uac04 \ub3d9\uc548 CPU \uc81c\ud55c\uc744 \ucd08\uacfc\ud558\ub3c4\ub85d \ud5c8\uc6a9\ub418\uac70\ub098 \ud5c8\uc6a9\ub418\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.(cpu throttling) \uadf8\ub7ec\ub098 container runtime(e.g. Docker)\uc740 \uacfc\ub3c4\ud55c CPU \uc0ac\uc6a9\uc73c\ub85c \uc778\ud574 Pod \ub610\ub294 container\ub97c \uc885\ub8cc\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. Info kubernetes.io/cpu \ub294 compressible \uc18d\uc131 - isCompressble: true\uc744 \uac00\uc9d0 container\ub294 \uc9c0\uc815\ud55c limits\ub97c \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc694\uccad \ubc0f \uc81c\ud55c\uc774 \uc801\uc6a9\ub418\ub294 \ubc29\uc2dd\uc740 \ub9ac\uc18c\uc2a4\uac00 \uc555\ucd95 \uac00\ub2a5(compressible)\ud55c\uc9c0 \ub610\ub294 \uc555\ucd95\ud560 \uc218 \uc5c6\ub294\uc9c0(incompressible)\uc5d0 \ub530\ub77c \ub2e4\ub974\ub2e4.","title":"\uc5b4\ub5bb\uac8c kubernetes\ub294 resource\uc758 requests\uc640 limits\ub97c \uc801\uc6a9\ud558\ub294\uac00?"},{"location":"hello-kubernetes/section99/pod-resource-advanced/#compressible-resource-guarantees","text":"resource metadata\uc5d0 isCompressble: true \uc18d\uc131\uc744 \uac00\uc9c0\ub294 \uacbd\uc6b0.(e.g. cpu) container\ub294 \uc694\uccad\ud55c cpu \uc591\uc744 \ubcf4\uc7a5\ubc1b\uc73c\uba70 \ucd94\uac00 cpu\uc2dc\uac04\uc744 \ubc1b\uc744 \uc218\ub3c4 \uc788\uace0 \ubc1b\uc9c0 \uc54a\uc744 \uc218\ub3c4 \uc788\ub2e4.(\uc2e4\ud589 \uc911\uc778 \ub2e4\ub978 \uc791\uc5c5\uc5d0 \ub530\ub77c \ub2e4\ub984) \ucd08\uacfc\ud558\ub294 cpu\ub9ac\uc18c\uc2a4\ub294 \uc694\uccad\ub41c cpu \uc591\uc5d0 \ub530\ub77c \ubd84\ubc30\ub41c\ub2e4.(A : 600m, B: 300m, Node extra 100m -> 2:1 \ube44\uc728\ub85c 100milli\uac00 \ubd84\ubc30\ub428) container\uac00 limits\ub97c \ucd08\uacfc\ud558\uba74 \uc81c\ud55c(throttled)\ub429\ub2c8\ub2e4. \uc81c\ud55c\uc774 \uc9c0\uc815\ub418\uc9c0 \uc54a\uc740 \uacbd\uc6b0 \ucee8\ud14c\uc774\ub108\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c cpu \uc5ec\uc720\uac00 \uc788\ub294 \uacbd\uc6b0, \ucd08\uacfc cpu\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.","title":"Compressible Resource Guarantees"},{"location":"hello-kubernetes/section99/pod-resource-advanced/#incompressible-resource-guarantees","text":"resource metadata\uc5d0 isCompressble: fales \uc18d\uc131\uc744 \uac00\uc9c0\ub294 \uacbd\uc6b0.(e.g. memory) container\ub294 \uc694\uccad\ud55c \uba54\ubaa8\ub9ac \uc591\uc744 \uc5bb\ub294\ub2e4. \uba54\ubaa8\ub9ac \uc694\uccad\uc744 \ucd08\uacfc\ud558\uba74 \uc0c1\ud669\uc5d0 \ub530\ub77c container\uac00 \uc885\ub8cc\ub420 \uc218 \uc788\ub2e4. \uadf8\ub7ec\ub098 container\uac00 \uc694\uccad\ud55c \uac83\ubcf4\ub2e4 \uc801\uc740 \ub9ac\uc18c\uc2a4\ub97c \uc18c\ube44\ud558\ub294 \uacbd\uc6b0, \uc885\ub8cc\ud558\uc9c0 \uc54a\ub294\ub2e4.(\uc2dc\uc2a4\ud15c \uc791\uc5c5 \ub610\ub294 \ub370\ubaac\uc5d0 \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 \uc81c\uc678). limits\ubcf4\ub2e4 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub41c\ub2e4.","title":"Incompressible Resource Guarantees"},{"location":"hello-kubernetes/section99/troubleshooting-runbook/","text":"Troubleshooting runbook Troubleshooting TODO","title":"Troubleshooting runbook"},{"location":"hello-kubernetes/section99/troubleshooting-runbook/#troubleshooting-runbook","text":"","title":"Troubleshooting runbook"},{"location":"hello-kubernetes/section99/troubleshooting-runbook/#troubleshooting","text":"TODO","title":"Troubleshooting"}]}